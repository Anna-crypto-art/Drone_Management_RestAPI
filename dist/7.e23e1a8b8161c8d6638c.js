(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{275:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(24),n(301),n(48);var r=n(113);function a(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Object(r["a"])(e),null===e)break;return e}function i(){return i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=a(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},i.apply(this,arguments)}},282:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var r,a,i=n(55);(function(e){e[e["EMPTY"]=0]="EMPTY",e[e["UPLOADING"]=1]="UPLOADING",e[e["UPLOAD_FAILED"]=2]="UPLOAD_FAILED",e[e["DATA_INCOMPLETE"]=3]="DATA_INCOMPLETE",e[e["DATA_COMPLETE"]=4]="DATA_COMPLETE",e[e["DATA_COMPLETE_VERIFIED"]=5]="DATA_COMPLETE_VERIFIED",e[e["PROCESSING"]=6]="PROCESSING",e[e["FINISHED"]=7]="FINISHED"})(a||(a={}));var s=(r={},Object(i["a"])(r,a.EMPTY,"EMPTY"),Object(i["a"])(r,a.UPLOADING,"UPLOADING"),Object(i["a"])(r,a.UPLOAD_FAILED,"UPLOAD_FAILED"),Object(i["a"])(r,a.DATA_INCOMPLETE,"DATA_INCOMPLETE"),Object(i["a"])(r,a.DATA_COMPLETE,"DATA_COMPLETE"),Object(i["a"])(r,a.DATA_COMPLETE_VERIFIED,"DATA_COMPLETE_VERIFIED"),Object(i["a"])(r,a.PROCESSING,"PROCESSING"),Object(i["a"])(r,a.FINISHED,"FINISHED"),r)},283:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"app-explanation"},[n("span",{ref:"appExplTarget",staticClass:"app-explanation-container"},[n("b-icon",{attrs:{icon:"question-circle-fill"}})],1),n("b-popover",{attrs:{target:function(){return e.$refs.appExplTarget},triggers:"hover",placement:"top"}},[e._t("default")],2)],1)},a=[];r._withStripped=!0;var i=n(20),s=n(19),o=n(26),l=n(25),c=n(30),u=(n(48),n(24),n(17)),p=n(16),f=function(e,t,n,r){var a,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},d=function(e){Object(o["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(s["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n)}(u["default"]);d=f([Object(p["a"])({name:"app-explanation"})],d);var h=d,v=h,b=(n(302),n(34)),y=Object(b["a"])(v,r,a,!1,null,null,null);y.options.__file="src/app/shared/components/app-explanation/app-explanation.vue";t["a"]=y.exports},287:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["UPDATE_ANALYSIS"]="updateAnalysis",e["RUN_ANALYSIS_TASK"]="runAnalysisTask",e["FINISHED_ANALYSIS_TASK"]="finishedAnalysisTask",e["QFLY_SERVER_STATE_CHANGED"]="qflyServerStateChanged"}(r||(r={}))},289:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(19),a=n(20),i=n(59),s=n(26),o=n(25),l=(n(95),n(17)),c=function(e){Object(s["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(r["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"emit",value:function(e,t){this.$emit.apply(this,[e].concat(Object(i["a"])(t)))}},{key:"on",value:function(e,t){this.$on(e,t)}}]),n}(l["default"]),u=function(){function e(){Object(r["a"])(this,e)}return Object(a["a"])(e,null,[{key:"getAnalysisEventBus",value:function(t){return t in e.anaylsisEventBusses||(e.anaylsisEventBusses[t]=new c),e.anaylsisEventBusses[t]}},{key:"on",value:function(t,n,r){e.getAnalysisEventBus(t).on(n,r)}},{key:"emit",value:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];e.getAnalysisEventBus(t).emit(n,a)}}]),e}();u.anaylsisEventBusses={}},291:function(e,t,n){},295:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(95);function r(e){var t=["KB","MB","GB","TB"],n=0;do{e/=1024}while(e>1024&&++n<t.length);return"".concat(Math.round(e)," ").concat(t[n])}},296:function(e,t,n){"use strict";var r,a,i;n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),function(e){e["FILE_PROGRESS"]="UPLOAD_FILE_PROGRESS",e["FILE_COMPLETE"]="FILE_COMPLETE",e["ERROR"]="UPLOAD_ERROR",e["UPLOAD_PROGRESS"]="UPLOAD_PROGRESS",e["START_UPLOAD"]="START_UPLOAD",e["UPLOAD_COMPLETE"]="UPLOAD_COMPLETE"}(r||(r={})),function(e){e["UNPREPARED"]="UNPREPARED",e["INITIALIZED"]="INITIALIZED",e["UPLOADING"]="UPLOADING",e["FINISHED"]="FINISHED",e["FAILED"]="FAILED",e["RETRYING"]="RETRYING"}(a||(a={})),function(e){e["FILE_SUCCESS"]="fileSuccess",e["FILE_PROGRESS"]="fileProgress",e["FILE_ERROR"]="fileError",e["FILE_RETRY"]="fileRetry",e["FILE_ADDED"]="fileAdded",e["FILE_REMOVED"]="fileRemoved",e["PROGRESS"]="progress",e["FAILED"]="failed",e["COMPLETED"]="completed"}(i||(i={}))},301:function(e,t,n){var r=n(21),a=n(36),i=n(37),s=n(38),o=n(74),l=n(116);function c(e,t){var n,r,u=arguments.length<3?e:arguments[2];return i(e)===u?e[t]:(n=o.f(e,t))?s(n,"value")?n.value:void 0===n.get?void 0:n.get.call(u):a(r=l(e))?c(r,t,u):void 0}r({target:"Reflect",stat:!0},{get:c})},302:function(e,t,n){"use strict";n(291)},303:function(e,t,n){"use strict";var r,a="object"===typeof Reflect?Reflect:null,i=a&&"function"===typeof a.apply?a.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function s(e){console&&console.warn&&console.warn(e)}r=a&&"function"===typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!==e};function l(){l.init.call(this)}e.exports=l,e.exports.once=O,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function p(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var a,i,o;if(u(n),i=e._events,void 0===i?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),o=i[t]),void 0===o)o=i[t]=n,++e._eventsCount;else if("function"===typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),a=p(e),a>0&&o.length>a&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,s(l)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=d.bind(r);return a.listener=n,r.wrapFn=a,a}function v(e,t,n){var r=e._events;if(void 0===r)return[];var a=r[t];return void 0===a?[]:"function"===typeof a?n?[a.listener||a]:[a]:n?g(a):y(a,a.length)}function b(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function g(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function O(e,t){return new Promise((function(n,r){function a(n){e.removeListener(t,i),r(n)}function i(){"function"===typeof e.removeListener&&e.removeListener("error",a),n([].slice.call(arguments))}E(e,t,i,{once:!0}),"error"!==t&&w(e,a,{once:!0})}))}function w(e,t,n){"function"===typeof e.on&&E(e,"error",t,n)}function E(e,t,n,r){if("function"===typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(i){r.once&&e.removeEventListener(t,a),n(i)}))}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!==typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return p(this)},l.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,a=this._events;if(void 0!==a)r=r&&void 0===a.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var l=a[e];if(void 0===l)return!1;if("function"===typeof l)i(l,this,t);else{var c=l.length,u=y(l,c);for(n=0;n<c;++n)i(u[n],this,t)}return!0},l.prototype.addListener=function(e,t){return f(this,e,t,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(e,t){return f(this,e,t,!0)},l.prototype.once=function(e,t){return u(t),this.on(e,h(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,h(this,e,t)),this},l.prototype.removeListener=function(e,t){var n,r,a,i,s;if(u(t),r=this._events,void 0===r)return this;if(n=r[e],void 0===n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(a=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,a=i;break}if(a<0)return this;0===a?n.shift():m(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,i=Object.keys(n);for(r=0;r<i.length;++r)a=i[r],"removeListener"!==a&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},l.prototype.listeners=function(e){return v(this,e,!0)},l.prototype.rawListeners=function(e){return v(this,e,!1)},l.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):b.call(e,t)},l.prototype.listenerCount=b,l.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},310:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var r=n(6),a=n(11);n(24);function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];clearTimeout(t),t=setTimeout((function(){e.apply(void 0,a)}),n)}}function s(e){return o.apply(this,arguments)}function o(){return o=Object(a["a"])(Object(r["a"])().mark((function e(t){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout((function(){return e()}),t)}));case 2:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}},326:function(e,t,n){},327:function(e,t,n){},328:function(e,t,n){},329:function(e,t,n){},378:function(e,t,n){"use strict";n(326)},379:function(e,t,n){"use strict";n(327)},380:function(e,t,n){"use strict";n(328)},381:function(e,t,n){"use strict";n(329)},428:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-content",{attrs:{title:e.$t("new-data-upload"),navback:!0,subtitle:e.plantName,eventId:"newAnalysis"}},[n("div",{staticClass:"app-new-analysis mar-bottom-2x"},[n("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.plantOptions.length>1,expression:"plantOptions.length > 1"}],attrs:{"label-cols-lg":"2",label:e.$t("plant")}},[n("b-form-select",{attrs:{required:"",options:e.plantOptions},model:{value:e.selectedPlantId,callback:function(t){e.selectedPlantId=t},expression:"selectedPlantId"}})],1),n("b-form-group",{attrs:{"label-cols-lg":"2",label:e.$t("acquisition-date")}},[n("b-datepicker",{attrs:{required:""},model:{value:e.flownAt,callback:function(t){e.flownAt=t},expression:"flownAt"}})],1),n("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.productPackagesSelection.length>0,expression:"productPackagesSelection.length > 0"}],attrs:{"label-cols-lg":"2",label:e.$t("product-packages")}},[n("app-multiselect",{attrs:{options:e.productPackagesSelection,readonly:!e.isSuperAdmin},model:{value:e.selectedProductPackages,callback:function(t){e.selectedProductPackages=t},expression:"selectedProductPackages"}})],1)],1),n("app-analysis-uploader",{attrs:{plantId:e.selectedPlantId,analysis:e.analysis,flownAt:e.flownAt}})],1)},a=[];r._withStripped=!0;var i=n(6),s=n(11),o=n(19),l=n(20),c=n(26),u=n(25),p=n(30),f=(n(48),n(24),n(145),n(71),n(144),n(94),n(16)),d=n(42),h=n(96),v=n(45),b=n(72),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-analysis-upload"},[n("div",{staticClass:"mar-bottom-2x"},[n("b-form-checkbox",{attrs:{disabled:!e.hasPlantMetadata},on:{change:e.onChangeDataComplete},model:{value:e.dataComplete,callback:function(t){e.dataComplete=t},expression:"dataComplete"}},[e._v(" "+e._s(e.$t("data-complete"))+" "),n("app-explanation",[e._v(e._s(e.dataCompleteMetadataExpl))])],1)],1),e.uploaderService?n("app-uploader",{attrs:{uploaderService:e.uploaderService,title:e.$t("browse-or-drag-drop-files")}}):e._e(),e.gotoNewAnalysis?n("div",{staticClass:"pull-right mar-top mar-bottom"},[n("app-button",{on:{click:e.onGotoNewAnalysisClick}},[e._v(e._s(e.$t("goto-analysis",{analysis:e.gotoNewAnalysis.name})))])],1):e._e()],1)},m=[];y._withStripped=!0;var g=n(275),O=n(113),w=(n(112),n(117)),E=n(283),j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-file-upload"},[n("b-alert",{attrs:{variant:"danger"},model:{value:e.showErrorAlert,callback:function(t){e.showErrorAlert=t},expression:"showErrorAlert"}},[e.error?n("div",[e._v(" "+e._s(e.$t("error-occured-retrying"))+" "),n("span",{staticClass:"pad-left"},[n("b-spinner",{attrs:{small:""}}),e._v(" ("+e._s(e.errorTrials)+" "+e._s(e.$t("trials"))+") ")],1),n("div",{staticClass:"mar-top font-xs"},[e._v(" "+e._s(e.$t("details"))+": "),n("b",[e._v(e._s(e.error.error))]),n("br"),e._v(" "+e._s(e.error.message)+" ")])]):e._e()]),n("app-files-selection",{attrs:{disabled:e.disableFilesSelection},on:{filesSelected:e.onFilesSelected},scopedSlots:e._u([{key:"files",fn:function(){return[n("div",{directives:[{name:"show",rawName:"v-show",value:e.files.length>0,expression:"files.length > 0"}],staticClass:"app-file-upload-files mar-top"},e._l(e.files,(function(t){return n("app-file-uploader",{key:t.fileName,attrs:{uploaderService:e.uploaderService,uploading:e.uploading,file:t}})})),1)]},proxy:!0}])},[n("div",{staticClass:"app-file-upload-content mar-bottom"},[e.title?n("h3",{staticClass:"app-file-upload-content-title"},[e._v(e._s(e.title))]):e._e(),e._t("default")],2)]),n("app-button",{directives:[{name:"show",rawName:"v-show",value:e.uploadUnfinished,expression:"uploadUnfinished"}],attrs:{loading:e.uploading,disabled:e.uploadButtonDisabled,cls:"pull-right mar-top mar-bottom"},on:{click:e.onStartUpload}},[e._v(" "+e._s(e.$t("upload"))+" ")])],1)},k=[];j._withStripped=!0;var _=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-file-upload-file mar-bottom-half"},[n("div",{staticClass:"app-file-upload-file-infos"},[n("div",{staticClass:"app-file-upload-file-name"},[n("small",{staticClass:"app-file-upload-file-name-size grayed"},[e._v(e._s(e.fileSize))]),e._v(" "+e._s(e.file.fileName)+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.uploading,expression:"!uploading"}],staticClass:"app-file-upload-file-remove",on:{click:e.onFileRemove}},[n("b-icon",{attrs:{icon:"x"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.uploading,expression:"uploading"}],staticClass:"app-file-upload-file-progress"},[n("span",{directives:[{name:"show",rawName:"v-show",value:!e.success,expression:"!success"}]},[e._v(e._s(e.progress)+"%")]),n("b-icon",{directives:[{name:"show",rawName:"v-show",value:e.success,expression:"success"}],staticClass:"text-success",attrs:{icon:"check2"}})],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.uploading,expression:"uploading"}],ref:"uploadProgressBar",staticClass:"app-file-upload-file-progressbar"})])},S=[];_._withStripped=!0;var P=n(17),A=n(295),I=function(e,t,n,r){var a,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},C=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.progress=0,e.success=!1,e}return Object(l["a"])(n,[{key:"created",value:function(){var e=this;this.file.onProgress((function(t){e.progress=t,e.uploadProgressBar&&(e.uploadProgressBar.style.width=e.progress+"%")})),this.file.onComplete((function(){e.success=!0,e.uploadProgressBar&&(e.uploadProgressBar.style.display="none"),e.progress=0}))}},{key:"fileSize",get:function(){return Object(A["a"])(this.file.size)}},{key:"onFileRemove",value:function(){this.uploading||this.uploaderService.removeFile(this.file.fileName)}}]),n}(P["default"]);I([Object(f["b"])({required:!0})],C.prototype,"file",void 0),I([Object(f["b"])({required:!0})],C.prototype,"uploading",void 0),I([Object(f["b"])({required:!0})],C.prototype,"uploaderService",void 0),I([Object(f["c"])()],C.prototype,"uploadProgressBar",void 0),C=I([Object(f["a"])({name:"app-file-uploader"})],C);var x=C,L=x,R=(n(378),n(34)),U=Object(R["a"])(L,_,S,!1,null,null,null);U.options.__file="src/app/shared/components/app-file-upload/app-file-uploader.vue";var N=U.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-file-selection mar-bottom",class:{dragging:e.dragging},on:{drop:e.onDrop,dragover:e.onDragOver,dragleave:e.onDragLeave}},[e._t("default"),n("div",{staticClass:"app-file-selection-button"},[n("app-file-input",{attrs:{disabled:e.disabled},model:{value:e.fileButtonSelection,callback:function(t){e.fileButtonSelection=t},expression:"fileButtonSelection"}})],1),e._t("files")],2)},T=[];D._withStripped=!0;var F=n(59),M=(n(148),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"app-file-input btn btn-primary",class:{disabled:e.disabled}},[n("input",{ref:"fileInputElement",staticClass:"app-file-input-file",attrs:{type:"file",disabled:e.disabled,accept:e.accept,multiple:e.multiple},on:{click:e.onClick,change:e.onChange}}),e._v(" "+e._s(e.$t("browse"))+" ")])}),G=[];M._withStripped=!0;var B=function(e,t,n,r){var a,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},$=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.modelValue=null,e}return Object(l["a"])(n,[{key:"created",value:function(){this.modelValue=this.value}},{key:"onModelValueChanged",value:function(){this.$emit("input",this.modelValue)}},{key:"onClick",value:function(){this.fileInputElement.value=""}},{key:"onChange",value:function(){this.setFiles()}},{key:"setFiles",value:function(){if(this.fileInputElement.files&&0!==this.fileInputElement.files.length){for(var e=[],t=0;t<this.fileInputElement.files.length;t++)e.push(this.fileInputElement.files[t]);this.modelValue=e}else this.modelValue=null}}]),n}(P["default"]);B([Object(f["b"])({required:!0})],$.prototype,"value",void 0),B([Object(f["b"])({default:!0})],$.prototype,"multiple",void 0),B([Object(f["b"])({default:"*"})],$.prototype,"accept",void 0),B([Object(f["b"])({default:!1})],$.prototype,"disabled",void 0),B([Object(f["c"])()],$.prototype,"fileInputElement",void 0),B([Object(f["d"])("modelValue")],$.prototype,"onModelValueChanged",null),$=B([Object(f["a"])({name:"app-file-input"})],$);var z=$,Y=z,V=(n(379),Object(R["a"])(Y,M,G,!1,null,null,null));V.options.__file="src/app/shared/components/app-file-upload/app-file-input.vue";var q=V.exports,H=function(e,t,n,r){var a,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},K=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.fileButtonSelection=null,e.fileDropSelection=null,e.dragging=!1,e}return Object(l["a"])(n,[{key:"emitFiles",value:function(){this.disabled||this.$emit("filesSelected",this.fileDropSelection||this.fileButtonSelection)}},{key:"onFileButtonSelectionChanged",value:function(){this.fileButtonSelection&&(this.fileDropSelection=null),this.emitFiles()}},{key:"onDrop",value:function(e){e.preventDefault(),this.dragging=!1;var t=[];Object(F["a"])(e.dataTransfer.files).forEach((function(e){t.push(e)})),this.fileButtonSelection=null,t.length>0?this.fileDropSelection=t:this.fileDropSelection=null,this.emitFiles()}},{key:"onDragOver",value:function(e){e.preventDefault(),this.dragging=!0}},{key:"onDragLeave",value:function(){this.dragging=!1}}]),n}(P["default"]);H([Object(f["b"])({default:!1})],K.prototype,"disabled",void 0),H([Object(f["d"])("fileButtonSelection")],K.prototype,"onFileButtonSelectionChanged",null),K=H([Object(f["a"])({name:"app-files-selection",components:{AppFileInput:q}})],K);var J=K,Z=J,Q=(n(380),Object(R["a"])(Z,D,T,!1,null,null,null));Q.options.__file="src/app/shared/components/app-file-upload/app-files-selection.vue";var W,X=Q.exports;(function(e){e[e["SELECTING"]=0]="SELECTING",e[e["RESUMING"]=1]="RESUMING",e[e["UPLOADING"]=10]="UPLOADING",e[e["RETRYING"]=11]="RETRYING",e[e["COMPLETED"]=20]="COMPLETED"})(W||(W={}));var ee=n(288),te=function(e,t,n,r){var a,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},ne=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.uploaderState=W.SELECTING,e.uploading=!1,e.error=null,e.showErrorAlert=!1,e.uploadUnfinished=!0,e}return Object(l["a"])(n,[{key:"created",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.registerUploaderEvents();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hasStateSelecting",get:function(){return this.uploaderState===W.SELECTING}},{key:"hasStateResuming",get:function(){return this.uploaderState===W.RESUMING}},{key:"hasStateUploading",get:function(){return this.uploaderState===W.UPLOADING}},{key:"hasStateRetrying",get:function(){return this.uploaderState===W.RETRYING}},{key:"hasStateCompleted",get:function(){return this.uploaderState===W.COMPLETED}},{key:"onFilesSelected",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.uploaderService.fileUploaders=[],!t){e.next=4;break}return e.next=4,this.uploaderService.addFiles(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onStartUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.uploaderService.doUpload();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"files",get:function(){return this.uploaderService.fileUploaders}},{key:"uploadButtonDisabled",get:function(){return 0===this.files.length||this.uploading}},{key:"disableFilesSelection",get:function(){return this.uploading||!this.uploadUnfinished}},{key:"errorTrials",get:function(){return this.uploaderService.getTrials()}},{key:"registerUploaderEvents",value:function(){var e=this;this.uploaderService.onStartUpload((function(){e.uploaderState=W.UPLOADING,e.uploaderStateChanged()})),this.uploaderService.onProgress((function(){e.uploaderState=W.UPLOADING,e.uploaderStateChanged()})),this.uploaderService.onError((function(t){e.uploaderState=W.RETRYING,e.error=t,e.showErrorAlert=!0,console.log("onError:"),console.log(t),e.uploaderStateChanged()})),this.uploaderService.onUploadComplete((function(){e.uploaderState=W.COMPLETED,e.uploaderStateChanged()}))}},{key:"uploaderStateChanged",value:function(){(this.hasStateUploading||this.hasStateRetrying)&&(this.uploading=!0),this.hasStateUploading&&(this.error=null,this.showErrorAlert=!1),this.hasStateResuming,this.hasStateCompleted&&(this.uploadUnfinished=!1,this.uploading=!1,this.showSuccess(this.$t("upload-completed-successfully").toString(),!1))}}]),n}(d["a"]);te([Object(f["b"])({required:!0})],ne.prototype,"uploaderService",void 0),te([Object(f["b"])()],ne.prototype,"title",void 0),te([Object(ee["a"])()],ne.prototype,"onStartUpload",null),ne=te([Object(f["a"])({name:"app-uploader",components:{AppFileUploader:N,AppFilesSelection:X,AppButton:b["a"]}})],ne);var re=ne,ae=re,ie=(n(381),Object(R["a"])(ae,j,k,!1,null,null,null));ie.options.__file="src/app/shared/components/app-file-upload/app-uploader.vue";var se=ie.exports,oe=n(67),le=(n(212),n(213),n(303)),ce=n(310),ue=(n(43),n(50),n(120),n(296)),pe=function(){function e(t,n,r){Object(o["a"])(this,e),this.file=t,this.fileName=n,this.chunkSizeInMB=r,this.event=new le["EventEmitter"],this.complete=!1,this.uploadId=null,this.fileId=null,this.missingChunkNumbers=[]}return Object(l["a"])(e,[{key:"onProgress",value:function(e){this.event.on(ue["c"].FILE_PROGRESS,e)}},{key:"onComplete",value:function(e){this.event.on(ue["c"].FILE_COMPLETE,e)}},{key:"onError",value:function(e){this.event.on(ue["c"].ERROR,e)}},{key:"emitProgress",value:function(e){this.event.emit(ue["c"].FILE_PROGRESS,e)}},{key:"emitComplete",value:function(){this.event.emit(ue["c"].FILE_COMPLETE)}},{key:"emitError",value:function(){this.event.emit(ue["c"].ERROR)}},{key:"fileUploadCompleted",value:function(){this.complete=!0,this.emitComplete()}},{key:"size",get:function(){return this.file.size}},{key:"upload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){var t,n,r,a,s,o,l=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.complete){e.next=3;break}return this.fileUploadCompleted(),e.abrupt("return");case 3:t=1024*this.chunkSizeInMB*1024,n=this.file.size,r=0,a=!1,s=Object(i["a"])().mark((function e(){var s,o,c,u;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=l.getNextChunkNumber(r),!1!==s){e.next=3;break}return e.abrupt("return","break");case 3:return r=s-1,o=r*t,c=s*t,c>=n&&(a=!0,c=n),u=l.file.slice(o,c),e.next=10,v["a"].uploadFileChunk(l.uploadId,u,l.fileId,r+1,(function(e){console.log("progress"),console.log(e);var t=Math.round(e.loaded/e.total*((c-o)/n)*100);l.emitProgress(t)}));case 10:l.removeChunkNumber();case 11:case"end":return e.stop()}}),e)}));case 8:if(a){e.next=15;break}return e.delegateYield(s(),"t0",10);case 10:if(o=e.t0,"break"!==o){e.next=13;break}return e.abrupt("break",15);case 13:e.next=8;break;case 15:this.fileUploadCompleted();case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"unregisterEvents",value:function(){this.event.removeAllListeners()}},{key:"getNextChunkNumber",value:function(e){if(this.missingChunkNumbers.length>0){var t=this.missingChunkNumbers[0];if(-1===t){if(t=e+1,t>this.maxChunks)return!1;this.missingChunkNumbers.unshift(t)}return t}return!1}},{key:"removeChunkNumber",value:function(){if(this.missingChunkNumbers.length>0){var e=this.missingChunkNumbers[0];-1!==e&&this.missingChunkNumbers.splice(0,1)}}},{key:"maxChunks",get:function(){var e=1024*this.chunkSizeInMB*1024,t=this.file.size;return Math.ceil(t/e)}}]),e}(),fe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;Object(o["a"])(this,e),this.chunkSizeInMB=t,this.event=new le["EventEmitter"],this.fileUploaders=[],this.upload=null,this.raisedError=!1,this.trials=0}return Object(l["a"])(e,[{key:"addFiles",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(t){var n,r,a,s,o=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["a"].getSecuredFilenames(t.map((function(e){return e.name})));case 2:n=e.sent,r=Object(oe["a"])(n);try{for(s=function(){var e=a.value,n=t.find((function(t){return t.name===e.original_name}));if(!n)throw new Error("File mapping error");var r=new pe(n,e.secured_name,o.chunkSizeInMB);r.onProgress((function(e){o.emitProgress()})),o.fileUploaders.push(r)},r.s();!(a=r.n()).done;)s()}catch(i){r.e(i)}finally{r.f()}case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeFile",value:function(e){var t=this.fileUploaders.findIndex((function(t){return t.fileName===e}));-1!==t&&this.fileUploaders.splice(t,1)}},{key:"onError",value:function(e){this.event.on(ue["c"].ERROR,e)}},{key:"onStartUpload",value:function(e){this.event.on(ue["c"].START_UPLOAD,e)}},{key:"onProgress",value:function(e){this.event.on(ue["c"].UPLOAD_PROGRESS,e)}},{key:"onUploadComplete",value:function(e){this.event.on(ue["c"].UPLOAD_COMPLETE,e)}},{key:"getTrials",value:function(){return this.trials}},{key:"emitError",value:function(e){this.event.emit(ue["c"].ERROR,e),this.raisedError=!0,this.trials+=1}},{key:"emitProgress",value:function(){this.raisedError?this.raisedError=!1:(this.trials=0,this.event.emit(ue["c"].UPLOAD_PROGRESS))}},{key:"getCreateUploadFiles",value:function(){return this.fileUploaders.map((function(e){return{name:e.fileName,size:e.file.size}}))}},{key:"prepareFileUploaders",value:function(){var e=this;if(!this.upload)throw new Error("Upload is undefined. Missing upload object");var t,n=Object(oe["a"])(this.fileUploaders);try{var r=function(){var n=t.value,r=e.upload.files.find((function(e){return e.name==n.fileName}));if(!r)throw new Error("File mapping error");n.uploadId=e.upload.upload_id,n.fileId=r.id,n.complete=r.complete,n.missingChunkNumbers=r.missing_chunks};for(n.s();!(t=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}}},{key:"setUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=6;break}return e.next=3,v["a"].getUpload(t);case 3:this.upload=e.sent,e.next=7;break;case 6:this.upload=t;case 7:this.prepareFileUploaders();case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"startUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){var t,n,r,a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.upload){e.next=2;break}throw new Error("No upload created or resumed");case 2:if(0!==this.fileUploaders.length){e.next=4;break}throw new Error("No files to upload");case 4:if(!this.fileUploaders.find((function(e){return!e.fileId}))){e.next=6;break}throw new Error("Files not prepared for upload");case 6:if(t=this.getInvalidUploadFilesSelection(),!(t.missingFiles.length>0||t.unknownFiles.length>0)){e.next=9;break}throw new Error("Missing upload files or unknown upload files for resume upload");case 9:this.event.emit(ue["c"].START_UPLOAD);case 10:if(void 0===(n=this.fileUploaders.find((function(e){return!e.complete})))){e.next=54;break}return e.prev=11,console.log("tryUpload: "+n.fileName),e.next=15,this.tryUpload(n);case 15:e.next=52;break;case 17:e.prev=17,e.t0=e["catch"](11),r=3;case 20:if(!(r>0)){e.next=36;break}return e.prev=21,console.log("instantTries: "+r),e.next=25,this.tryUpload(n);case 25:return e.abrupt("break",36);case 28:return e.prev=28,e.t1=e["catch"](21),r--,console.log("catch instantTries... "+r),e.next=34,Object(ce["b"])(1e3*Math.abs(r-3));case 34:e.next=20;break;case 36:a=!0;case 37:if(!a){e.next=52;break}e.prev=38,console.log("Erroring! refreshUpload.."),this.refreshUpload(),a=!1,e.next=50;break;case 44:return e.prev=44,e.t2=e["catch"](38),this.emitError(e.t2),console.log("Catch refreshUpload... erroring: "+a),e.next=50,Object(ce["b"])(1e4);case 50:e.next=37;break;case 52:e.next=10;break;case 54:case"end":return e.stop()}}),e,this,[[11,17],[21,28],[38,44]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancelUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){var t,n,r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["a"].cancelUpload(this.upload.upload_id);case 2:this.upload=null,t=Object(oe["a"])(this.fileUploaders);try{for(t.s();!(n=t.n()).done;)r=n.value,r.unregisterEvents()}catch(a){t.e(a)}finally{t.f()}this.fileUploaders=[];case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMyUploadingUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",v["a"].getMyUploadingUpload());case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getInvalidUploadFilesSelection",value:function(){var e=this;if(!this.upload)throw new Error("upload is undefined");var t={missingFiles:this.upload.files.filter((function(t){return!e.fileUploaders.find((function(e){return e.fileName===t.name}))})).map((function(e){return e.name})),unknownFiles:this.fileUploaders.filter((function(t){return!e.upload.files.find((function(e){return e.name===t.fileName}))})).map((function(e){return e.fileName}))};return t}},{key:"tryUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.upload();case 3:this.isUploadComplete()?this.event.emit(ue["c"].UPLOAD_COMPLETE):this.emitProgress(),e.next=11;break;case 6:throw e.prev=6,e.t0=e["catch"](0),t.emitError(),this.emitError(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"refreshUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.upload){e.next=2;break}throw new Error("Upload is undefined");case 2:this.setUpload(this.upload.upload_id);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isUploadComplete",value:function(){return!this.fileUploaders.find((function(e){return!e.complete}))}}]),e}(),de=n(221),he=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(e,r,a){var i;return Object(o["a"])(this,n),i=t.call(this,a),i.plantId=e,i.analysisId=r,i}return Object(l["a"])(n,[{key:"doUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.analysisId){e.next=5;break}if(this.flownAt){e.next=3;break}throw{error:"INVALID_OR_MISSING_PARAMS",message:de["i18n"].t("missing").toString()+" "+de["i18n"].t("acquisition-date").toString()};case 3:if(this.plantId){e.next=5;break}throw{error:"INVALID_OR_MISSING_PARAMS",message:de["i18n"].t("missing").toString()+" "+de["i18n"].t("plant").toString()};case 5:return e.next=7,this.createAnalysisUpload();case 7:return e.next=9,this.startUpload();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setFlownAt",value:function(e){this.flownAt=e}},{key:"setAnalysisId",value:function(e){this.analysisId=e}},{key:"setPlantId",value:function(e){this.plantId=e}},{key:"createAnalysisUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){var t;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.upload){e.next=9;break}if(this.analysisId){e.next=5;break}return e.next=4,v["a"].createEmptyAnalysis({flown_at:this.flownAt,plant_id:this.plantId});case 4:this.analysisId=e.sent.id;case 5:return e.next=7,v["a"].createAnalysisUpload(this.analysisId,{chunk_size_in_mb:this.chunkSizeInMB,files:this.getCreateUploadFiles()});case 7:t=e.sent,this.setUpload(t);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(fe),ve=n(289),be=n(287),ye=function(e,t,n,r){var a,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},me=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.dataComplete=!1,e.hasPlantMetadata=!1,e.uploaderService=null,e.gotoNewAnalysis=null,e.appContentEventId="newAnalysis",e}return Object(l["a"])(n,[{key:"created",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){var t;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(g["a"])(Object(O["a"])(n.prototype),"created",this).call(this);case 2:this.uploaderService=new he(this.plantId||void 0,null===(t=this.analysis)||void 0===t?void 0:t.id),this.dataComplete=!!this.analysis&&this.analysis.data_complete,this.analysis&&(this.appContentEventId=this.analysis.id),this.registerUploadEvents();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onAnalysisChanged",value:function(){this.dataComplete=!!this.analysis&&this.analysis.data_complete}},{key:"onPlantIdChanged",value:function(){this.plantId&&this.uploaderService.setPlantId(this.plantId)}},{key:"onFlownAtChanged",value:function(){this.flownAt&&this.uploaderService.setFlownAt(this.flownAt)}},{key:"registerUploadEvents",value:function(){var e=this;this.uploaderService.onStartUpload(Object(s["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.t0=e.analysis,t.t0){t.next=5;break}return t.next=4,v["a"].getAnalysis(e.uploaderService.analysisId);case 4:t.t0=t.sent;case 5:n=t.t0,e.hasPlantMetadata=n.has_plant_metadata||!1;case 7:case"end":return t.stop()}}),t)})))),this.uploaderService.onUploadComplete(Object(s["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v["a"].getAnalysis(e.uploaderService.analysisId);case 2:n=t.sent,n.has_plant_metadata&&n.data_complete&&w["a"].showInfo(e.appContentEventId,e.$t("analysis-with-metdata-data-complete_quest").toString()),e.hasPlantMetadata=n.has_plant_metadata||!1,e.analysis||(e.gotoNewAnalysis=n);case 6:case"end":return t.stop()}}),t)}))))}},{key:"dataCompleteMetadataExpl",get:function(){return!this.hasPlantMetadata&&this.$t("missing-plant-metadata").toString()||this.$t("data-complete_expl").toString()}},{key:"onChangeDataComplete",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){var t;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["a"].getAnalysis(this.uploaderService.analysisId);case 2:if(t=e.sent,!t.plant.in_setup_phase||!this.dataComplete){e.next=7;break}if(confirm(this.$t("data-complete-sure-quest").toString())){e.next=7;break}return this.dataComplete=!1,e.abrupt("return");case 7:return e.next=9,v["a"].updateAnalysis(t.id,{data_complete:this.dataComplete});case 9:ve["a"].emit(t.id,be["a"].UPDATE_ANALYSIS);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onGotoNewAnalysisClick",value:function(){this.$router.push({name:"EditAnalysis",params:{id:this.gotoNewAnalysis.id}})}}]),n}(d["a"]);ye([Object(f["b"])({default:null})],me.prototype,"plantId",void 0),ye([Object(f["b"])({default:null})],me.prototype,"flownAt",void 0),ye([Object(f["b"])({default:null})],me.prototype,"analysis",void 0),ye([Object(f["d"])("analysis")],me.prototype,"onAnalysisChanged",null),ye([Object(f["d"])("plantId")],me.prototype,"onPlantIdChanged",null),ye([Object(f["d"])("flownAt")],me.prototype,"onFlownAtChanged",null),ye([Object(ee["a"])()],me.prototype,"onChangeDataComplete",null),ye([Object(ee["a"])()],me.prototype,"onGotoNewAnalysisClick",null),me=ye([Object(f["a"])({name:"app-analysis-uploader",components:{AppContent:h["a"],AppUploader:se,AppButton:b["a"],AppExplanation:E["a"]}})],me);var ge=me,Oe=ge,we=Object(R["a"])(Oe,y,m,!1,null,null,null);we.options.__file="src/app/analysis/shared/analysis-uploader.vue";var Ee=we.exports,je=n(307),ke=n(282),_e=function(e,t,n,r){var a,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},Se=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.selectedPlantId=null,e.plantOptions=[],e.flownAt=null,e.analysis=null,e.productPackagesSelection=[],e.selectedProductPackages=null,e}return Object(l["a"])(n,[{key:"created",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.preparePlantSelection();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onSelectedPlantIdChanged",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadProductPackagesSelection();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onFlownAtChanged",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadProductPackagesSelection();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"plantName",get:function(){var e=this;if(this.selectedPlantId,this.plants){var t=this.plants.find((function(t){return t.id===e.selectedPlantId}));if(t)return t.name}return""}},{key:"preparePlantSelection",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){var t,n;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["a"].getPlants();case 2:return this.plants=e.sent,t=this.$route.query.plantId,t&&!Array.isArray(t)?this.plants=this.plants.filter((function(e){return e.id===t})):t=void 0,e.next=7,v["a"].getAllAnalysis({plant_id:t});case 7:if(n=e.sent,this.plants=this.plants.filter((function(e){return!n.find((function(t){return t.plant.id===e.id&&t.current_state&&t.current_state.state.id<=ke["a"].DATA_INCOMPLETE}))})),0!==this.plants.length){e.next=12;break}return this.$router.push({name:"Analyses"}),e.abrupt("return");case 12:this.plantOptions=this.plants.map((function(e){return{value:e.id,text:e.name}})),1===this.plants.length&&(this.selectedPlantId=this.plants[0].id);case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadProductPackagesSelection",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.productPackagesSelection=[],this.selectedPlantId&&this.flownAt){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,v["a"].getOrderPPsMulitselectOptions(this.selectedPlantId,this.flownAt);case 5:return this.productPackagesSelection=e.sent,e.next=8,v["a"].getNewAnalysisProductPackagesProposal(this.selectedPlantId,this.flownAt);case 8:this.selectedProductPackages=e.sent.map((function(e){return e.id}));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(d["a"]);_e([Object(ee["a"])()],Se.prototype,"created",null),_e([Object(f["d"])("selectedPlantId")],Se.prototype,"onSelectedPlantIdChanged",null),_e([Object(f["d"])("flownAt")],Se.prototype,"onFlownAtChanged",null),_e([Object(ee["a"])()],Se.prototype,"loadProductPackagesSelection",null),Se=_e([Object(f["a"])({name:"app-new-analysis",components:{AppContent:h["a"],AppButton:b["a"],AppAnalysisUploader:Ee,AppMultiselect:je["a"]}})],Se);var Pe=Se,Ae=Pe,Ie=Object(R["a"])(Ae,r,a,!1,null,null,null);Ie.options.__file="src/app/analysis/new-analysis/new-awesome-analysis.vue";t["default"]=Ie.exports}}]);