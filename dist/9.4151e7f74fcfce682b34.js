(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{280:function(e,t,a){"use strict";var s=a(24),n=a(74),i=a(50),r=a(29),l=a(148),o=[],c=o.sort,u=r((function(){o.sort(void 0)})),p=r((function(){o.sort(null)})),d=l("sort"),f=u||!p||!d;s({target:"Array",proto:!0,forced:f},{sort:function(e){return void 0===e?c.call(i(this)):c.call(i(this),n(e))}})},282:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"box "+(e.loading?"loading":"")},[a("app-loading",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]}),e._t("title",[e.title?a("h4",{staticClass:"box-title"},[e._v(" "+e._s(e.title)+" "),e.subtitle?a("div",{staticClass:"box-title-subtitle mar-top-half grayed",domProps:{innerHTML:e._s(e.subtitle)}}):e._e()]):e._e()]),e._t("default")],2)},n=[];s._withStripped=!0;var i=a(20),r=a(19),l=a(22),o=a(21),c=a(27),u=(a(46),a(23),a(17)),p=a(16),d=a(298),f=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},h=function(e){Object(l["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a)}(u["default"]);f([Object(p["b"])({default:""})],h.prototype,"title",void 0),f([Object(p["b"])({default:""})],h.prototype,"subtitle",void 0),f([Object(p["b"])({default:!1})],h.prototype,"loading",void 0),h=f([Object(p["a"])({name:"app-box",components:{AppLoading:d["a"]}})],h);var v=h,y=v,b=(a(311),a(32)),m=Object(b["a"])(y,s,n,!1,null,null,null);m.options.__file="src/app/shared/components/app-box/app-box.vue";t["a"]=m.exports},295:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(19),n=a(20),i=function(){function e(){Object(s["a"])(this,e)}return Object(n["a"])(e,null,[{key:"download",value:function(e,t){var a=document.createElement("a");a.href=e,a.setAttribute("download",t||e),document.body.appendChild(a),a.click(),document.body.removeChild(a)}},{key:"open",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_blank";null===(t=window.open(e,a))||void 0===t||t.focus()}}]),e}()},296:function(e,t,a){},297:function(e,t,a){},298:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-loading"},[a("div",{staticClass:"app-loading-container"},[a("b-spinner")],1)])},n=[];s._withStripped=!0;var i=a(20),r=a(19),l=a(22),o=a(21),c=a(27),u=(a(46),a(23),a(17)),p=a(16),d=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},f=function(e){Object(l["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a)}(u["default"]);f=d([Object(p["a"])({name:"app-loading"})],f);var h=f,v=h,y=(a(310),a(32)),b=Object(y["a"])(v,s,n,!1,null,null,null);b.options.__file="src/app/shared/components/app-loading/app-loading.vue";t["a"]=b.exports},310:function(e,t,a){"use strict";a(296)},311:function(e,t,a){"use strict";a(297)},327:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-simple-file-upload"},[a("b-form-file",{attrs:{accept:e.accept},model:{value:e.modelValue,callback:function(t){e.modelValue=t},expression:"modelValue"}}),e.uploadProgress&&e.modelValue?a("div",{staticClass:"mar-top"},[e._v(" "+e._s(e.$t("uploading"))+" "),a("b-progress",{attrs:{max:e.uploadProgress.total}},[a("b-progress-bar",{attrs:{value:e.uploadProgress.loaded,variant:"success"}},[e.uploadProgress.loaded===e.uploadProgress.total?a("span",[e._v(" "+e._s(e.$t("upload-succes-filename",{filename:e.modelValue.name}))+" ")]):e._e(),e.uploadProgress.loaded<e.uploadProgress.total?a("span",[e._v(" "+e._s(Math.round(e.uploadProgress.loaded/e.uploadProgress.total*100))+"% ")]):e._e()])],1)],1):e._e()],1)},n=[];s._withStripped=!0;var i=a(19),r=a(20),l=a(22),o=a(21),c=a(27),u=(a(46),a(23),a(17)),p=a(16),d=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},f=function(e){Object(l["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.modelValue=null,e}return Object(r["a"])(a,[{key:"created",value:function(){this.modelValue=this.value}},{key:"onModelValueChanged",value:function(){this.$emit("input",this.modelValue)}}]),a}(u["default"]);d([Object(p["b"])({required:!0})],f.prototype,"value",void 0),d([Object(p["b"])({required:!0})],f.prototype,"uploadProgress",void 0),d([Object(p["b"])({default:"*"})],f.prototype,"accept",void 0),d([Object(p["d"])("modelValue")],f.prototype,"onModelValueChanged",null),f=d([Object(p["a"])({name:"app-simple-file-upload"})],f);var h=f,v=h,y=a(32),b=Object(y["a"])(v,s,n,!1,null,null,null);b.options.__file="src/app/shared/components/app-simple-file-upload/app-simple-file-upload.vue";t["a"]=b.exports},341:function(e,t,a){},342:function(e,t,a){},419:function(e,t,a){"use strict";a(341)},420:function(e,t,a){"use strict";a(342)},468:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.analysis?a("app-content",{attrs:{title:e.analysis.name||"",navback:!0,eventId:e.analysis.id},scopedSlots:e._u([{key:"subtitle",fn:function(){return[a("div",{staticClass:"mar-top"},[a("app-step-progress",{attrs:{steps:e.analysisProgressSteps}})],1)]},proxy:!0}],null,!1,2214528238)},[a("div",{staticClass:"app-edit-analysis"},[a("b-tabs",[a("b-tab",{staticClass:"app-edit-analysis-download-tab",scopedSlots:e._u([{key:"title",fn:function(){return[a("b-icon",{attrs:{icon:"download"}}),a("span",{staticClass:"pad-left"},[e._v(e._s(e.$t("download")))])]},proxy:!0}],null,!1,1288288109)},[a("app-download-analysis-files",{attrs:{analysis:e.analysis}})],1),a("b-tab",{staticClass:"app-edit-analysis-upload-tab",scopedSlots:e._u([{key:"title",fn:function(){return[a("b-icon",{attrs:{icon:"upload"}}),a("span",{staticClass:"pad-left"},[e._v(e._s(e.$t("upload")))])]},proxy:!0}],null,!1,3987617677)},[a("app-upload-analysis-files",{attrs:{analysis:e.analysis}})],1),a("b-tab",{staticClass:"app-edit-analysis-edit-tab",scopedSlots:e._u([{key:"title",fn:function(){return[a("b-icon",{attrs:{icon:"pencil-square"}}),a("span",{staticClass:"pad-left"},[e._v(e._s(e.$t("edit")))])]},proxy:!0}],null,!1,725662720)},[a("b-row",[a("b-col",{attrs:{sm:""}},[a("app-box",{attrs:{title:e.$t("edit-analysis")}},[a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmitEditAnalysis(t)}}},[a("b-form-group",{attrs:{label:e.$t("acquisition-date"),"label-cols-sm":"4","label-cols-lg":"2"}},[a("b-datepicker",{attrs:{required:""},model:{value:e.flownAt,callback:function(t){e.flownAt=t},expression:"flownAt"}})],1),a("b-form-group",{attrs:{label:e.$t("product-packages"),"label-cols-sm":"4","label-cols-lg":"2"}},[a("app-multiselect",{attrs:{options:e.productPackagesSelection,readonly:!e.isSuperAdmin},model:{value:e.selectedProductPackageIds,callback:function(t){e.selectedProductPackageIds=t},expression:"selectedProductPackageIds"}})],1),a("app-button",{attrs:{type:"submit",loading:e.loading}},[e._v(e._s(e.$t("apply")))])],1)],1)],1)],1)],1),e.hasReferenceMeasurements?a("b-tab",{staticClass:"app-edit-analysis-ref-measures",scopedSlots:e._u([{key:"title",fn:function(){return[a("b-icon",{attrs:{icon:"clipboard-check"}}),a("span",{staticClass:"pad-left"},[e._v(e._s(e.$t("reference-measurements")))]),a("app-super-admin-marker")]},proxy:!0}],null,!1,1903157060)},[a("app-analysis-reference-measurements",{attrs:{analysis:e.analysis}})],1):e._e(),e.isSuperAdmin?a("b-tab",{staticClass:"app-edit-analysis-admin-tab",scopedSlots:e._u([{key:"title",fn:function(){return[a("b-icon",{attrs:{icon:"shield-shaded"}}),a("span",{staticClass:"pad-left"},[e._v(e._s(e.$t("admin-panel")))])]},proxy:!0}],null,!1,3957700052)},[a("app-edit-analysis-admin",{attrs:{analysis:e.analysis}})],1):e._e()],1)],1)]):e._e()},n=[];s._withStripped=!0;var i=a(6),r=a(11),l=a(19),o=a(20),c=a(22),u=a(21),p=a(27),d=(a(46),a(23),a(112),a(72),a(212),a(213),a(94),a(16)),f=a(42),h=a(56),v=a(47),y=a(97),b=a(71),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("app-button",{attrs:{disabled:e.isDownloadButtonDisabled,loading:e.downloadButtonLoading},on:{click:e.onDownloadSelectedFilesClick}},[e._v(" "+e._s(e.$t("download-selected-files"))+" ")]),e.isSuperAdmin?a("app-button",{attrs:{cls:"mar-left",variant:"secondary",disabled:e.isDownloadButtonDisabled,superAdminProtected:!0},on:{click:e.onMoveSelectedFilesClick}},[e._v(" "+e._s(e.$t("move-selected-files"))+" ")]):e._e(),e.isSuperAdmin?a("app-button",{attrs:{cls:"mar-left",variant:"outline-danger",disabled:e.isDownloadButtonDisabled,loading:e.deleteSelectedFilesLoading,superAdminProtected:!0},on:{click:e.onDeleteSelectedFilesClick}},[e._v(" "+e._s(e.$t("delete-selected-files"))+" ")]):e._e(),a("app-table-container",[a("app-table",{attrs:{rows:e.downloadFilesTableItems,columns:e.downloadFilesTableColumns,loading:e.isFilesLoading,selectMode:"multi",selectAllColumns:!0,emptyText:e.$t("no-files-uploaded")},on:{rowSelected:e.onDownloadFilesSelected},scopedSlots:e._u([{key:"cell(uploadedAt)",fn:function(t){return[e._v(" "+e._s(e.getReadableDate(t.item.uploadedAt))+" ")]}}])})],1),a("app-modal-form",{ref:"moveSelectedFilesModal",attrs:{id:"moveSelectedFilesModal",modalLoading:e.moveSelectedFilesLoading,okTitle:e.$t("move"),title:e.$t("move-selected-files"),superAdminProtected:!0},on:{submit:e.onMoveSelectedFiles}},[a("b-form-group",{attrs:{label:e.$t("select-analysis")}},[a("b-form-select",{attrs:{options:e.moveAnalysisSelection,required:""},model:{value:e.targetAnalysisId,callback:function(t){e.targetAnalysisId=t},expression:"targetAnalysisId"}})],1)],1)],1)},g=[];m._withStripped=!0;var S=a(67),_=(a(144),a(116),a(95),a(280),a(151),a(290),a(283)),O=a(281),A=a(295),j=a(314),w=a(286),k=a(119),x=a(146),E=a(147),R=a(288),T=a(289),I=a(277),F=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},D=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.isDownloadButtonDisabled=!0,e.downloadButtonLoading=!1,e.downloadFilesTableColumns=[{key:"name",label:e.$t("name").toString()},{key:"size",label:e.$t("size").toString()},{key:"uploadedAt",label:e.$t("uploaded-at").toString()}],e.downloadFilesTableItems=[],e.selectedDonwloadFiles=[],e.isFilesLoading=!1,e.moveSelectedFilesLoading=!1,e.targetAnalysisId=null,e.moveAnalysisSelection=[],e.deleteSelectedFilesLoading=!1,e}return Object(o["a"])(a,[{key:"created",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loadFiles();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onAnalysisChanged",value:function(){this.loadFiles()}},{key:"onDownloadFilesSelected",value:function(e){this.selectedDonwloadFiles=e,this.isDownloadButtonDisabled=0===this.selectedDonwloadFiles.length}},{key:"onDownloadSelectedFilesClick",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){var t,a,s,n;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!==this.selectedDonwloadFiles.length){e.next=7;break}return e.next=3,v["a"].getAnalysisFileDownloadUrl(this.analysis.id,this.selectedDonwloadFiles[0].name);case 3:t=e.sent,A["a"].download(t.url,this.selectedDonwloadFiles[0].name),e.next=13;break;case 7:return a="analysis-".concat(this.analysis.name,"-selected-files.zip"),s=this.downloadFilesTableItems.length===this.selectedDonwloadFiles.length?"all":this.selectedDonwloadFiles.map((function(e){return e.name})),e.next=11,v["a"].generateDownloadUrl(v["a"].downloadMultipleAnalysisFilesUrl(this.analysis.id,s));case 11:n=e.sent,A["a"].download(n,a);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getReadableDate",value:function(e){return e&&x["a"].toDateTime(e)||""}},{key:"onMoveSelectedFilesClick",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){var t=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["a"].getAllAnalysis({plant_id:this.analysis.plant.id});case 2:this.moveAnalysisSelection=e.sent.filter((function(e){return e.id!==t.analysis.id})).map((function(e){return{value:e.id,text:e.name}})),this.moveSelectedFilesModal.show();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onMoveSelectedFiles",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["a"].moveAnalysisFiles(this.analysis.id,this.targetAnalysisId,this.selectedDonwloadFiles.map((function(e){return e.name})));case 2:this.moveSelectedFilesModal.hide(),this.showSuccess(this.$t("selected-files-moved-success").toString()),R["a"].emit(this.analysis.id,T["a"].UPDATE_ANALYSIS);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onDeleteSelectedFilesClick",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(confirm(this.$t("delete-selected-files-sure").toString())){e.next=2;break}return e.abrupt("return");case 2:return this.deleteSelectedFilesLoading=!0,e.next=5,v["a"].deleteAnalysisFiles(this.analysis.id,this.selectedDonwloadFiles.map((function(e){return e.name})));case 5:this.showSuccess(this.$t("selected-files-deleted-success").toString()),R["a"].emit(this.analysis.id,T["a"].UPDATE_ANALYSIS);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadFiles",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){var t,a,s,n,r,l,o,c,u,p,d,f,h,y,b;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],this.downloadFilesTableItems=[],this.analysis.files){e.next=4;break}return e.abrupt("return");case 4:for(a=0,s=Object.keys(this.analysis.files);a<s.length;a++)n=s[a],t=t.concat(this.analysis.files[n]);return this.downloadFilesTableItems=[],e.next=8,v["a"].getAnalysisFiles(this.analysis.id,t);case 8:for(r=e.sent,l=0,o=Object.keys(r);l<o.length;l++)c=o[l],u=r[c],u?this.downloadFilesTableItems.push({name:c,size:Object(j["a"])(u.size),uploadedAt:Date.parse(u.uploaded_at)}):this.downloadFilesTableItems.push({name:c,size:null,uploadedAt:null});if(this.downloadFilesTableItems.sort((function(e,t){var a=e.uploadedAt||1,s=t.uploadedAt||1;return a<s?1:a>s?-1:0})),this.analysis.current_state.state.id!==w["a"].UPLOADING){e.next=21;break}return e.next=14,v["a"].getUploadingUsers(this.analysis.id);case 14:if(p=e.sent,!(p.length>0)){e.next=21;break}return e.next=18,v["a"].getMe();case 18:if(d=e.sent,p=p.filter((function(e){return e.email!=d.email})),p.length>0){f=[],h=Object(S["a"])(p);try{for(h.s();!(y=h.n()).done;)b=y.value,f.push(this.$t("user-is-uploading",{user:((b.first_name||"")+" "+(b.last_name||"")).trim()||b.email}).toString())}catch(i){h.e(i)}finally{h.f()}f.push(this.$t("files-of-files-uploaded",{current_files:Object.keys(r).filter((function(e){return!!r[e]})).length,max_files:Object.keys(r).length}).toString()),k["a"].showInfo(this.analysis.id,f.join("<br>"))}case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["a"]);F([Object(d["b"])({required:!0})],D.prototype,"analysis",void 0),F([Object(d["c"])()],D.prototype,"moveSelectedFilesModal",void 0),F([Object(d["d"])("analysis")],D.prototype,"onAnalysisChanged",null),F([Object(I["a"])("downloadButtonLoading")],D.prototype,"onDownloadSelectedFilesClick",null),F([Object(I["a"])()],D.prototype,"onMoveSelectedFilesClick",null),F([Object(I["a"])("moveSelectedFilesLoading")],D.prototype,"onMoveSelectedFiles",null),F([Object(I["a"])("deleteSelectedFilesLoading")],D.prototype,"onDeleteSelectedFilesClick",null),F([Object(I["a"])("isFilesLoading")],D.prototype,"loadFiles",null),D=F([Object(d["a"])({name:"app-download-analysis-files",components:{AppTableContainer:_["a"],AppButton:b["a"],AppModalForm:E["a"],AppTable:O["a"]}})],D);var P=D,C=P,M=a(32),$=Object(M["a"])(C,m,g,!1,null,null,null);$.options.__file="src/app/analysis/edit-analysis/download-analysis-files.vue";var L=$.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",[a("b-col",{attrs:{sm:""}},[a("app-update-analysis-state",{attrs:{analysis:e.analysis}})],1),a("b-col",{attrs:{sm:""}},[a("app-import-analysis-result",{attrs:{analysis:e.analysis}})],1)],1),a("b-row",[a("b-col",{attrs:{sm:""}},[a("app-analysis-file-actions",{attrs:{analysis:e.analysis}})],1),a("b-col",{attrs:{sm:""}},[a("app-run-q-fly-for-analysis",{attrs:{analysis:e.analysis}})],1)],1),a("b-row",[a("b-col",{attrs:{sm:""}},[a("app-delete-analysis",{attrs:{analysis:e.analysis}})],1),a("b-col",{attrs:{sm:""}})],1)],1)},U=[];N._withStripped=!0;var q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-box",{scopedSlots:e._u([{key:"title",fn:function(){return[a("h4",{staticStyle:{"margin-bottom":"1em"}},[e._v(" "+e._s(e.$t("update-analysis-state"))+" ")])]},proxy:!0}])},[e.analysis.plant.in_setup_phase?e._e():a("b-alert",{attrs:{variant:"warning",show:""}},[a("span",{domProps:{innerHTML:e._s(e.$t("attention-state-update-starts-evaulation_expl"))}})]),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmitUpdateState(t)}}},[a("b-form-group",[a("b-form-checkbox",{model:{value:e.sendNotification,callback:function(t){e.sendNotification=t},expression:"sendNotification"}},[e._v(" "+e._s(e.$t("send-notification"))+" ")])],1),a("b-form-group",{attrs:{label:e.$t("select-new-analysis-state")}},[a("b-form-select",{attrs:{required:"",options:e.updateStateOptions},model:{value:e.selectedUpdateState,callback:function(t){e.selectedUpdateState=t},expression:"selectedUpdateState"}})],1),a("b-form-group",{attrs:{label:e.$t("message")}},[a("b-form-textarea",{attrs:{placeholder:e.$t("message"),row:"5"},model:{value:e.selectedUpdateStateMessage,callback:function(t){e.selectedUpdateStateMessage=t},expression:"selectedUpdateStateMessage"}})],1),a("app-button",{attrs:{type:"submit",loading:e.loading}},[e._v(e._s(e.$t("update")))])],1)],1)},V=[];q._withStripped=!0;var G=a(282),B=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},Y=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.selectedUpdateState=null,e.updateStateOptions=null,e.selectedUpdateStateMessage="",e.sendNotification=!1,e.analysisStates=null,e}return Object(o["a"])(a,[{key:"created",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateAnalysisStates();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onUpdateAnalysis",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateAnalysisStates();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateAnalysisStates",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,null!==this.analysisStates){e.next=5;break}return e.next=4,v["a"].getStates();case 4:this.analysisStates=e.sent;case 5:this.setUpdateStateOptions(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.showError(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onSubmitUpdateState",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.loading=!0,this.selectedUpdateState){e.next=4;break}throw{error:"NO_STATE_SELECTED",message:"Please, selecte a state"};case 4:return e.next=6,v["a"].updateAnalysisState(this.analysis.id,{state_id:this.selectedUpdateState,message:this.selectedUpdateStateMessage,do_send_mail:this.sendNotification,force:!0});case 6:R["a"].emit(this.analysis.id,T["a"].UPDATE_ANALYSIS),this.showSuccess(this.$t("update-analysis-state-success").toString()),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.showError(e.t0);case 13:return e.prev=13,this.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[0,10,13,16]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"setUpdateStateOptions",value:function(){var e=this;if(this.analysis.current_state){var t=this.analysisStates[this.analysis.current_state.state.id];0!==t.length?this.updateStateOptions=t.map((function(t){return{value:t,text:e.$t(w["b"][t]).toString()}})):this.updateStateOptions=[]}else this.updateStateOptions=[]}}]),a}(f["a"]);B([Object(d["b"])({required:!0})],Y.prototype,"analysis",void 0),B([Object(d["d"])("analysis")],Y.prototype,"onUpdateAnalysis",null),Y=B([Object(d["a"])({name:"app-update-analysis-state",components:{AppButton:b["a"],AppBox:G["a"]}})],Y);var z=Y,H=z,Z=Object(M["a"])(H,q,V,!1,null,null,null);Z.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/update-analysis-state.vue";var K,Q,J,W=Z.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-box",{attrs:{title:e.$t("manage-result-files")}},[a("b-alert",{attrs:{variant:"info"},model:{value:e.showAlertInfo,callback:function(t){e.showAlertInfo=t},expression:"showAlertInfo"}},[e._v(" "+e._s(e.$t("import-task-running-on-qfly-server"))+" ")]),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.saveManageResultFiles(t)}}},[a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.analysis.analysis_result,expression:"analysis.analysis_result"}],attrs:{label:e.$t("download-existing-result-files")}},e._l(e.importedResultFiles,(function(t){return a("a",{key:t.id,attrs:{href:"#"},on:{click:function(a){return e.onResultFileClick(t)}}},[e._v(" "+e._s(t.filename)+" ")])})),0),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.analysis.analysis_result,expression:"analysis.analysis_result"}]},[a("b-form-checkbox",{attrs:{id:"removeAllAnalysisResultFiles"},model:{value:e.removeAllAnalysisResultFiles,callback:function(t){e.removeAllAnalysisResultFiles=t},expression:"removeAllAnalysisResultFiles"}},[e._v(" "+e._s(e.$t("remove-result-files"))+" ")])],1),a("b-form-group",{attrs:{label:e.$t("select-json-result-file-import")}},[a("b-form-file",{attrs:{accept:".json"},model:{value:e.jsonFile,callback:function(t){e.jsonFile=t},expression:"jsonFile"}})],1),a("b-form-group",{attrs:{label:e.$t("select-result-image-files-zip")}},[a("app-simple-file-upload",{attrs:{uploadProgress:e.uploadProgress,accept:".zip"},model:{value:e.imageFilesZip,callback:function(t){e.imageFilesZip=t},expression:"imageFilesZip"}})],1),a("b-alert",{attrs:{show:!e.importResultsAllowed,variant:"info"}},[e._v(" "+e._s(e.$t("import-result-files-not-allowed_descr"))+" ")]),a("app-button",{attrs:{type:"submit",loading:e.loading,disabled:!e.importResultsAllowed}},[e._v(e._s(e.$t("apply")))])],1)],1)},ee=[];X._withStripped=!0,function(e){e["import_analysis_results"]="import_analysis_results",e["validate_plant_metadata"]="validate_plant_metadata",e["run_qfly_wizard"]="run_qfly_wizard"}(K||(K={})),function(e){e["UNALLOCATED"]="UNALLOCATED",e["STOPPED"]="STOPPED",e["RUNNING"]="RUNNING"}(Q||(Q={})),function(e){e["ALLOCATE"]="ALLOCATE",e["ALLOCATE_AND_START"]="ALLOCATE_AND_START",e["START"]="START",e["RELEASE"]="RELEASE",e["SET_SERVER_SIZE_SMALL"]="SET_SERVER_SIZE_SMALL",e["SET_SERVER_SIZE_MEDIUM"]="SET_SERVER_SIZE_MEDIUM",e["SET_SERVER_SIZE_LARGE"]="SET_SERVER_SIZE_LARGE",e["STOP"]="STOP",e["STOP_AND_RELEASE"]="STOP_AND_RELEASE"}(J||(J={}));var te=a(327),ae=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},se=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.importedResultFiles=[],e.removeAllAnalysisResultFiles=!1,e.jsonFile=null,e.imageFilesZip=null,e.uploadProgress=null,e.showAlertInfo=!1,e}return Object(o["a"])(a,[{key:"created",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){var t=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.setManageImportFiles();case 2:R["a"].on(this.analysis.id,T["a"].RUN_ANALYSIS_TASK,(function(e){e.name===K.import_analysis_results&&(t.loading=!0)})),R["a"].on(this.analysis.id,T["a"].FINISHED_ANALYSIS_TASK,(function(e){e.name===K.import_analysis_results&&(t.loading=!1,"SUCCESSFUL"===e.state&&t.successfullyFinished())})),R["a"].on(this.analysis.id,T["a"].QFLY_SERVER_STATE_CHANGED,(function(e){t.showAlertInfo=e===Q.RUNNING}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onUpdateAnalysis",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.setManageImportFiles();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onResultFileClick",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(t){var a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v["a"].getAnalysisResultFileUrl(t.id);case 3:a=e.sent,A["a"].download(a.url,t.filename),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.showError(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"importResultsAllowed",get:function(){return this.analysis.current_state.state.id>=w["a"].DATA_COMPLETE_VERIFIED}},{key:"setManageImportFiles",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.analysis.analysis_result){e.next=4;break}return e.next=3,v["a"].getAnalysisResultFiles(this.analysis.analysis_result.id);case 3:this.importedResultFiles=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveManageResultFiles",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){var t,a=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.loading=!0,!this.analysis.analysis_result||!this.removeAllAnalysisResultFiles){e.next=5;break}return e.next=5,v["a"].deleteAnalysisResult(this.analysis.analysis_result.id);case 5:if(!this.jsonFile){e.next=15;break}return k["a"].showInfo(this.analysis.id,"Uploading result file..."),e.next=9,v["a"].importAnalysisResult(this.jsonFile,this.analysis.id,null===(t=this.imageFilesZip)||void 0===t?void 0:t.name);case 9:if(R["a"].emit(this.analysis.id,T["a"].UPDATE_ANALYSIS),!this.imageFilesZip){e.next=13;break}return e.next=13,v["a"].uploadImportAnalysisResultImageFiles(this.analysis.id,this.imageFilesZip,(function(e){a.uploadProgress={total:e.total,loaded:e.loaded}}));case 13:e.next=16;break;case 15:this.successfullyFinished();case 16:e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](0),this.showError(e.t0),this.loading=!1;case 22:return e.prev=22,this.uploadProgress=null,e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[0,18,22,25]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"successfullyFinished",value:function(){this.showSuccess(this.$t("success-managing-result-files").toString()),this.loading=!1,R["a"].emit(this.analysis.id,T["a"].UPDATE_ANALYSIS)}}]),a}(f["a"]);ae([Object(d["b"])({required:!0})],se.prototype,"analysis",void 0),ae([Object(d["d"])("analysis")],se.prototype,"onUpdateAnalysis",null),se=ae([Object(d["a"])({name:"app-import-analysis-result",components:{AppButton:b["a"],AppBox:G["a"],AppSimpleFileUpload:te["a"]}})],se);var ne=se,ie=ne,re=Object(M["a"])(ie,X,ee,!1,null,null,null);re.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/import-analysis-result.vue";var le=re.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-box",{attrs:{title:e.$t("danger-zone")}},[a("app-button",{attrs:{type:"button",variant:"danger",loading:e.finishTaskLoading,disabled:!e.analysis.task_id},on:{click:e.onFinishTaskClick}},[e._v(" "+e._s(e.$t("finish-running-task"))+" ")]),a("hr"),a("app-button",{attrs:{type:"button",variant:"danger",loading:e.loading},on:{click:e.onDeleteAnalysisClick}},[e._v(" "+e._s(e.$t("delete"))+" ")])],1)},ce=[];oe._withStripped=!0;var ue=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},pe=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.finishTaskLoading=!1,e}return Object(o["a"])(a,[{key:"onDeleteAnalysisClick",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!confirm("Delete analysis and all according files? This cannot be undone.")){e.next=6;break}return this.loading=!0,e.next=5,v["a"].deleteAnalysis(this.analysis.id);case 5:this.$router.push({name:"Analyses"});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.showError(e.t0);case 11:return e.prev=11,this.loading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,8,11,14]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onFinishTaskClick",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.finishTaskLoading=!0,e.prev=1,e.next=4,v["a"].finishRunningTask(this.analysis.id);case 4:R["a"].emit(this.analysis.id,T["a"].UPDATE_ANALYSIS),this.showSuccess(this.$t("successfully-finished-running-task").toString()),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),this.showError(e.t0);case 11:return e.prev=11,this.finishTaskLoading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[1,8,11,14]])})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["a"]);ue([Object(d["b"])({required:!0})],pe.prototype,"analysis",void 0),pe=ue([Object(d["a"])({name:"app-delete-analysis",components:{AppButton:b["a"],AppBox:G["a"]}})],pe);var de=pe,fe=de,he=Object(M["a"])(fe,oe,ce,!1,null,null,null);he.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/delete-analysis.vue";var ve=he.exports,ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-box",{scopedSlots:e._u([{key:"title",fn:function(){return[a("h4",{staticClass:"box-title"},[e._v(" "+e._s(e.$t("run-qfly-server"))),a("br"),a("small",{staticClass:"grayed",domProps:{innerHTML:e._s(e.serverInfo)}})])]},proxy:!0}])},[e.qFlyServer?a("b-form",{on:{submit:function(t){return t.preventDefault(),e.runServerAction(t)}}},[e.serverStateUnallocated?e._e():a("b-form-group",{attrs:{label:e.$t("server-tags")}},e._l(e.qFlyServer.server.tags,(function(t){return a("b-row",{key:t.Key,staticClass:"mar-bottom"},[a("b-col",[a("b-form-input",{on:{change:e.onTagChanged},model:{value:t.Key,callback:function(a){e.$set(t,"Key",a)},expression:"tag.Key"}})],1),a("b-col",[a("b-form-input",{on:{change:e.onTagChanged},model:{value:t.Value,callback:function(a){e.$set(t,"Value",a)},expression:"tag.Value"}})],1)],1)})),1),a("b-form-group",{attrs:{label:e.$t("run-server-action")}},[a("b-form-select",{attrs:{options:e.qFlyServerActionSelection},model:{value:e.selectedServerAction,callback:function(t){e.selectedServerAction=t},expression:"selectedServerAction"}})],1),a("b-form-group",{attrs:{label:e.$t("run-task")}},[a("b-form-select",{attrs:{options:e.runTaskSelection,disabled:e.taskSelectionDisabled},model:{value:e.selectedTask,callback:function(t){e.selectedTask=t},expression:"selectedTask"}})],1),a("app-button",{attrs:{type:"submit",loading:e.loading}},[e._v(e._s(e.$t("apply")))])],1):e._e()],1)},be=[];ye._withStripped=!0;var me=a(59),ge=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},Se=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.qFlyServer=null,e.qFlyServerActionSelection=[],e.runTaskSelection=[],e.tagsChanged=!1,e.selectedServerAction=null,e.selectedTask=null,e.taskSelectionDisabled=!1,e.loading=!1,e}return Object(o["a"])(a,[{key:"created",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){var t=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateQFlyServer();case 2:R["a"].on(this.analysis.id,T["a"].RUN_ANALYSIS_TASK,(function(e){t.taskSelectionDisabled=!0})),R["a"].on(this.analysis.id,T["a"].FINISHED_ANALYSIS_TASK,(function(e){t.taskSelectionDisabled=!1,"SUCCESSFUL"===e.state&&(e.name===K.validate_plant_metadata?t.showSuccess(t.$t("uploaded-data-complete-success").toString()):e.name===K.run_qfly_wizard&&t.showSuccess(t.$t("evaluation-finished-success").toString()))}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"serverInfo",get:function(){var e,t,a;return this.qFlyServer?this.$t("SERVER_STATE_".concat(this.qFlyServer.state),{server:null===(e=this.qFlyServer.server)||void 0===e?void 0:e.name}).toString()+(!this.serverStateUnallocated&&" "+this.$t("SERVER_INSTANCE_TYPE_VOLUME_SIZE_STRING",{instance_type:null===(t=this.qFlyServer.server)||void 0===t?void 0:t.instance_type,volume_size:null===(a=this.qFlyServer.server)||void 0===a?void 0:a.volume_size.toString()}).toString()||"")+(this.serverStateUnallocated&&"<br>"+this.$t("servers-available",{count:this.qFlyServer.servers_available}).toString()||""):""}},{key:"updateQFlyServer",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){var t,a=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v["a"].getQFlyServer(this.analysis.id);case 3:t=e.sent,this.qFlyServer&&this.qFlyServer.state===t.state||R["a"].emit(this.analysis.id,T["a"].QFLY_SERVER_STATE_CHANGED,t.state),this.qFlyServer=t,this.qFlyServerActionSelection=[{value:null,text:""}].concat(Object(me["a"])(this.qFlyServer.actions.map((function(e){return{value:e,text:a.$t("SERVER_ACTION_".concat(e)).toString()}})))),this.runTaskSelection=[{value:null,text:""},{text:this.$t("validate-file-completeness").toString(),value:K.validate_plant_metadata},{text:this.$t("run-qfly-wizard").toString(),value:K.run_qfly_wizard}],e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.showError(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"serverStateUnallocated",get:function(){return this.qFlyServer.state==Q.UNALLOCATED}},{key:"onTagChanged",value:function(){this.tagsChanged=!0}},{key:"serverStateStopped",get:function(){return this.qFlyServer.state==Q.STOPPED}},{key:"serverStateRunning",get:function(){return this.qFlyServer.state==Q.RUNNING}},{key:"runServerAction",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){var t,a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,e.prev=1,t="",this.tagsChanged||this.selectedServerAction||this.selectedTask){e.next=7;break}throw{error:"NOTHING_CHANGED_OR_SELECTED",message:"You did not change any tag or select anything to run/do."};case 7:this.tagsChanged&&(t+=this.$t("apply-tags-changed").toString()+"\n\n"),this.selectedServerAction&&(t+="\n\n"+this.$t("apply-selected-server-action").toString()+J[this.selectedServerAction]+"\n\n"),this.selectedTask&&(t+="\n\n"+this.$t("apply-selected-task-to-run").toString()+K[this.selectedTask]+"\n\n"),t+=this.$t("apply-are-you-sure").toString();case 11:if(!confirm(t)){e.next=17;break}return e.next=14,v["a"].runQFlyServerAction(this.analysis.id,{action:this.selectedServerAction&&J[this.selectedServerAction]||void 0,start_task:this.selectedTask&&K[this.selectedTask]||void 0,tags:this.tagsChanged?null===(a=this.qFlyServer.server)||void 0===a?void 0:a.tags:void 0});case 14:return e.next=16,this.updateQFlyServer();case 16:R["a"].emit(this.analysis.id,T["a"].UPDATE_ANALYSIS);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](1),this.showError(e.t0);case 22:return e.prev=22,this.loading=!1,e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[1,19,22,25]])})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["a"]);ge([Object(d["b"])({required:!0})],Se.prototype,"analysis",void 0),Se=ge([Object(d["a"])({name:"app-run-qfly-for-analysis",components:{AppButton:b["a"],AppBox:G["a"]}})],Se);var _e=Se,Oe=_e,Ae=Object(M["a"])(Oe,ye,be,!1,null,null,null);Ae.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/run-qfly-for-analysis.vue";var je=Ae.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-box",{attrs:{title:e.$t("analysis-file-actions")}},[a("app-button",{attrs:{type:"button",loading:e.plantCoverageLoading},on:{click:e.onPlantCoverageClick}},[e._v(" "+e._s(e.$t("check-drone-plant-coverage"))+" ")])],1)},ke=[];we._withStripped=!0;var xe=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},Ee=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.plantCoverageLoading=!1,e}return Object(o["a"])(a,[{key:"onPlantCoverageClick",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){var t,a,s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.plantCoverageLoading=!0,null===(t=this.analysis)||void 0===t||!t.id){e.next=7;break}return e.next=4,v["a"].getDronePlantCoverage(null===(a=this.analysis)||void 0===a?void 0:a.id);case 4:s=e.sent,console.log(s),this.showSuccess(this.$t("successfully-checked-drone-coverage").toString());case 7:this.plantCoverageLoading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["a"]);xe([Object(d["b"])({required:!0})],Ee.prototype,"analysis",void 0),xe([Object(I["a"])("plantCoverageLoading")],Ee.prototype,"onPlantCoverageClick",null),Ee=xe([Object(d["a"])({name:"app-analysis-file-actions",components:{AppButton:b["a"],AppBox:G["a"]}})],Ee);var Re=Ee,Te=Re,Ie=Object(M["a"])(Te,we,ke,!1,null,null,null);Ie.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/analysis-file-actions.vue";var Fe=Ie.exports,De=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},Pe=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){return Object(l["a"])(this,a),t.apply(this,arguments)}return Object(o["a"])(a)}(f["a"]);De([Object(d["b"])({required:!0})],Pe.prototype,"analysis",void 0),Pe=De([Object(d["a"])({name:"app-edit-analysis-result-admin",components:{AppUpdateAnalysisState:W,AppImportAnalysisResult:le,AppDeleteAnalysis:ve,AppRunQFlyForAnalysis:je,AppAnalysisFileActions:Fe}})],Pe);var Ce=Pe,Me=Ce,$e=Object(M["a"])(Me,N,U,!1,null,null,null);$e.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/edit-analysis-admin.vue";var Le=$e.exports,Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-alert",{attrs:{show:!e.uploadAllowed,variant:"info"}},[e._v(" "+e._s(e.$t("upload-not-allowed_descr"))+" ")]),e.uploadAllowed?a("app-analysis-uploader",{attrs:{analysis:e.analysis}}):e._e()],1)},Ue=[];Ne._withStripped=!0;var qe=a(373),Ve=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},Ge=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){return Object(l["a"])(this,a),t.apply(this,arguments)}return Object(o["a"])(a,[{key:"uploadAllowed",get:function(){return this.analysis&&this.analysis.current_state.state.id<w["a"].DATA_COMPLETE_VERIFIED||!1}}]),a}(f["a"]);Ve([Object(d["b"])({required:!0})],Ge.prototype,"analysis",void 0),Ge=Ve([Object(d["a"])({name:"app-upload-analysis-files",components:{AppAnalysisUploader:qe["a"]}})],Ge);var Be=Ge,Ye=Be,ze=Object(M["a"])(Ye,Ne,Ue,!1,null,null,null);ze.options.__file="src/app/analysis/edit-analysis/upload-analysis-files.vue";var He=ze.exports,Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("app-table-container",[a("app-table",{attrs:{rows:e.refMeasureItems,columns:e.refMeasureColumns,selectMode:"single",loading:e.loading,hoverActions:!0},on:{rowSelected:e.onRefMeasureSelected},scopedSlots:e._u([{key:"hoverActions",fn:function(t){return[a("app-button",{directives:[{name:"show",rawName:"v-show",value:e.isSuperAdmin,expression:"isSuperAdmin"}],attrs:{icon:"arrow-right-circle-fill",variant:"secondary",size:"sm",title:e.$t("move-to-another-analysis")},on:{click:function(a){return e.onMoveClick(t.item)}}}),a("app-button",{directives:[{name:"show",rawName:"v-show",value:e.isSuperAdmin,expression:"isSuperAdmin"}],attrs:{variant:"outline-danger",size:"sm",icon:"trash",title:e.$t("delete")},on:{click:function(a){return e.onDeleteClick(t.item)}}})]}}])})],1),a("app-reference-measurement-values",{attrs:{refMeasureId:e.selectedRefMeasureId}}),a("app-modal-form",{ref:"moveModal",attrs:{id:"move-modal",title:e.$t("move-to-another-analysis"),"ok-title":e.$t("move"),modalLoading:e.moveModalLoading},on:{submit:e.onMove}},[a("b-form-group",{attrs:{label:e.$t("select-analysis")}},[a("b-form-select",{attrs:{options:e.moveToAnalyses,required:""},model:{value:e.moveTargetAnalysisId,callback:function(t){e.moveTargetAnalysisId=t},expression:"moveTargetAnalysisId"}})],1)],1)],1)},Ke=[];Ze._withStripped=!0;var Qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.refMeasureId,expression:"refMeasureId"}]},[a("app-table-container",[a("app-table",{attrs:{rows:e.refMeasureValueItems,columns:e.refMeasureValueColumns,loading:e.loading,hoverActions:!0},scopedSlots:e._u([{key:"hoverActions",fn:function(t){return[a("app-button",{directives:[{name:"show",rawName:"v-show",value:e.isSuperAdmin,expression:"isSuperAdmin"}],attrs:{variant:"secondary",size:"sm",title:t.item.ignored?e.$t("ignore-value-undo"):e.$t("ignore-value"),icon:t.item.ignored?"plus-circle":"dash-circle"},on:{click:function(a){return e.onIgnoreClick(t.item)}}})]}}])})],1)],1)},Je=[];Qe._withStripped=!0;var We=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},Xe=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.refMeasureValueItems=[],e.refMeasureValueColumns=[{key:"pcs",label:e.$t("pcs").toString()},{key:"absorberTemperature",label:e.$t("glass-tube-temperature").toString()},{key:"brokenGlass",label:e.$t("missing-gct").toString()},{key:"notes",label:e.$t("notes").toString()},{key:"ignored",label:e.$t("ignored").toString()}],e}return Object(o["a"])(a,[{key:"created",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateRefMeasurementValues();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onRefMeasureChanged",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateRefMeasurementValues();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onIgnoreClick",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v["a"].ignoreReferenceMeasurementValue(t.id,!t.ignored);case 3:return this.showSuccess(this.$t("reference-measurement-value-change-success").toString()),e.next=6,this.updateRefMeasurementValues();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.showError(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateRefMeasurementValues",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.loading=!0,this.refMeasureId){e.next=5;break}return this.refMeasureValueItems=[],e.abrupt("return");case 5:return e.next=7,v["a"].getReferencMeasurementValues(this.refMeasureId);case 7:this.refMeasureValueItems=e.sent.map((function(e){return{id:e.id,pcs:e.fieldgeometry_component.kks,absorberTemperature:e.hce_temperature,brokenGlass:e.hce_broken_glass,notes:e.notes,ignored:e.ignore}})).sort((function(e,t){var a=e.pcs.toLowerCase(),s=t.pcs.toLowerCase();return a<s?-1:a>s?1:0})),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.showError(e.t0);case 13:return e.prev=13,this.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[0,10,13,16]])})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["a"]);We([Object(d["b"])({default:null})],Xe.prototype,"refMeasureId",void 0),We([Object(d["d"])("refMeasureId")],Xe.prototype,"onRefMeasureChanged",null),Xe=We([Object(d["a"])({name:"app-reference-measurement-values",components:{AppTableContainer:_["a"],AppTable:O["a"],AppButton:b["a"]}})],Xe);var et=Xe,tt=et,at=Object(M["a"])(tt,Qe,Je,!1,null,null,null);at.options.__file="src/app/analysis/edit-analysis/reference-measurement/reference-measurement-values.vue";var st=at.exports,nt=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},it=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.refMeasureItems=[],e.refMeasureColumns=[{key:"measureDate",label:e.$t("measure-date").toString()},{key:"measureNotes",label:e.$t("notes").toString()},{key:"user_created",label:e.$t("acquired-by").toString()},{key:"user_updated",label:e.$t("up0dated-by").toString()}],e.selectedRefMeasureId=null,e.moveRefMeasureId=null,e.moveTargetAnalysisId=null,e.moveToAnalyses=[],e.moveModalLoading=!1,e}return Object(o["a"])(a,[{key:"created",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.updateRefMeasurements();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onMoveClick",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(t){var a=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.moveRefMeasureId=t.id,e.next=3,v["a"].getAllAnalysis({plant_id:this.analysis.plant.id});case 3:this.moveToAnalyses=e.sent.filter((function(e){return e.id!==a.analysis.id})).map((function(e){return{value:e.id,text:e.name}})),this.moveTargetAnalysisId=null,this.moveModal.show();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onMove",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.moveTargetAnalysisId){e.next=2;break}throw{error:"MISSING_TARGET_ANALYSIS",message:"Please select an analysis"};case 2:return e.next=4,v["a"].moveReferenceMeasurement(this.moveRefMeasureId,this.moveTargetAnalysisId);case 4:return this.showSuccess(this.$t("reference-measurement-moved-success").toString()),e.next=7,this.updateRefMeasurements();case 7:R["a"].emit(this.analysis.id,T["a"].UPDATE_ANALYSIS),this.moveModal.hide();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onDeleteClick",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(confirm(this.$t("reference-measurement-delete-are-you-sure").toString())){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v["a"].deleteReferenceMeasurement(t.id);case 4:return this.showSuccess(this.$t("reference-measurement-delete-success").toString()),e.next=7,this.updateRefMeasurements();case 7:R["a"].emit(this.analysis.id,T["a"].UPDATE_ANALYSIS);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onRefMeasureSelected",value:function(e){e.length>0?this.selectedRefMeasureId=e[0].id:this.selectedRefMeasureId=null}},{key:"updateRefMeasurements",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){var t=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["a"].getReferenceMeasurements(this.analysis.id);case 2:this.refMeasureItems=e.sent.map((function(e){return{id:e.id,measureDate:x["a"].toDate(e.measure_date),measureNotes:e.notes,user_created:e.user_created?(e.user_created.first_name+" "+e.user_created.last_name).trim()||e.user_created.email:"",user_updated:e.user_updated?((e.user_updated.first_name+" "+e.user_updated.last_name).trim()||e.user_updated.email)+" "+t.$t.apply(t,Object(me["a"])(x["a"].getTimeDiff(e.updated_at))).toString():""}}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["a"]);nt([Object(d["b"])({required:!0})],it.prototype,"analysis",void 0),nt([Object(d["c"])()],it.prototype,"moveModal",void 0),nt([Object(I["a"])("loading")],it.prototype,"onMoveClick",null),nt([Object(I["a"])("moveModalLoading")],it.prototype,"onMove",null),nt([Object(I["a"])("loading")],it.prototype,"onDeleteClick",null),nt([Object(I["a"])("loading")],it.prototype,"updateRefMeasurements",null),it=nt([Object(d["a"])({name:"app-analysis-reference-measurements",components:{AppTableContainer:_["a"],AppTable:O["a"],AppModalForm:E["a"],AppReferenceMeasurementValues:st,AppButton:b["a"]}})],it);var rt=it,lt=rt,ot=Object(M["a"])(lt,Ze,Ke,!1,null,null,null);ot.options.__file="src/app/analysis/edit-analysis/reference-measurement/analysis-reference-measurements.vue";var ct=ot.exports,ut=a(60),pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-step-progress"},e._l(e.realSteps,(function(t){return a("div",{key:t.id,class:"app-step-progress-step "+t.class,attrs:{id:"appStepProgressStep"+t.id}},[a("div",{class:"app-step-progress-step-counter "+(t.danger?"text-danger":"")},[e._v(" "+e._s(t.danger?"X":t.id)+" ")]),a("div",{class:"app-step-progress-step-name "+(t.danger?"text-danger":"")},[e._v(" "+e._s(t.name)+" ")]),t.active?a("b-popover",{attrs:{target:"appStepProgressStep"+t.id,triggers:"hover",placement:"top"}},[a("span",{domProps:{innerHTML:e._s(t.description)}})]):e._e()],1)})),0)},dt=[];pt._withStripped=!0;a(149),a(73),a(81),a(145);var ft=a(17),ht=a(279),vt=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},yt=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.realSteps=[],e}return Object(o["a"])(a,[{key:"created",value:function(){this.onStepsChanged()}},{key:"onStepsChanged",value:function(){var e=this,t=300;this.realSteps=[],this.steps.forEach((function(a,s){var n={id:a.id,name:a.name,description:a.description,active:a.active,danger:a.danger,class:""};e.realSteps.push(n),setTimeout((function(){return n.class=e.getStepClass(a)}),s*t)}))}},{key:"getStepClass",value:function(e){return this.isStepComplete(e)?"completed":this.isActiveStep(e)?"active":""}},{key:"isStepComplete",value:function(e){return this.activeStep&&this.activeStep.id>e.id||!1}},{key:"isActiveStep",value:function(e){return this.activeStep&&this.activeStep.id===e.id||!1}},{key:"activeStep",get:function(){return this.steps.find((function(e){return e.active}))}}]),a}(ft["default"]);vt([Object(d["b"])({required:!0})],yt.prototype,"steps",void 0),vt([Object(d["d"])("steps")],yt.prototype,"onStepsChanged",null),yt=vt([Object(d["a"])({name:"app-step-progress",components:{AppExplanation:ht["a"]}})],yt);var bt=yt,mt=bt,gt=(a(419),Object(M["a"])(mt,pt,dt,!1,null,null,null));gt.options.__file="src/app/shared/components/app-step-progress/app-step-progress.vue";var St=gt.exports,_t=a(326),Ot=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},At=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.analysis=null,e.flownAt="",e.loading=!1,e.hasReferenceMeasurements=!1,e.productPackagesSelection=[],e.selectedProductPackageIds=null,e.productPackagesSelectionDisabled=!1,e}return Object(o["a"])(a,[{key:"created",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){var t=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateAnalysis(this.$route.params.id);case 2:R["a"].on(this.analysis.id,T["a"].UPDATE_ANALYSIS,(function(){t.updateAnalysis(t.analysis.id)}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"analysisProgressSteps",get:function(){var e=2;return[{id:w["a"].UPLOADING,name:this.hasState([w["a"].UPLOAD_FAILED,w["a"].DATA_INCOMPLETE])?this.$t(this.analysis.current_state.state.name).toString():this.$t(w["b"][w["a"].UPLOADING]).toString(),description:this.hasState([w["a"].UPLOAD_FAILED,w["a"].DATA_INCOMPLETE])?this.$t(this.analysis.current_state.state.name+"_descr").toString():this.$t(w["b"][w["a"].UPLOADING]+"_descr").toString(),danger:this.hasState([w["a"].UPLOAD_FAILED,w["a"].DATA_INCOMPLETE]),active:this.hasState([w["a"].UPLOADING,w["a"].UPLOAD_FAILED,w["a"].DATA_INCOMPLETE])},{id:w["a"].DATA_COMPLETE-e,name:this.$t(w["b"][w["a"].DATA_COMPLETE]).toString(),description:this.$t(w["b"][w["a"].DATA_COMPLETE]+"_descr").toString(),active:this.hasState([w["a"].DATA_COMPLETE])},{id:w["a"].DATA_COMPLETE_VERIFIED-e,name:this.$t(w["b"][w["a"].DATA_COMPLETE_VERIFIED]).toString(),description:this.$t(w["b"][w["a"].DATA_COMPLETE_VERIFIED]+"_descr").toString(),active:this.hasState([w["a"].DATA_COMPLETE_VERIFIED])},{id:w["a"].PROCESSING-e,name:this.$t(w["b"][w["a"].PROCESSING]).toString(),description:this.$t(w["b"][w["a"].PROCESSING]+"_descr").toString(),active:this.hasState([w["a"].PROCESSING])},{id:w["a"].FINISHED-e,name:this.$t(w["b"][w["a"].FINISHED]).toString(),description:this.$t(w["b"][w["a"].FINISHED]+"_descr").toString(),active:this.hasState([w["a"].FINISHED])}]}},{key:"hasState",value:function(e){return this.analysis&&this.analysis.current_state&&e.includes(this.analysis.current_state.state.id)||!1}},{key:"updateAnalysis",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["a"].getAnalysis(t);case 2:if(this.analysis=e.sent,this.flownAt=this.analysis.flown_at,!this.isSuperAdmin){e.next=9;break}return e.next=7,v["a"].getReferenceMeasurements(this.analysis.id);case 7:e.t0=e.sent.length,this.hasReferenceMeasurements=e.t0>0;case 9:return e.next=11,v["a"].getOrderPPsMulitselectOptions(this.analysis.plant.id,this.analysis.flown_at,this.analysis.customer.id);case 11:this.productPackagesSelection=e.sent,this.selectedProductPackageIds=this.analysis.order_product_packages.map((function(e){return e.id})),this.productPackagesSelectionDisabled=!this.isSuperAdmin&&this.analysis.current_state.state.id>=w["a"].DATA_COMPLETE,this.watchAnalysisTask(),this.isSuperAdmin&&this.analysis.analysis_result&&this.analysis.analysis_result.released&&this.analysis.current_state.state.id!==w["a"].FINISHED&&k["a"].showInfo(this.analysis.id,this.$t("analysis-not-finished_descr").toString()),!this.isSuperAdmin||this.analysis.current_state.state.id!==w["a"].FINISHED||this.analysis.analysis_result&&this.analysis.analysis_result.released||k["a"].showInfo(this.analysis.id,this.$t("analysis-not-released_descr").toString());case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"watchAnalysisTask",value:function(){var e=this;this.analysis.task_id&&this.isSuperAdmin&&v["a"].waitForTask(this.analysis.task_id,(function(t,a){a?k["a"].showError(e.analysis.id,{error:h["a"].SOMETHING_WENT_WRONG,message:"<b>".concat(t.output.error,"</b><br><br>")+v["a"].getTaskOutputAsMessage(t)}):k["a"].showSuccess(e.analysis.id,v["a"].getTaskOutputAsMessage(t)),R["a"].emit(e.analysis.id,T["a"].FINISHED_ANALYSIS_TASK,t)}),(function(t){k["a"].showInfo(e.analysis.id,v["a"].getTaskOutputAsMessage(t,e.$t("wait-for-start").toString())),R["a"].emit(e.analysis.id,T["a"].RUN_ANALYSIS_TASK,t)}))}},{key:"onSubmitEditAnalysis",value:function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){var t;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["a"].updateAnalysis(this.analysis.id,{flown_at:null===(t=this.flownAt)||void 0===t?void 0:t.substring(0,10),order_product_package_ids:this.selectedProductPackageIds||void 0});case 2:this.showSuccess(this.$t("analysis-updated-successfully").toString()),R["a"].emit(this.analysis.id,T["a"].UPDATE_ANALYSIS);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["a"]);Ot([Object(I["a"])()],At.prototype,"updateAnalysis",null),Ot([Object(I["a"])("loading")],At.prototype,"onSubmitEditAnalysis",null),At=Ot([Object(d["a"])({name:"app-edit-analysis",components:{AppContent:y["a"],AppButton:b["a"],AppDownloadAnalysisFiles:L,AppEditAnalysisAdmin:Le,AppUploadAnalysisFiles:He,AppBox:G["a"],AppAnalysisReferenceMeasurements:ct,AppSuperAdminMarker:ut["a"],AppStepProgress:St,AppMultiselect:_t["a"]}})],At);var jt=At,wt=jt,kt=(a(420),Object(M["a"])(wt,s,n,!1,null,null,null));kt.options.__file="src/app/analysis/edit-analysis/edit-analysis.vue";t["default"]=kt.exports}}]);