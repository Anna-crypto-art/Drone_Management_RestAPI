(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{279:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-table"},[n("b-table",{ref:"appTable",attrs:{id:e.id,fields:e.fields,items:e.rows,hover:e.hover,busy:e.loading,emptyText:e.emptyText||e.$t("no-data"),selectable:null!==e.selectMode,"select-mode":e.selectMode,"per-page":e.perPage,"current-page":e.currentPage,"head-variant":"light","show-empty":""},on:{"row-selected":e.onRowSelected},scopedSlots:e._u([null!==e.loading?{key:"table-busy",fn:function(){return[n("div",{staticClass:"text-center"},[n("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0}:null,{key:"empty",fn:function(t){return[n("span",{staticClass:"grayed"},[e._v(e._s(t.emptyText))])]}},{key:"head()",fn:function(t){return[e._v(" "+e._s(t.label)+" "),t.field.superAdminOnly?n("app-super-admin-marker"):e._e()]}},{key:"head(selected)",fn:function(){return[n("b-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.enableAllSelection,expression:"enableAllSelection"}],on:{change:e.onSelectAllFiles}})]},proxy:!0},{key:"cell(selected)",fn:function(t){var r=t.rowSelected;return[n("b-checkbox",{directives:[{name:"show",rawName:"v-show",value:"multi"===e.selectMode,expression:"selectMode === 'multi'"}],staticClass:"b-table-selectable-checkbox",attrs:{checked:r,disabled:""}})]}},{key:"cell(actions)",fn:function(t){return[e.hoverActions?n("div",{staticClass:"hover-cell pull-right"},[e._t("hoverActions",null,null,t)],2):e._e(),e.hoverActions?n("div",{staticClass:"clear"}):e._e()]}},e._l(e.$scopedSlots,(function(t,n){return{key:n,fn:function(t){return[e._t(n,null,null,t)]}}}))],null,!0)})],1)},s=[];r._withStripped=!0;var i=n(6),a=n(11),o=n(19),l=n(20),c=n(23),u=n(22),d=n(27),p=(n(46),n(21),n(150),n(17)),f=n(60),h=n(16),m=function(e,t,n,r){var s,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":Object(d["a"])(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(t,n,a):s(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},v=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return Object(l["a"])(n,[{key:"created",value:function(){this.onColumnsChanged()}},{key:"onColumnsChanged",value:function(){var e=JSON.parse(JSON.stringify(this.columns));this.hoverActions&&e.push({key:"actions",label:""}),"multi"===this.selectMode&&e.unshift({key:"selected",label:""}),this.fields=e}},{key:"onSelectModeChanged",value:function(){this.onColumnsChanged()}},{key:"onRowSelected",value:function(e){this.$emit("rowSelected",e)}},{key:"onSelectAllFiles",value:function(e){e?this.appTable.selectAllRows():this.appTable.clearSelected()}},{key:"enableAllSelection",get:function(){return"multi"===this.selectMode&&this.selectAllColumns}},{key:"selectRow",value:function(e){this.appTable.selectRow(e)}},{key:"unselectRow",value:function(e){this.appTable.unselectRow(e)}},{key:"clearSelected",value:function(){this.appTable.clearSelected()}},{key:"selectAllRows",value:function(){this.appTable.selectAllRows()}},{key:"refresh",value:function(){var e=Object(a["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.appTable.refresh();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(p["default"]);m([Object(h["b"])({required:!0})],v.prototype,"columns",void 0),m([Object(h["b"])({default:[]})],v.prototype,"rows",void 0),m([Object(h["b"])({default:null})],v.prototype,"id",void 0),m([Object(h["b"])({default:!0})],v.prototype,"hover",void 0),m([Object(h["b"])({default:""})],v.prototype,"emptyText",void 0),m([Object(h["b"])({default:!1})],v.prototype,"loading",void 0),m([Object(h["b"])({default:!1})],v.prototype,"hoverActions",void 0),m([Object(h["b"])({default:null})],v.prototype,"perPage",void 0),m([Object(h["b"])({default:null})],v.prototype,"currentPage",void 0),m([Object(h["b"])({default:null})],v.prototype,"selectMode",void 0),m([Object(h["b"])({default:0})],v.prototype,"maxRowSelectoin",void 0),m([Object(h["b"])({default:!1})],v.prototype,"selectAllColumns",void 0),m([Object(h["c"])()],v.prototype,"appTable",void 0),m([Object(h["d"])("columns")],v.prototype,"onColumnsChanged",null),m([Object(h["d"])("selectMode")],v.prototype,"onSelectModeChanged",null),v=m([Object(h["a"])({name:"app-table",components:{AppSuperAdminMarker:f["a"]}})],v);var b=v,w=b,y=(n(300),n(32)),k=Object(y["a"])(w,r,s,!1,null,null,null);k.options.__file="src/app/shared/components/app-table/app-table.vue";t["a"]=k.exports},280:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},281:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"app-table-container "+(e.size?"app-table-container-"+e.size:"")},[e._t("default")],2)},s=[];r._withStripped=!0;var i=n(20),a=n(19),o=n(23),l=n(22),c=n(27),u=(n(46),n(21),n(17)),d=n(16),p=function(e,t,n,r){var s,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(t,n,a):s(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},f=function(e){Object(o["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n)}(u["default"]);p([Object(d["b"])({default:""})],f.prototype,"size",void 0),f=p([d["a"]],f);var h=f,m=h,v=(n(299),n(32)),b=Object(v["a"])(m,r,s,!1,null,null,null);b.options.__file="src/app/shared/components/app-table-container/app-table-container.vue";t["a"]=b.exports},283:function(e,t,n){"use strict";var r=n(24),s=n(287).trim,i=n(289);r({target:"String",proto:!0,forced:i("trim")},{trim:function(){return s(this)}})},284:function(e,t,n){"use strict";var r=n(24),s=n(74),i=n(51),a=n(29),o=n(153),l=[],c=l.sort,u=a((function(){l.sort(void 0)})),d=a((function(){l.sort(null)})),p=o("sort"),f=u||!d||!p;r({target:"Array",proto:!0,forced:f},{sort:function(e){return void 0===e?c.call(i(this)):c.call(i(this),s(e))}})},285:function(e,t,n){},286:function(e,t,n){},287:function(e,t,n){var r=n(81),s=n(280),i="["+s+"]",a=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),l=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(a,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:l(1),end:l(2),trim:l(3)}},289:function(e,t,n){var r=n(29),s=n(280),i="​᠎";e.exports=function(e){return r((function(){return!!s[e]()||i[e]()!=i||s[e].name!==e}))}},299:function(e,t,n){"use strict";n(285)},300:function(e,t,n){"use strict";n(286)},310:function(e,t,n){var r=n(24),s=n(317).values;r({target:"Object",stat:!0},{values:function(e){return s(e)}})},317:function(e,t,n){var r=n(39),s=n(98),i=n(52),a=n(117).f,o=function(e){return function(t){var n,o=i(t),l=s(o),c=l.length,u=0,d=[];while(c>u)n=l[u++],r&&!a.call(o,n)||d.push(e?[n,o[n]]:o[n]);return d}};e.exports={entries:o(!0),values:o(!1)}},341:function(e,t,n){},422:function(e,t,n){"use strict";n(341)},481:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-settings-users"},[n("div",{staticClass:"app-settings-users-table-toolbar"},[n("app-button",{directives:[{name:"b-modal",rawName:"v-b-modal.invite-modal",modifiers:{"invite-modal":!0}}],staticClass:"btn-invite",attrs:{variant:"primary"},on:{click:function(t){return e.showInviteUserModal()}}},[e._v(" "+e._s(e.$t("invite"))+" ")])],1),n("div",{staticClass:"clearfix"}),n("app-table-container",[n("app-table",{attrs:{columns:e.columns,rows:e.rows,loading:e.loading,hoverActions:!0},scopedSlots:e._u([{key:"cell(name)",fn:function(t){return[t.item.name.userName?n("span",[e._v(" "+e._s(t.item.name.userName)),n("br"),n("small",{staticClass:"grayed"},[e._v(e._s(t.item.name.email))])]):n("span",[e._v(e._s(t.item.name.email))])]}},{key:"cell(state)",fn:function(t){return[e._v(" "+e._s(e.$t(t.item.state.userState))+" "),t.item.state.date?n("span",[n("br"),n("small",{staticClass:"grayed"},[e._v(e._s(t.item.state.date))])]):e._e()]}},{key:"cell(role)",fn:function(t){return[e._v(" "+e._s(t.item.role.name)+" "),t.item.customer.id?n("span",[n("br"),n("small",{staticClass:"grayed"},[e._v(e._s(t.item.customer.name))])]):e._e()]}},{key:"cell(authMethod)",fn:function(t){return[n("app-icon",{attrs:{icon:e.getAuthMethodIcon(t.item.authMethod)}})]}},{key:"cell(plants)",fn:function(t){return e._l(t.item.plants,(function(t){return n("div",{key:t.id},[e._v(" "+e._s(t.name)+" ")])}))}},{key:"hoverActions",fn:function(t){return[n("app-button",{directives:[{name:"show",rawName:"v-show",value:"SUPER_ADMIN"!==t.item.role,expression:"row.item.role !== 'SUPER_ADMIN'"}],attrs:{variant:"secondary",size:"sm",title:e.$t("edit-user"),icon:"wrench"},on:{click:function(n){return e.onEditUserClick(t.item)}}}),n("app-button",{directives:[{name:"show",rawName:"v-show",value:"pending"==t.item.state.userState,expression:"row.item.state.userState == 'pending'"}],attrs:{variant:"secondary",size:"sm",title:e.$t("resend-invitation"),icon:"envelope"},on:{click:function(n){return e.onResendInvitationClick(t.item)}}}),n("app-button",{attrs:{variant:"secondary",size:"sm",title:e.$t("locked"===t.item.state.userState?"unlock":"lock"),icon:"locked"===t.item.state.userState?"unlock":"lock"},on:{click:function(n){return e.onUnLockClick(t.item)}}}),n("app-button",{attrs:{variant:"outline-danger",size:"sm",title:e.$t("delete-user"),icon:"trash"},on:{click:function(n){return e.onDeleteUserClick(t.item)}}})]}}])})],1),n("app-modal-form",{ref:"appInviteModal",attrs:{id:"inivite-modal",title:e.$t("invite-new-user"),subtitle:e.$t("invite-new-user_descr"),"ok-title":e.$t("invite"),modalLoading:e.inviteLoading},on:{submit:e.inviteUser}},[n("b-form-group",{attrs:{label:e.$t("email"),"label-for":"email"}},[n("b-form-input",{attrs:{id:"email",type:"email",placeholder:e.$t("email"),required:""},model:{value:e.newUser.email,callback:function(t){e.$set(e.newUser,"email",t)},expression:"newUser.email"}})],1),n("b-row",[n("b-col",[n("b-form-group",{attrs:{label:e.$t("role"),"label-for":"role"}},[n("b-form-select",{attrs:{id:"role",options:e.roles},model:{value:e.newUser.role_id,callback:function(t){e.$set(e.newUser,"role_id",t)},expression:"newUser.role_id"}})],1)],1),n("b-col",[n("b-form-group",{attrs:{label:e.$t("customer"),"label-for":"customer"}},[n("b-form-select",{attrs:{id:"customer",options:e.customers},on:{change:e.onCustomerChanged},model:{value:e.newUser.customer_id,callback:function(t){e.$set(e.newUser,"customer_id",t)},expression:"newUser.customer_id"}})],1)],1)],1),n("b-row",[n("b-col",{directives:[{name:"show",rawName:"v-show",value:e.newUser.customer_id,expression:"newUser.customer_id"}]},[n("div",[n("b",[e._v(e._s(e.$t("plants")))])]),e._l(e.inviteUserCustomerPlants,(function(t){return n("div",{key:t.plant.id},[n("b-checkbox",{model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"customerPlant.selected"}},[e._v(" "+e._s(t.plant.name)+" "),t.otherCustomers?n("small",{staticClass:"grayed"},[e._v(e._s(t.otherCustomers))]):e._e()])],1)}))],2)],1)],1),n("app-modal-form",{ref:"appEditUserModal",attrs:{id:"edit-user-modal","ok-title":e.$t("apply"),modalLoading:e.editUserLoading},on:{submit:e.updateUser},scopedSlots:e._u([{key:"modal-title",fn:function(){return[n("h4",[e._v(e._s(e.$t("update-user",{user:e.editUser&&e.editUser.email||""})))])]},proxy:!0}])},[e.editUser?n("b-row",[n("b-col",[n("b-form-group",{attrs:{label:e.$t("role"),"label-for":"role"}},[n("b-form-select",{attrs:{id:"role",options:e.roles},model:{value:e.editUser.roleId,callback:function(t){e.$set(e.editUser,"roleId",t)},expression:"editUser.roleId"}})],1)],1),n("b-col",[n("div",[n("b",[e._v(e._s(e.$t("plants")))])]),e._l(e.editUser.customerPlants,(function(t){return n("div",{key:t.plant.id},[n("b-checkbox",{model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"customerPlant.selected"}},[e._v(" "+e._s(t.plant.name)+" "),t.otherCustomers?n("small",{staticClass:"grayed"},[e._v(e._s(t.otherCustomers))]):e._e()])],1)}))],2)],1):e._e()],1)],1)},s=[];r._withStripped=!0;var i=n(6),a=n(11),o=n(19),l=n(20),c=n(23),u=n(22),d=n(27),p=(n(46),n(21),n(112),n(94),n(72),n(284),n(283),n(145),n(144),n(151),n(96),n(220),n(212),n(213),n(310),n(16)),f=n(281),h=n(147),m=n(149),v=n(71),b=n(279),w=n(47),y=n(114),k=n(26),_=n(42),g=n(146),U=function(e,t,n,r){var s,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":Object(d["a"])(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(t,n,a):s(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},O=10,j=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.columns=[],e.rows=[],e.loading=!1,e.inviteLoading=!1,e.customers=[],e.roles=[{value:k["a"].CUSTOMER_ADMIN,text:k["b"][k["a"].CUSTOMER_ADMIN]},{value:k["a"].PILOT,text:k["b"][k["a"].PILOT]},{value:k["a"].ASSISTANT,text:k["b"][k["a"].ASSISTANT]}],e.newUser=e.initialInviteUser(),e.inviteUserCustomerPlants=[],e.editUserLoading=!1,e.editUser=null,e}return Object(l["a"])(n,[{key:"created",value:function(){var e=Object(a["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.columns=[{key:"name",label:this.$t("name").toString()},{key:"state",label:this.$t("state").toString()},{key:"role",label:this.$t("role").toString()},{key:"authMethod",label:this.$t("mfa-method").toString()},{key:"plants",label:this.$t("plants").toString()}],e.next=3,this.updateUserRows();case 3:return e.prev=3,e.next=6,w["a"].getCustomers();case 6:return this.customers=e.sent.map((function(e){return{value:e.id,text:e.name}})),this.customers.unshift({value:null,text:""}),e.next=10,w["a"].getAllPlants();case 10:this.plants=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](3),this.showError(e.t0);case 16:case"end":return e.stop()}}),e,this,[[3,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateUserRows",value:function(){var e=Object(a["a"])(Object(i["a"])().mark((function e(){var t,n,r=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],this.loading=!0,e.prev=2,e.next=5,w["a"].getUsers(null===(n=this.selectedCustomer)||void 0===n?void 0:n.id);case 5:t=e.sent,this.rows=t.map((function(e){var t="",n=e.state.toLowerCase();return e.is_locked?n="locked":e.state===y["b"].REGISTERED?t=r.$t("registered-at").toString()+" "+g["a"].toDateTime(e.registered_at):e.state===y["b"].PENDING&&(t=r.$t("invited-at").toString()+" "+g["a"].toDateTime(e.invited_at)),{id:e.id,name:{userName:((e.first_name||"")+" "+(e.last_name||"")).trim(),email:e.email},state:{date:t,userState:n},customer:{name:e.customer?e.customer.name:null,id:e.customer?e.customer.id:null},role:e.role,plants:e.plants||[],authMethod:e.auth_method}})).sort((function(e,t){if(e.role.id===k["a"].SUPER_ADMIN&&t.role.id!==k["a"].SUPER_ADMIN)return-1;if(t.role.id===k["a"].SUPER_ADMIN&&e.role.id!==k["a"].SUPER_ADMIN)return 1;var n=e.name.email.toLowerCase(),r=t.name.email.toLowerCase();return n<r?-1:n>r?1:0})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),this.showError(e.t0);case 12:return e.prev=12,this.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[2,9,12,15]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"showInviteUserModal",value:function(){var e=Object(a["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.newUser=this.initialInviteUser(),this.setInviteUserCustomerPlants(),this.appInviteModal.show();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"inviteUser",value:function(){var e=Object(a["a"])(Object(i["a"])().mark((function e(){var t;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.getErrorInviteUserForm(),!t){e.next=5;break}return this.showError(t),this.inviteLoading=!1,e.abrupt("return");case 5:return this.inviteLoading=!0,e.prev=6,this.newUser.plant_ids=this.inviteUserCustomerPlants.filter((function(e){return e.selected})).map((function(e){return e.plant.id})),e.next=10,w["a"].inviteUser(this.newUser);case 10:return this.appInviteModal.hide(),this.showSuccess(this.$t("user-invited-successfully").toString()),e.next=14,this.updateUserRows();case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](6),this.showError(e.t0);case 19:return e.prev=19,this.inviteLoading=!1,e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[6,16,19,22]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"initialInviteUser",value:function(){var e;return{email:"",role_id:null,customer_id:(null===(e=this.selectedCustomer)||void 0===e?void 0:e.id)||null}}},{key:"onResendInvitationClick",value:function(){var e=Object(a["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w["a"].resendUserInvitation(t.id);case 3:this.showSuccess(this.$t("user-invitation-sent-successfully").toString()),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.showError(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onUnLockClick",value:function(){var e=Object(a["a"])(Object(i["a"])().mark((function e(t){var n,r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,n="locked"!==t.state.userState,r=this.$t("sure-un-lock-user",{lock:n?"Lock":"Unlock",user:t.name.email}).toString(),confirm(r)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,w["a"].unLockUser(t.id,n);case 7:return this.showSuccess(this.$t(n?"user-locked-successfully":"user-unlocked-successfully").toString()),e.next=10,this.updateUserRows();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),this.showError(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onDeleteUserClick",value:function(){var e=Object(a["a"])(Object(i["a"])().mark((function e(t){var n;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,e.prev=1,n=this.$t("sure-delete-user",{user:t.name.email}).toString(),confirm(n)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,w["a"].deleteUser(t.id);case 7:return this.showSuccess(this.$t("user-deleted-successfully",{user:t.name.email}).toString()),e.next=10,this.updateUserRows();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](1),this.showError(e.t0);case 15:return e.prev=15,this.loading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[1,12,15,18]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onCustomerChanged",value:function(){var e=this;if(this.newUser.customer_id){var t=this.rows.filter((function(t){return t.customer.id===e.newUser.customer_id})).length;t>=O&&this.appInviteModal.alertInfo(this.$t("user-limit-for-customer-reached").toString())}this.setInviteUserCustomerPlants()}},{key:"onEditUserClick",value:function(e){this.editUser={id:e.id,email:e.name.email,roleId:e.role.id,customerPlants:this.getEditUserCustomerPlants(e)},this.appEditUserModal.hideAlert(),this.appEditUserModal.show()}},{key:"setInviteUserCustomerPlants",value:function(){var e,t=this;null!==(e=this.newUser)&&void 0!==e&&e.customer_id?this.inviteUserCustomerPlants=this.plants.filter((function(e){return e.customers.find((function(e){return e.id===t.newUser.customer_id}))})).map((function(e){return{plant:e,selected:!1,otherCustomers:e.customers.filter((function(e){return e.id!==t.newUser.customer_id})).map((function(e){return e.name})).join(", ")}})):this.inviteUserCustomerPlants=[]}},{key:"updateUser",value:function(){var e=Object(a["a"])(Object(i["a"])().mark((function e(){var t;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.editUserLoading=!0,e.prev=1,t=this.editUser.customerPlants.filter((function(e){return e.selected})).map((function(e){return e.plant.id})),e.next=5,w["a"].assignPlantsToUser(this.editUser.id,t);case 5:return e.next=7,w["a"].changeUserRole(this.editUser.id,this.editUser.roleId);case 7:return this.appEditUserModal.hide(),this.showSuccess(this.$t("user-edited-successfully").toString()),e.next=11,this.updateUserRows();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),this.showError(e.t0);case 16:return e.prev=16,this.editUserLoading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAuthMethodIcon",value:function(e){switch(e){case y["a"].EMAIL:return"envelope";case y["a"].TOTP:return"phone-fill"}return""}},{key:"getEditUserCustomerPlants",value:function(e){return null!==e&&void 0!==e&&e.customer.id?this.plants.filter((function(t){return t.customers.find((function(t){return t.id===e.customer.id}))})).map((function(t){return{plant:t,selected:!!e.plants.find((function(e){return e.id===t.id})),otherCustomers:t.customers.filter((function(t){return t.id!==e.customer.id})).map((function(e){return e.name})).join(", ")}})):[]}},{key:"getErrorInviteUserForm",value:function(){return/^\S+@\S+$/.test(this.newUser.email.trim())?null!==this.newUser.role_id&&Object.values(k["a"]).includes(this.newUser.role_id)?this.newUser.customer_id?"":"MISSING_CUSTOMER":"INVALID_OR_MISSING_ROLE":"INVALID_OR_MISSING_EMAIL"}}]),n}(_["a"]);U([Object(p["c"])()],j.prototype,"appInviteModal",void 0),U([Object(p["c"])()],j.prototype,"appEditUserModal",void 0),j=U([Object(p["a"])({name:"app-settings-users",components:{AppTableContainer:f["a"],AppModalForm:h["a"],AppIcon:m["a"],AppButton:v["a"],AppTable:b["a"]}})],j);var S=j,x=S,C=(n(422),n(32)),I=Object(C["a"])(x,r,s,!1,null,null,null);I.options.__file="src/app/settings/users/users.vue";t["default"]=I.exports}}]);