(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{281:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e[e["NUMERIC_SIMPLE"]=0]="NUMERIC_SIMPLE",e[e["NUMERIC_EXTENDED"]=1]="NUMERIC_EXTENDED",e[e["BOOLEAN"]=2]="BOOLEAN",e[e["ARRAY"]=3]="ARRAY"}(n||(n={}))},282:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},283:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e[e["CSP_PTC_ABSORBER"]=1]="CSP_PTC_ABSORBER",e[e["CSP_PTC_SWIVEL"]=3]="CSP_PTC_SWIVEL",e[e["CSP_PTC_MIRROR"]=4]="CSP_PTC_MIRROR",e[e["CSP_PTC_SCA"]=5]="CSP_PTC_SCA",e[e["CSP_PTC_SCE"]=6]="CSP_PTC_SCE",e[e["CSP_PTC_SUBFIELD"]=7]="CSP_PTC_SUBFIELD",e[e["CSP_PTC_LOOP"]=8]="CSP_PTC_LOOP",e[e["PV_MODULE"]=9]="PV_MODULE",e[e["PV_TRACKER"]=10]="PV_TRACKER",e[e["PV_TRACKERGROUP"]=11]="PV_TRACKERGROUP"}(n||(n={}))},285:function(e,t,a){"use strict";var n=a(22),s=a(288).trim,r=a(291);n({target:"String",proto:!0,forced:r("trim")},{trim:function(){return s(this)}})},286:function(e,t,a){"use strict";var n=[{getValue:function(e){var t;return null===(t=e.fieldgeometry_component)||void 0===t?void 0:t.kks},transName:"pcs",transDescr:"pcs_expl"},{getValue:function(e){return e.comment},transName:"comment",disableForTable:!0,superAdminOnly:!0},{getValue:function(e){var t;return null===(t=e.fieldgeometry_component)||void 0===t?void 0:t.dt_id},transName:"dt-id",disableForTable:!0,superAdminOnly:!0}];t["a"]=n},288:function(e,t,a){var n=a(82),s=a(282),r="["+s+"]",i=RegExp("^"+r+r+"*"),l=RegExp(r+r+"*$"),o=function(e){return function(t){var a=String(n(t));return 1&e&&(a=a.replace(i,"")),2&e&&(a=a.replace(l,"")),a}};e.exports={start:o(1),end:o(2),trim:o(3)}},289:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"box "+(e.loading?"loading":"")},[a("app-loading",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]}),e._t("title",[e.title?a("h4",{staticClass:"box-title"},[e._v(" "+e._s(e.title)+" "),e.subtitle?a("div",{staticClass:"box-title-subtitle mar-top-half grayed",domProps:{innerHTML:e._s(e.subtitle)}}):e._e()]):e._e()]),e._t("default")],2)},s=[];n._withStripped=!0;var r=a(20),i=a(19),l=a(24),o=a(23),u=a(27),c=(a(46),a(25),a(17)),d=a(16),p=a(297),f=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},_=function(e){Object(l["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(i["a"])(this,a),t.apply(this,arguments)}return Object(r["a"])(a)}(c["default"]);f([Object(d["b"])({default:""})],_.prototype,"title",void 0),f([Object(d["b"])({default:""})],_.prototype,"subtitle",void 0),f([Object(d["b"])({default:!1})],_.prototype,"loading",void 0),_=f([Object(d["a"])({name:"app-box",components:{AppLoading:p["a"]}})],_);var y=_,m=y,h=(a(317),a(32)),g=Object(h["a"])(m,n,s,!1,null,null,null);g.options.__file="src/app/shared/components/app-box/app-box.vue";t["a"]=g.exports},291:function(e,t,a){var n=a(28),s=a(282),r="​᠎";e.exports=function(e){return n((function(){return!!s[e]()||r[e]()!=r||s[e].name!==e}))}},299:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(19),s=a(20),r=function(){function e(){Object(n["a"])(this,e)}return Object(s["a"])(e,null,[{key:"download",value:function(e,t){var a=document.createElement("a");a.href=e,a.setAttribute("download",t||e),document.body.appendChild(a),a.click(),document.body.removeChild(a)}},{key:"open",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_blank";null===(t=window.open(e,a))||void 0===t||t.focus()}}]),e}()},300:function(e,t,a){},301:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(68),s=a(19),r=a(20),i=(a(145),a(25),a(146),a(95),a(112),a(96),a(310),a(51),a(318)),l=a(331),o=a(220),u=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(s["a"])(this,e),this.analysisResultMapping=t,this.analysisResult=a,this.isSuperAdmin=n,this.compareAnalysisResult=null,this.tableView=!1}return Object(r["a"])(e,[{key:"setCompareAnalysisResult",value:function(e){this.compareAnalysisResult=e}},{key:"setTableView",value:function(e){this.tableView=e}},{key:"getEntries",value:function(){var e=this;return this.analysisResultMapping.filter((function(t){return e.hasKeyFigure(t)&&(!e.tableView||!t.disableForTable)&&(!t.superAdminOnly||e.isSuperAdmin)}))}},{key:"findEntry",value:function(e,t){var a=this;return this.getEntries().find((function(n){return a.getPropertyName(n)===e&&n.keyFigureId===t}))||null}},{key:"getDiagramEntries",value:function(){var e=this;return this.getEntries().filter((function(t){return t.enableForDiagram&&(!e.compareAnalysisResult||!!t.getDiffValue)}))}},{key:"getFields",value:function(){return this.getEntries().map((function(e){return{key:e.transName,filterType:e.filterType}}))}},{key:"getColumns",value:function(e){return this.getEntries().map((function(t){return{key:t.transName,label:e(t.transName).toString()+(t.unit?" (".concat(t.unit,")"):""),sortable:!0,labelExpl:t.transDescr}}))}},{key:"getItems",value:function(e){var t=this;return e.map((function(e){return t.getItem(e)}))}},{key:"getItemsTranslated",value:function(e,t){var a=this;return e.map((function(e){return a.getItem(e)}),t)}},{key:"getItem",value:function(e,t){var a,s={},r=Object(n["a"])(this.getEntries());try{for(r.s();!(a=r.n()).done;){var i=a.value,l=i.getValue(e);void 0!==l&&null!==l&&i.formatter&&(l=i.formatter(l)),s[i.transName]=l,this.compareAnalysisResult&&i.getDiffValue&&(s["".concat(i.transName,"__diff")]=i.getDiffValue(e))}}catch(o){r.e(o)}finally{r.f()}return s}},{key:"getColumnsMapping",value:function(){var e,t={},a=Object(n["a"])(this.getEntries());try{for(a.s();!(e=a.n()).done;){var s=e.value;t[s.transName]=this.getPropertyName(s)}}catch(r){a.e(r)}finally{a.f()}return t}},{key:"hasKeyFigure",value:function(e){return void 0===e.keyFigureId||null!==this.analysisResult&&(null===this.compareAnalysisResult&&!!this.analysisResult.key_figures.find((function(t){return t.id===e.keyFigureId}))||null!==this.compareAnalysisResult&&!!this.analysisResult.key_figures.find((function(t){return t.id===e.keyFigureId}))&&!!this.compareAnalysisResult.key_figures.find((function(t){return t.id===e.keyFigureId})))||null===this.analysisResult}},{key:"getPropertyName",value:function(e){return"pcs"===e.transName?"fieldgeometry_component.kks":e.getValue.toString().match(/({|=>)[^.]*\.([^;}]*)/)[2]}},{key:"toFeatureInfo",value:function(e,t,a){return{name:o["i18n"].t(e.transName).toString(),value:t,bold:a===e.keyFigureId,descr:e.transDescr,unit:""!==t?e.unit:void 0,superAdminOnly:e.superAdminOnly,hidden:a&&a!==e.keyFigureId&&!e.superAdminOnly||!1}}},{key:"getRefMeasureEntries",value:function(e,t){var a,s=[],r=Object(n["a"])(t);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(e.values&&i.entry_key_name in e.values){var l=this.findEntry(i.column_name,i.key_figure_id);l&&s.push({entry:l,value:e.values[i.entry_key_name]})}}}catch(o){r.e(o)}finally{r.f()}return s}}],[{key:"getMappingsByComponentId",value:function(e){for(var t=0,a=[i["a"],l["a"]];t<a.length;t++){var n=a[t],s=n.find((function(t){return t.componentId===e}));if(s)return s.resultMapping}return null}}]),e}()},317:function(e,t,a){"use strict";a(300)},318:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(283),s=a(326),r=a(327),i=a(328),l=a(329),o=a(330),u=[{componentId:n["a"].CSP_PTC_ABSORBER,resultMapping:s["a"]},{componentId:n["a"].CSP_PTC_MIRROR,resultMapping:r["a"]},{componentId:n["a"].CSP_PTC_SCA,resultMapping:i["a"]},{componentId:n["a"].CSP_PTC_SCE,resultMapping:l["a"]},{componentId:n["a"].CSP_PTC_SWIVEL,resultMapping:o["a"]}]},325:function(e,t,a){"use strict";var n,s;a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return s})),function(e){e["UNALLOCATED"]="UNALLOCATED",e["STOPPED"]="STOPPED",e["RUNNING"]="RUNNING"}(n||(n={})),function(e){e["ALLOCATE"]="ALLOCATE",e["ALLOCATE_AND_START"]="ALLOCATE_AND_START",e["START"]="START",e["RELEASE"]="RELEASE",e["SET_SERVER_SIZE_SMALL"]="SET_SERVER_SIZE_SMALL",e["SET_SERVER_SIZE_MEDIUM"]="SET_SERVER_SIZE_MEDIUM",e["SET_SERVER_SIZE_LARGE"]="SET_SERVER_SIZE_LARGE",e["STOP"]="STOP",e["STOP_AND_RELEASE"]="STOP_AND_RELEASE",e["INCREASE_EBS_SIZE_100GB"]="INCREASE_EBS_SIZE_100GB",e["INCREASE_EBS_SIZE_250GB"]="INCREASE_EBS_SIZE_250GB",e["INCREASE_EBS_SIZE_500GB"]="INCREASE_EBS_SIZE_500GB"}(s||(s={}))},326:function(e,t,a){"use strict";var n=a(59),s=(a(94),a(281)),r=a(147),i=a(114),l=a(286),o=[].concat(Object(n["a"])(l["a"]),[{getValue:function(e){return e.htf_temperature},transName:"absorber-temperature",unit:"°C"},{getValue:function(e){return e.ambient_temperature},transName:"ambient-temperature",unit:"°C"},{getValue:function(e){return e.wind_speed},transName:"wind-speed",unit:"m/s"},{getValue:function(e){return e.timestamp},transName:"time",formatter:function(e){return r["a"].toDateTime(e)}},{getValue:function(e){return e.position_in_loop},transName:"position-in-loop",filterType:s["a"].NUMERIC_EXTENDED,formatter:function(e){return"".concat(e[0]," of ").concat(e[1])}},{getValue:function(e){return e.sca_tracking_angle},transName:"sca-tracking-angle",unit:"°"},{getValue:function(e){return e.ir_intensity},transName:"ir-intensity",transDescr:"ir-intensity_expl",keyFigureId:i["a"].IR_INTENSITY_ID},{getValue:function(e){return e.ir_intensity_class},transName:"ir-intensity-class",transDescr:"ir-intensity-class_expl",keyFigureId:i["a"].IR_INTENSITY_ID},{getValue:function(e){return e.glass_tube_temperature},transName:"glass-tube-temperature",keyFigureId:i["a"].GLASS_TUBE_TEMPERATURE_ID,filterType:s["a"].NUMERIC_EXTENDED,unit:"°C",getDiffValue:function(e){return e.glass_tube_temperature__diff},enableForRefMeasure:!0},{getValue:function(e){return e.glass_tube_temperature_class},transName:"glass-tube-temperature-class",transDescr:"glass-tube-temperature-class_expl",keyFigureId:i["a"].GLASS_TUBE_TEMPERATURE_ID,filterType:s["a"].NUMERIC_EXTENDED,enableForDiagram:!0,getDiffValue:function(e){return e.glass_tube_temperature_class__diff}},{getValue:function(e){return e.missing_glass_tube},transName:"missing-gct",transDescr:"missing-gct_expl",keyFigureId:i["a"].MISSING_GLASS_TUBE_ID,filterType:s["a"].BOOLEAN,enableForDiagram:!0,getDiffValue:function(e){return e.missing_glass_tube__diff},enableForRefMeasure:!0},{getValue:function(e){return e.oxygen_penetration},transName:"oxygen-penetration",transDescr:"oxygen-penetration_expl",keyFigureId:i["a"].OXYGEN_PENETRATION_ID,filterType:s["a"].BOOLEAN,enableForDiagram:!0,getDiffValue:function(e){return e.oxygen_penetration__diff},enableForRefMeasure:!0},{getValue:function(e){return e.h2_concentration},transName:"hydrogen-penetration",transDescr:"hydrogen-penetration_expl",keyFigureId:i["a"].HIGH_HYDROGEN_CONCENTRATION_ID,filterType:s["a"].BOOLEAN,enableForDiagram:!0,getDiffValue:function(e){return e.h2_concentration__diff},enableForRefMeasure:!0},{getValue:function(e){return e.coating_degraded},transName:"coating-degration",transDescr:"coating-degration_expl",keyFigureId:i["a"].COATING_DEGRADATION_ID,filterType:s["a"].BOOLEAN,enableForRefMeasure:!0},{getValue:function(e){return e.hot_glass_tube_ends},transName:"hot-glass-tube-ends",transDescr:"hot-glass-tube-ends_expl",keyFigureId:i["a"].HOT_GLASS_TUBE_ENDS_ID,filterType:s["a"].BOOLEAN,enableForDiagram:!0,getDiffValue:function(e){return e.hot_glass_tube_ends__diff},enableForRefMeasure:!0},{getValue:function(e){return e.recommended_action_class},transName:"recommended-action",transDescr:"recommended-action_expl",keyFigureId:i["a"].HCE_RECOMMENDED_ACTION_CLASS_ID,filterType:s["a"].NUMERIC_EXTENDED,enableForDiagram:!0,getDiffValue:function(e){return e.recommended_action_class__diff}},{getValue:function(e){return e.glass_tube_temperature_class_limits},transName:"glass-tube-temperature-class-limits",keyFigureId:i["a"].GLASS_TUBE_TEMPERATURE_ID},{getValue:function(e){return e.hce_position_support_lateral_offset},transName:"hce-position-support-lateral-offset",keyFigureId:i["a"].HCE_POSITION_ID,filterType:s["a"].NUMERIC_EXTENDED,unit:"[mm]",enableForRefMeasure:!0},{getValue:function(e){return e.hce_position_support_vertical_offset},transName:"hce-position-support-vertical-offset",keyFigureId:i["a"].HCE_POSITION_ID,filterType:s["a"].NUMERIC_EXTENDED,unit:"[mm]",enableForRefMeasure:!0},{getValue:function(e){return e.hce_position_support_offset_class},transName:"hce-position-support-offset-class",transDescr:"hce-position-support-offset_expl",keyFigureId:i["a"].HCE_POSITION_ID,filterType:s["a"].NUMERIC_EXTENDED},{getValue:function(e){return e.hce_position_center_lateral_offset},transName:"hce-position-center-lateral-offset",keyFigureId:i["a"].HCE_POSITION_ID,filterType:s["a"].NUMERIC_EXTENDED,unit:"[mm]",enableForRefMeasure:!0},{getValue:function(e){return e.hce_position_center_vertical_offset},transName:"hce-position-center-vertical-offset",keyFigureId:i["a"].HCE_POSITION_ID,filterType:s["a"].NUMERIC_EXTENDED,unit:"[mm]",enableForRefMeasure:!0},{getValue:function(e){return e.hce_position_center_offset_class},transName:"hce-position-center-offset-class",transDescr:"hce-position-center-offset_expl",keyFigureId:i["a"].HCE_POSITION_ID,filterType:s["a"].NUMERIC_EXTENDED}]);t["a"]=o},327:function(e,t,a){"use strict";var n=a(59),s=(a(94),a(281)),r=a(114),i=a(286),l=[].concat(Object(n["a"])(i["a"]),[{getValue:function(e){return e.is_missing},transName:"missing-mirror",keyFigureId:r["a"].MISSING_MIRROR_ID,filterType:s["a"].BOOLEAN,enableForDiagram:!0,getDiffValue:function(e){return e.is_missing__diff},enableForRefMeasure:!0}]);t["a"]=l},328:function(e,t,a){"use strict";var n=a(59),s=(a(94),a(281)),r=a(114),i=a(286),l=[].concat(Object(n["a"])(i["a"]),[{getValue:function(e){return e.encoder_value},transName:"angle-value",transDescr:"angle-value_expl",keyFigureId:r["a"].SCA_ORIENTATION_ID,filterType:s["a"].NUMERIC_EXTENDED,unit:"°"},{getValue:function(e){return e.orientation_at_drive},transName:"orientation-at-drive",transDescr:"orientation-at-drive_expl",keyFigureId:r["a"].SCA_ORIENTATION_ID,filterType:s["a"].NUMERIC_EXTENDED,unit:"°",enableForRefMeasure:!0},{getValue:function(e){return e.uncertainty_at_drive},transName:"uncertainty",transDescr:"uncertainty_expl",keyFigureId:r["a"].SCA_ORIENTATION_ID,filterType:s["a"].NUMERIC_EXTENDED,unit:"°"},{getValue:function(e){return e.tracking_encoder_offset},transName:"tracking-offset",transDescr:"tracking-offset_expl",keyFigureId:r["a"].SCA_TRACKING_DEVIATION_ID,filterType:s["a"].NUMERIC_EXTENDED,enableForDiagram:!0,unit:"°"},{getValue:function(e){return e.average_tracking_offset},transName:"average-tracking-offset",transDescr:"average-tracking-offset_expl",keyFigureId:r["a"].SCA_TRACKING_DEVIATION_ID,filterType:s["a"].NUMERIC_EXTENDED,enableForDiagram:!0,unit:"°",getDiffValue:function(e){return e.average_tracking_offset__diff}},{getValue:function(e){return e.torsion_caused_friction_mean},transName:"torsion-caused-friction-mean",transDescr:"torsion-caused-friction-mean_expl",keyFigureId:r["a"].SCA_FRICTION_ID,filterType:s["a"].NUMERIC_EXTENDED,enableForDiagram:!0,getDiffValue:function(e){return e.torsion_caused_friction_mean__diff},unit:"°"},{getValue:function(e){return e.sdx_rms_value},transName:"sca-slope-deviation",transDescr:"sca-slope-deviation_expl",keyFigureId:r["a"].SCA_SDX_ID,filterType:s["a"].NUMERIC_EXTENDED,enableForDiagram:!0,getDiffValue:function(e){return e.sdx_rms_value__diff},unit:"[mrad]"},{getValue:function(e){return e.is_damaged_ball_joint_south},transName:"ball-joint-south-damaged",transDescr:"ball-joint-damaged_descr",keyFigureId:r["a"].SCA_BALL_JOINT_FRICTION_ID,filterType:s["a"].BOOLEAN,enableForRefMeasure:!0},{getValue:function(e){return e.is_damaged_ball_joint_north},transName:"ball-joint-north-damaged",transDescr:"ball-joint-damaged_descr",keyFigureId:r["a"].SCA_BALL_JOINT_FRICTION_ID,filterType:s["a"].BOOLEAN,enableForRefMeasure:!0}]);t["a"]=l},329:function(e,t,a){"use strict";var n=a(59),s=(a(94),a(281)),r=a(114),i=a(286),l=[].concat(Object(n["a"])(i["a"]),[{getValue:function(e){return e.absolute_orientation},transName:"actual-angle",transDescr:"actual-angle_expl",keyFigureId:r["a"].SCE_ORIENTATION_ID,filterType:s["a"].NUMERIC_EXTENDED,unit:"°",enableForRefMeasure:!0},{getValue:function(e){return e.alignment_deviation_to_drive},transName:"sce-alignment-offset",transDescr:"sce-alignment-offset_expl",keyFigureId:r["a"].SCE_ALIGNMENT_ID,filterType:s["a"].NUMERIC_EXTENDED,enableForDiagram:!0,getDiffValue:function(e){return e.alignment_deviation_to_drive__diff},unit:"°"},{getValue:function(e){return e.orientation_uncertainty},transName:"uncertainty",transDescr:"uncertainty_expl",keyFigureId:r["a"].SCE_ORIENTATION_ID,filterType:s["a"].NUMERIC_EXTENDED,unit:"°"},{getValue:function(e){return e.sdx_rms_value},transName:"sce-slope-deviation",transDescr:"sce-slope-deviation_expl",keyFigureId:r["a"].SCE_SDX_ID,filterType:s["a"].NUMERIC_EXTENDED,enableForDiagram:!0,getDiffValue:function(e){return e.sdx_rms_value__diff},unit:"[mrad]"}]);t["a"]=l},330:function(e,t,a){"use strict";var n=a(59),s=(a(94),a(281)),r=a(114),i=a(286),l=[].concat(Object(n["a"])(i["a"]),[{getValue:function(e){return e.htf_temperature_both_motions},transName:"htf-temperature-both-motions",unit:"°C",superAdminOnly:!0},{getValue:function(e){return e.htf_temperature_avg},transName:"htf-temperature-avg",unit:"°C"},{getValue:function(e){return e.gripping_potential_class},transName:"rotation-joint-gripping-potential-class",transDescr:"rotation-joint-gripping-potential-class_expl",keyFigureId:r["a"].SWIVEL_GRIPPING_POTENTIAL_CLASS_ID,filterType:s["a"].NUMERIC_EXTENDED,enableForDiagram:!0,getDiffValue:function(e){return e.gripping_potential_class__diff},enableForRefMeasure:!0},{getValue:function(e){return e.hce_displacement},transName:"hce-displacement",transDescr:"hce-displacement_expl",keyFigureId:r["a"].SWIVEL_GRIPPING_POTENTIAL_CLASS_ID,filterType:s["a"].NUMERIC_EXTENDED,unit:"mm"}]);t["a"]=l},331:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(283),s=a(332),r=a(333),i=[{componentId:n["a"].PV_MODULE,resultMapping:s["a"]},{componentId:n["a"].PV_TRACKER,resultMapping:r["a"]}]},332:function(e,t,a){"use strict";var n=a(59),s=(a(94),a(281)),r=a(147),i=a(114),l=a(286),o=[].concat(Object(n["a"])(l["a"]),[{getValue:function(e){return e.ambient_temperature},transName:"ambient-temperature",unit:"°C"},{getValue:function(e){return e.wind_speed},transName:"wind-speed",unit:"m/s",getDiffValue:function(e){return e.wind_speed__diff}},{getValue:function(e){return e.timestamp},transName:"time",formatter:function(e){return r["a"].toDateTime(e)}},{getValue:function(e){return e.tracker_tracking_angle},transName:"tracker-tracking-angle",transDescr:"tracker-tracking-angle_expl",filterType:s["a"].NUMERIC_EXTENDED,getDiffValue:function(e){return e.tracker_tracking_angle__diff}},{keyFigureId:i["a"].MODULE_SOILING_LEVEL_ID,getValue:function(e){return e.soiling_level},transName:"pv-module-soiling-level",transDescr:"pv-module-soiling-level_expl",filterType:s["a"].NUMERIC_EXTENDED,getDiffValue:function(e){return e.soiling_level__diff},enableForRefMeasure:!0},{keyFigureId:i["a"].MODULE_BROKEN_GLASS_ID,getValue:function(e){return e.broken_glass_class},transName:"pv-module-broken-glass",transDescr:"pv-module-broken-glass_expl",filterType:s["a"].NUMERIC_EXTENDED,getDiffValue:function(e){return e.broken_glass_class__diff},enableForRefMeasure:!0},{keyFigureId:i["a"].MODULE_SHORT_CIRCUIT_ID,getValue:function(e){return e.short_circuit_class},transName:"pv-module-short-circuit",transDescr:"pv-module-short-circuit_expl",filterType:s["a"].NUMERIC_EXTENDED,getDiffValue:function(e){return e.short_circuit_class__diff},enableForRefMeasure:!0},{keyFigureId:i["a"].MODULE_OPEN_CIRCUIT_ID,getValue:function(e){return e.open_circuit_class},transName:"pv-module-open-circuit",transDescr:"pv-module-open-circuit_expl",filterType:s["a"].NUMERIC_EXTENDED,getDiffValue:function(e){return e.open_circuit_class__diff},enableForRefMeasure:!0},{keyFigureId:i["a"].SUBSTRING_SHORT_CIRCUIT_ID,getValue:function(e){return e.substring_short_circuit_class},transName:"pv-module-substring-short-circuit",transDescr:"pv-module-substring-short-circuit_expl",filterType:s["a"].NUMERIC_EXTENDED,getDiffValue:function(e){return e.substring_short_circuit_class__diff},enableForRefMeasure:!0},{keyFigureId:i["a"].SUBSTRING_OPEN_CIRCUIT_ID,getValue:function(e){return e.substring_open_circuit_class},transName:"pv-module-substring-open-circuit",transDescr:"pv-module-substring-open-circuit_expl",filterType:s["a"].NUMERIC_EXTENDED,getDiffValue:function(e){return e.substring_open_circuit_class__diff}},{keyFigureId:i["a"].CELL_BROKEN_ID,getValue:function(e){return e.cell_broken_class},transName:"pv-module-cell-broken",transDescr:"pv-module-cell-broken_expl",filterType:s["a"].NUMERIC_EXTENDED,getDiffValue:function(e){return e.cell_broken_class__diff},enableForRefMeasure:!0},{keyFigureId:i["a"].CELL_TRANSFER_RESISTANCE_ID,getValue:function(e){return e.cell_transfer_resistance_class},transName:"pv-module-cell-transfer-resistance",transDescr:"pv-module-cell-transfer-resistance_expl",filterType:s["a"].NUMERIC_EXTENDED,getDiffValue:function(e){return e.cell_transfer_resistance_class__diff},enableForRefMeasure:!0}]);t["a"]=o},333:function(e,t,a){"use strict";var n=a(59),s=(a(94),a(281)),r=a(147),i=a(114),l=a(286),o=[].concat(Object(n["a"])(l["a"]),[{getValue:function(e){return e.ambient_temperature},transName:"ambient-temperature",unit:"°C"},{getValue:function(e){return e.wind_speed},transName:"wind-speed",unit:"m/s",getDiffValue:function(e){return e.wind_speed__diff}},{getValue:function(e){return e.timestamp},transName:"time",formatter:function(e){return r["a"].toDateTime(e)}},{getValue:function(e){return e.tracking_angle},transName:"tracking-angle",filterType:s["a"].NUMERIC_EXTENDED,getDiffValue:function(e){return e.tracking_angle__diff},enableForRefMeasure:!0},{keyFigureId:i["a"].TRACKING_DEVIATION_ID,getValue:function(e){return e.tracking_deviation},transName:"pv-tracker-tracking-deviation",filterType:s["a"].NUMERIC_EXTENDED,getDiffValue:function(e){return e.tracking_deviation__diff}},{keyFigureId:i["a"].TRACKER_SOILING_LEVEL_ID,getValue:function(e){return e.soiling_level},transName:"pv-tracker-soiling-level",transDescr:"pv-tracker-soiling-level_expl",filterType:s["a"].NUMERIC_EXTENDED,getDiffValue:function(e){return e.soiling_level__diff},enableForRefMeasure:!0}]);t["a"]=o},341:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e["import_analysis_results"]="import_analysis_results",e["validate_plant_metadata"]="validate_plant_metadata",e["run_qfly_wizard"]="run_qfly_wizard"}(n||(n={}))},347:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-simple-file-upload"},[a("b-form-file",{attrs:{accept:e.accept},model:{value:e.modelValue,callback:function(t){e.modelValue=t},expression:"modelValue"}}),e.uploadProgress&&e.modelValue?a("div",{staticClass:"mar-top"},[e._v(" "+e._s(e.$t("uploading"))+" "),a("b-progress",{attrs:{max:e.uploadProgress.total}},[a("b-progress-bar",{attrs:{value:e.uploadProgress.loaded,variant:"success"}},[e.uploadProgress.loaded===e.uploadProgress.total?a("span",[e._v(" "+e._s(e.$t("upload-succes-filename",{filename:e.modelValue.name}))+" ")]):e._e(),e.uploadProgress.loaded<e.uploadProgress.total?a("span",[e._v(" "+e._s(Math.round(e.uploadProgress.loaded/e.uploadProgress.total*100))+"% ")]):e._e()])],1)],1):e._e()],1)},s=[];n._withStripped=!0;var r=a(19),i=a(20),l=a(24),o=a(23),u=a(27),c=(a(46),a(25),a(17)),d=a(16),p=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},f=function(e){Object(l["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.modelValue=null,e}return Object(i["a"])(a,[{key:"created",value:function(){this.modelValue=this.value}},{key:"onModelValueChanged",value:function(){this.$emit("input",this.modelValue)}}]),a}(c["default"]);p([Object(d["b"])({required:!0})],f.prototype,"value",void 0),p([Object(d["b"])({required:!0})],f.prototype,"uploadProgress",void 0),p([Object(d["b"])({default:"*"})],f.prototype,"accept",void 0),p([Object(d["d"])("modelValue")],f.prototype,"onModelValueChanged",null),f=p([Object(d["a"])({name:"app-simple-file-upload"})],f);var _=f,y=_,m=a(32),h=Object(m["a"])(y,n,s,!1,null,null,null);h.options.__file="src/app/shared/components/app-simple-file-upload/app-simple-file-upload.vue";t["a"]=h.exports},361:function(e,t,a){},362:function(e,t,a){},363:function(e,t,a){},446:function(e,t,a){"use strict";a(361)},447:function(e,t,a){"use strict";a(362)},448:function(e,t,a){"use strict";a(363)},499:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.analysis?a("app-content",{attrs:{title:e.analysis.name||"",navback:!0,eventId:e.analysis.id},scopedSlots:e._u([{key:"subtitle",fn:function(){return[a("div",{staticClass:"mar-top"},[a("app-step-progress",{attrs:{steps:e.analysisProgressSteps}})],1)]},proxy:!0}],null,!1,2214528238)},[a("div",{staticClass:"app-edit-analysis"},[a("b-tabs",{model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[a("b-tab",{staticClass:"app-edit-analysis-download-tab",attrs:{href:"#download"},scopedSlots:e._u([{key:"title",fn:function(){return[a("b-icon",{attrs:{icon:"download"}}),a("span",{staticClass:"pad-left"},[e._v(e._s(e.$t("download")))])]},proxy:!0}],null,!1,1288288109)},[a("app-download-analysis-files",{attrs:{analysis:e.analysis}})],1),a("b-tab",{staticClass:"app-edit-analysis-upload-tab",attrs:{href:"#upload"},scopedSlots:e._u([{key:"title",fn:function(){return[a("b-icon",{attrs:{icon:"upload"}}),a("span",{staticClass:"pad-left"},[e._v(e._s(e.$t("upload")))])]},proxy:!0}],null,!1,3987617677)},[a("app-upload-analysis-files",{attrs:{analysis:e.analysis,droneOptions:e.droneOptions,selectedDrone:e.selectedDrone}})],1),a("b-tab",{staticClass:"app-edit-analysis-edit-tab",scopedSlots:e._u([{key:"title",fn:function(){return[a("b-icon",{attrs:{icon:"pencil-square"}}),a("span",{staticClass:"pad-left"},[e._v(e._s(e.$t("edit")))])]},proxy:!0}],null,!1,725662720)},[a("b-row",[a("b-col",{attrs:{sm:""}},[a("app-box",{attrs:{title:e.$t("edit-analysis")}},[a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmitEditAnalysis(t)}}},[a("b-form-group",{attrs:{label:e.$t("acquisition-date"),"label-cols-sm":"4","label-cols-lg":"2"}},[a("app-datepicker",{attrs:{required:""},model:{value:e.flownAt,callback:function(t){e.flownAt=t},expression:"flownAt"}})],1),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:!e.changeProductPackagesAndDroneAllowed,expression:"!changeProductPackagesAndDroneAllowed"}],attrs:{"label-cols-sm":"4","label-cols-lg":"2"},scopedSlots:e._u([{key:"label",fn:function(){},proxy:!0}],null,!1,522070287)},[a("b-alert",{staticClass:"edit-analysis-info",attrs:{show:!e.changeProductPackagesAndDroneAllowed&&!e.isSuperAdmin,variant:"info"}},[e._v(" "+e._s(e.$t("can-only-change-pp-drone-before-data-complete"))+" ")]),a("b-alert",{staticClass:"edit-analysis-info",attrs:{show:!e.changeProductPackagesAndDroneAllowed&&e.isSuperAdmin,variant:"info"}},[e._v(" "+e._s(e.$t("can-only-change-pp-drone-before-data-complete-super-admin"))+" ")])],1),a("b-form-group",{attrs:{"label-cols-sm":"4","label-cols-lg":"2"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" "+e._s(e.$t("product-packages"))+" "),e.isSuperAdmin&&!e.changeProductPackagesAndDroneAllowed?a("app-super-admin-marker"):e._e()]},proxy:!0}],null,!1,4203300502)},[a("app-multiselect",{attrs:{options:e.productPackagesSelection,readonly:!(e.isSuperAdmin||e.changeProductPackagesAndDroneAllowed)},model:{value:e.selectedProductPackageIds,callback:function(t){e.selectedProductPackageIds=t},expression:"selectedProductPackageIds"}})],1),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:!e.selectedDroneIsCurrentlyAvailable,expression:"!selectedDroneIsCurrentlyAvailable"}],attrs:{"label-cols-sm":"4","label-cols-lg":"2"}},[a("b-alert",{staticClass:"edit-analysis-info",attrs:{show:!e.selectedDroneIsCurrentlyAvailable&&e.isSuperAdmin,variant:"info"}},[e._v(" "+e._s(e.$t("previously-selected-drone-not-available"))+" ")])],1),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.noDroneAvailable,expression:"noDroneAvailable"}],attrs:{"label-cols-sm":"4","label-cols-lg":"2"}},[a("b-alert",{staticClass:"edit-analysis-info",attrs:{show:e.noDroneAvailable,variant:"info"}},[e._v(" "+e._s(e.$t("no-drone-available-for-customer-plant"))+" ")])],1),a("b-form-group",{attrs:{"label-cols-sm":"4","label-cols-lg":"2"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" "+e._s(e.$t("drone"))+" "),e.isSuperAdmin&&!e.changeProductPackagesAndDroneAllowed?a("app-super-admin-marker"):e._e()]},proxy:!0}],null,!1,664292587)},[a("b-form-select",{attrs:{options:e.droneOptions,disabled:!(e.isSuperAdmin||e.changeProductPackagesAndDroneAllowed)||!e.selectedDroneIsCurrentlyAvailable||e.noDroneAvailable},model:{value:e.selectedDroneId,callback:function(t){e.selectedDroneId=t},expression:"selectedDroneId"}})],1),e.isSuperAdmin?a("b-form-group",{attrs:{"label-cols-sm":"4","label-cols-lg":"2"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" "+e._s(e.$t("add-pis"))+" "),a("app-super-admin-marker")]},proxy:!0}],null,!1,4209237872)},[a("app-multiselect",{attrs:{options:e.keyFiguresSelection},model:{value:e.selectedKeyFigureIds,callback:function(t){e.selectedKeyFigureIds=t},expression:"selectedKeyFigureIds"}})],1):e._e(),a("app-button",{attrs:{type:"submit",loading:e.loading}},[e._v(e._s(e.$t("apply")))])],1)],1)],1)],1)],1),e.hasReferenceMeasurements?a("b-tab",{staticClass:"app-edit-analysis-ref-measures",scopedSlots:e._u([{key:"title",fn:function(){return[a("b-icon",{attrs:{icon:"clipboard-check"}}),a("span",{staticClass:"pad-left"},[e._v(e._s(e.$t("reference-measurements")))]),a("app-super-admin-marker")]},proxy:!0}],null,!1,1903157060)},[a("app-analysis-reference-measurements",{attrs:{analysis:e.analysis}})],1):e._e(),e.isSuperAdmin?a("b-tab",{staticClass:"app-edit-analysis-admin-tab",scopedSlots:e._u([{key:"title",fn:function(){return[a("b-icon",{attrs:{icon:"shield-shaded"}}),a("span",{staticClass:"pad-left"},[e._v(e._s(e.$t("admin-panel")))])]},proxy:!0}],null,!1,3957700052)},[a("app-edit-analysis-admin",{attrs:{analysis:e.analysis}})],1):e._e()],1)],1)]):e._e()},s=[];n._withStripped=!0;var r=a(59),i=a(6),l=a(10),o=a(19),u=a(20),c=a(24),d=a(23),p=a(27),f=(a(46),a(25),a(216),a(112),a(74),a(213),a(214),a(95),a(145),a(94),a(146),a(16)),_=a(42),y=a(56),m=a(47),h=a(97),g=a(75),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("app-button",{attrs:{disabled:e.isDownloadButtonDisabled,loading:e.downloadButtonLoading},on:{click:e.onDownloadSelectedFilesClick}},[e._v(" "+e._s(e.$t("download-selected-files"))+" ")]),e.isSuperAdmin?a("app-button",{attrs:{cls:"mar-left",variant:"secondary",disabled:e.isDownloadButtonDisabled,superAdminProtected:!0},on:{click:e.onMoveSelectedFilesClick}},[e._v(" "+e._s(e.$t("move-selected-files"))+" ")]):e._e(),e.isSuperAdmin?a("app-button",{attrs:{cls:"mar-left",variant:"outline-danger",disabled:e.isDownloadButtonDisabled,loading:e.deleteSelectedFilesLoading,superAdminProtected:!0},on:{click:e.onDeleteSelectedFilesClick}},[e._v(" "+e._s(e.$t("delete-selected-files"))+" ")]):e._e(),a("app-table-container",[a("app-table",{attrs:{rows:e.downloadFilesTableItems,columns:e.downloadFilesTableColumns,loading:e.isFilesLoading,selectMode:"range",selectAllColumns:!0,emptyText:e.$t("no-files-uploaded")},on:{rowSelected:e.onDownloadFilesSelected},scopedSlots:e._u([{key:"cell(uploadedAt)",fn:function(t){return[e._v(" "+e._s(e.getReadableDate(t.item.uploadedAt))+" ")]}}])})],1),a("app-modal-form",{ref:"moveSelectedFilesModal",attrs:{id:"moveSelectedFilesModal",modalLoading:e.moveSelectedFilesLoading,okTitle:e.$t("move"),title:e.$t("move-selected-files"),superAdminProtected:!0},on:{submit:e.onMoveSelectedFiles}},[a("b-form-group",{attrs:{label:e.$t("select-analysis")}},[a("b-form-select",{attrs:{options:e.moveAnalysisSelection,required:""},model:{value:e.targetAnalysisId,callback:function(t){e.targetAnalysisId=t},expression:"targetAnalysisId"}})],1)],1)],1)},v=[];b._withStripped=!0;var O=a(68),A=(a(116),a(215),a(150),a(285),a(287)),E=a(284),S=a(299),I=a(323),D=a(294),k=a(120),R=a(147),j=a(148),w=a(295),N=a(296),T=a(278),C=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},x=function(e){Object(c["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.isDownloadButtonDisabled=!0,e.downloadButtonLoading=!1,e.downloadFilesTableColumns=[{key:"name",label:e.$t("name").toString()},{key:"size",label:e.$t("size").toString()},{key:"uploadedAt",label:e.$t("uploaded-at").toString()}],e.downloadFilesTableItems=[],e.selectedDonwloadFiles=[],e.isFilesLoading=!1,e.moveSelectedFilesLoading=!1,e.targetAnalysisId=null,e.moveAnalysisSelection=[],e.deleteSelectedFilesLoading=!1,e}return Object(u["a"])(a,[{key:"created",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loadFiles();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onAnalysisChanged",value:function(){this.loadFiles()}},{key:"onDownloadFilesSelected",value:function(e){this.selectedDonwloadFiles=e,this.isDownloadButtonDisabled=0===this.selectedDonwloadFiles.length}},{key:"onDownloadSelectedFilesClick",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){var t,a,n,s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!==this.selectedDonwloadFiles.length){e.next=7;break}return e.next=3,m["a"].getAnalysisFileDownloadUrl(this.analysis.id,this.selectedDonwloadFiles[0].name);case 3:t=e.sent,S["a"].download(t.url,this.selectedDonwloadFiles[0].name),e.next=13;break;case 7:return a="analysis-".concat(this.analysis.name,"-selected-files.zip"),n=this.downloadFilesTableItems.length===this.selectedDonwloadFiles.length?"all":this.selectedDonwloadFiles.map((function(e){return e.name})),e.next=11,m["a"].generateDownloadUrl(m["a"].downloadMultipleAnalysisFilesUrl(this.analysis.id,n));case 11:s=e.sent,S["a"].download(s,a);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getReadableDate",value:function(e){return e&&R["a"].toDateTime(e)||""}},{key:"onMoveSelectedFilesClick",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){var t=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getAllAnalysis({plant_id:this.analysis.plant.id});case 2:this.moveAnalysisSelection=e.sent.filter((function(e){return e.id!==t.analysis.id})).map((function(e){return{value:e.id,text:e.name}})),this.moveSelectedFilesModal.show();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onMoveSelectedFiles",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].moveAnalysisFiles(this.analysis.id,this.targetAnalysisId,this.selectedDonwloadFiles.map((function(e){return e.name})));case 2:this.moveSelectedFilesModal.hide(),this.showSuccess(this.$t("selected-files-moved-success").toString()),w["a"].emit(this.analysis.id,N["a"].UPDATE_ANALYSIS);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onDeleteSelectedFilesClick",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(confirm(this.$t("delete-selected-files-sure").toString())){e.next=2;break}return e.abrupt("return");case 2:return this.deleteSelectedFilesLoading=!0,e.next=5,m["a"].deleteAnalysisFiles(this.analysis.id,this.selectedDonwloadFiles.map((function(e){return e.name})));case 5:this.showSuccess(this.$t("selected-files-deleted-success").toString()),w["a"].emit(this.analysis.id,N["a"].UPDATE_ANALYSIS);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadFiles",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){var t,a,n,s,r,l,o,u,c,d,p,f,_,y,h;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],this.downloadFilesTableItems=[],this.analysis.files){e.next=4;break}return e.abrupt("return");case 4:for(a=0,n=Object.keys(this.analysis.files);a<n.length;a++)s=n[a],t=t.concat(this.analysis.files[s]);return this.downloadFilesTableItems=[],e.next=8,m["a"].getAnalysisFiles(this.analysis.id,t);case 8:for(r=e.sent,l=0,o=Object.keys(r);l<o.length;l++)u=o[l],c=r[u],c?this.downloadFilesTableItems.push({name:u,size:Object(I["a"])(c.size),uploadedAt:Date.parse(c.uploaded_at)}):this.downloadFilesTableItems.push({name:u,size:null,uploadedAt:null});if(this.downloadFilesTableItems.sort((function(e,t){var a=e.uploadedAt||1,n=t.uploadedAt||1;return a<n?1:a>n?-1:0})),this.analysis.current_state.state.id!==D["a"].UPLOADING){e.next=21;break}return e.next=14,m["a"].getUploadingUsers(this.analysis.id);case 14:if(d=e.sent,!(d.length>0)){e.next=21;break}return e.next=18,m["a"].getMe();case 18:if(p=e.sent,d=d.filter((function(e){return e.email!=p.email})),d.length>0){f=[],_=Object(O["a"])(d);try{for(_.s();!(y=_.n()).done;)h=y.value,f.push(this.$t("user-is-uploading",{user:((h.first_name||"")+" "+(h.last_name||"")).trim()||h.email}).toString())}catch(i){_.e(i)}finally{_.f()}f.push(this.$t("files-of-files-uploaded",{current_files:Object.keys(r).filter((function(e){return!!r[e]})).length,max_files:Object.keys(r).length}).toString()),k["a"].showInfo(this.analysis.id,f.join("<br>"))}case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(_["a"]);C([Object(f["b"])({required:!0})],x.prototype,"analysis",void 0),C([Object(f["c"])()],x.prototype,"moveSelectedFilesModal",void 0),C([Object(f["d"])("analysis")],x.prototype,"onAnalysisChanged",null),C([Object(T["a"])("downloadButtonLoading")],x.prototype,"onDownloadSelectedFilesClick",null),C([Object(T["a"])()],x.prototype,"onMoveSelectedFilesClick",null),C([Object(T["a"])("moveSelectedFilesLoading")],x.prototype,"onMoveSelectedFiles",null),C([Object(T["a"])("deleteSelectedFilesLoading")],x.prototype,"onDeleteSelectedFilesClick",null),C([Object(T["a"])("isFilesLoading")],x.prototype,"loadFiles",null),x=C([Object(f["a"])({name:"app-download-analysis-files",components:{AppTableContainer:A["a"],AppButton:g["a"],AppModalForm:j["a"],AppTable:E["a"]}})],x);var F=x,M=F,P=a(32),L=Object(P["a"])(M,b,v,!1,null,null,null);L.options.__file="src/app/analysis/edit-analysis/download-analysis-files.vue";var V=L.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",[a("b-col",{attrs:{cols:"12",lg:"6"}},[a("app-update-analysis-state",{attrs:{analysis:e.analysis}})],1),a("b-col",{attrs:{cols:"12",lg:"6"}},[a("app-import-analysis-result",{attrs:{analysis:e.analysis}})],1),a("b-col",{attrs:{cols:"12",lg:"6"}},[a("app-analysis-notes-and-history",{attrs:{analysis:e.analysis}})],1),a("b-col",{attrs:{cols:"12",lg:"6"}},[a("app-analysis-file-actions",{attrs:{analysis:e.analysis}}),a("app-delete-analysis",{attrs:{analysis:e.analysis}})],1)],1)],1)},$=[];U._withStripped=!0;var B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-box",{scopedSlots:e._u([{key:"title",fn:function(){return[a("h4",{staticStyle:{"margin-bottom":"1em"}},[e._v(" "+e._s(e.$t("update-analysis-state"))+" ")])]},proxy:!0}])},[e.analysis.plant.in_setup_phase?e._e():a("b-alert",{attrs:{variant:"warning",show:""}},[a("span",{domProps:{innerHTML:e._s(e.$t("attention-state-update-starts-evaulation_expl"))}})]),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmitUpdateState(t)}}},[a("b-form-group",[a("b-form-checkbox",{model:{value:e.sendNotification,callback:function(t){e.sendNotification=t},expression:"sendNotification"}},[e._v(" "+e._s(e.$t("send-notification"))+" ")])],1),a("b-form-group",{attrs:{label:e.$t("select-new-analysis-state")}},[a("b-form-select",{attrs:{required:"",options:e.updateStateOptions},model:{value:e.selectedUpdateState,callback:function(t){e.selectedUpdateState=t},expression:"selectedUpdateState"}})],1),a("b-form-group",{attrs:{label:e.$t("message")}},[a("b-form-textarea",{attrs:{placeholder:e.$t("message"),row:"5"},model:{value:e.selectedUpdateStateMessage,callback:function(t){e.selectedUpdateStateMessage=t},expression:"selectedUpdateStateMessage"}})],1),a("app-button",{attrs:{type:"submit",loading:e.loading}},[e._v(e._s(e.$t("update")))])],1)],1)},G=[];B._withStripped=!0;var X=a(289),H=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},K=function(e){Object(c["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.selectedUpdateState=null,e.updateStateOptions=null,e.selectedUpdateStateMessage="",e.sendNotification=!1,e.analysisStates=null,e}return Object(u["a"])(a,[{key:"created",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateAnalysisStates();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onUpdateAnalysis",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateAnalysisStates();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateAnalysisStates",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,null!==this.analysisStates){e.next=5;break}return e.next=4,m["a"].getStates();case 4:this.analysisStates=e.sent;case 5:this.setUpdateStateOptions(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.showError(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onSubmitUpdateState",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.loading=!0,this.selectedUpdateState){e.next=4;break}throw{error:"NO_STATE_SELECTED",message:"Please, selecte a state"};case 4:return e.next=6,m["a"].updateAnalysisState(this.analysis.id,{state_id:this.selectedUpdateState,message:this.selectedUpdateStateMessage,do_send_mail:this.sendNotification,force:!0});case 6:w["a"].emit(this.analysis.id,N["a"].UPDATE_ANALYSIS),this.showSuccess(this.$t("update-analysis-state-success").toString()),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.showError(e.t0);case 13:return e.prev=13,this.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[0,10,13,16]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"setUpdateStateOptions",value:function(){var e=this;if(this.analysis.current_state){var t=this.analysisStates[this.analysis.current_state.state.id];0!==t.length?this.updateStateOptions=t.map((function(t){return{value:t,text:e.$t(D["b"][t]).toString()}})):this.updateStateOptions=[]}else this.updateStateOptions=[]}}]),a}(_["a"]);H([Object(f["b"])({required:!0})],K.prototype,"analysis",void 0),H([Object(f["d"])("analysis")],K.prototype,"onUpdateAnalysis",null),K=H([Object(f["a"])({name:"app-update-analysis-state",components:{AppButton:g["a"],AppBox:X["a"]}})],K);var Y=K,q=Y,Z=Object(P["a"])(q,B,G,!1,null,null,null);Z.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/update-analysis-state.vue";var z=Z.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-box",{attrs:{title:e.$t("manage-result-files")}},[a("b-alert",{attrs:{variant:"info"},model:{value:e.showAlertInfo,callback:function(t){e.showAlertInfo=t},expression:"showAlertInfo"}},[e._v(" "+e._s(e.$t("import-task-running-on-qfly-server"))+" ")]),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.saveManageResultFiles(t)}}},[a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.analysis.analysis_result,expression:"analysis.analysis_result"}],attrs:{label:e.$t("download-existing-result-files")}},e._l(e.importedResultFiles,(function(t){return a("a",{key:t.id,attrs:{href:"#"},on:{click:function(a){return e.onResultFileClick(t)}}},[e._v(" "+e._s(t.filename)+" ")])})),0),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.analysis.analysis_result,expression:"analysis.analysis_result"}]},[a("b-alert",{attrs:{show:e.isAnalysisResultReleased,variant:"info"}},[e._v(" "+e._s(e.$t("remove-result-files-not-allowed_descr"))+" ")]),a("b-form-checkbox",{attrs:{id:"removeAllAnalysisResultFiles",disabled:e.isAnalysisResultReleased},model:{value:e.removeAllAnalysisResultFiles,callback:function(t){e.removeAllAnalysisResultFiles=t},expression:"removeAllAnalysisResultFiles"}},[e._v(" "+e._s(e.$t("remove-result-files"))+" ")])],1),a("b-form-group",{attrs:{label:e.$t("select-json-result-file-import")}},[a("b-form-file",{attrs:{accept:".json"},model:{value:e.jsonFile,callback:function(t){e.jsonFile=t},expression:"jsonFile"}})],1),a("b-form-group",{attrs:{label:e.$t("select-result-image-files-zip")}},[a("app-simple-file-upload",{attrs:{uploadProgress:e.uploadProgress,accept:".zip"},model:{value:e.imageFilesZip,callback:function(t){e.imageFilesZip=t},expression:"imageFilesZip"}})],1),a("b-alert",{attrs:{show:!e.importResultsAllowed,variant:"info"}},[e._v(" "+e._s(e.$t("import-result-files-not-allowed_descr"))+" ")]),a("app-button",{attrs:{type:"submit",loading:e.loading,disabled:!e.importResultsAllowed}},[e._v(e._s(e.$t("apply")))])],1)],1)},J=[];W._withStripped=!0;var Q=a(341),ee=a(325),te=a(347),ae=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},ne=function(e){Object(c["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.importedResultFiles=[],e.removeAllAnalysisResultFiles=!1,e.jsonFile=null,e.imageFilesZip=null,e.uploadProgress=null,e.showAlertInfo=!1,e}return Object(u["a"])(a,[{key:"created",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){var t=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.setManageImportFiles();case 2:w["a"].on(this.analysis.id,N["a"].RUN_ANALYSIS_TASK,(function(e){e.name===Q["a"].import_analysis_results&&(t.loading=!0)})),w["a"].on(this.analysis.id,N["a"].FINISHED_ANALYSIS_TASK,(function(e){e.name===Q["a"].import_analysis_results&&(t.loading=!1,"SUCCESSFUL"===e.state&&t.successfullyFinished())})),w["a"].on(this.analysis.id,N["a"].QFLY_SERVER_STATE_CHANGED,(function(e){t.showAlertInfo=e===ee["b"].RUNNING}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onUpdateAnalysis",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.setManageImportFiles();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onResultFileClick",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(t){var a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m["a"].getAnalysisResultFileUrl(t.id);case 3:a=e.sent,S["a"].download(a.url,t.filename),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.showError(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"importResultsAllowed",get:function(){return this.analysis.current_state.state.id>=D["a"].DATA_COMPLETE_VERIFIED}},{key:"isAnalysisResultReleased",get:function(){var e;return(null===(e=this.analysis.analysis_result)||void 0===e?void 0:e.released)||!1}},{key:"setManageImportFiles",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.analysis.analysis_result){e.next=4;break}return e.next=3,m["a"].getAnalysisResultFiles(this.analysis.analysis_result.id);case 3:this.importedResultFiles=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveManageResultFiles",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){var t,a=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.loading=!0,!this.analysis.analysis_result||!this.removeAllAnalysisResultFiles){e.next=5;break}return e.next=5,m["a"].deleteAnalysisResult(this.analysis.analysis_result.id);case 5:if(!this.jsonFile){e.next=15;break}return k["a"].showInfo(this.analysis.id,"Uploading result file..."),e.next=9,m["a"].importAnalysisResult(this.jsonFile,this.analysis.id,null===(t=this.imageFilesZip)||void 0===t?void 0:t.name);case 9:if(w["a"].emit(this.analysis.id,N["a"].UPDATE_ANALYSIS),!this.imageFilesZip){e.next=13;break}return e.next=13,m["a"].uploadImportAnalysisResultImageFiles(this.analysis.id,this.imageFilesZip,(function(e){a.uploadProgress={total:e.total,loaded:e.loaded}}));case 13:e.next=16;break;case 15:this.successfullyFinished();case 16:e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](0),this.showError(e.t0),this.loading=!1;case 22:return e.prev=22,this.uploadProgress=null,e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[0,18,22,25]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"successfullyFinished",value:function(){this.showSuccess(this.$t("success-managing-result-files").toString()),this.loading=!1,w["a"].emit(this.analysis.id,N["a"].UPDATE_ANALYSIS)}}]),a}(_["a"]);ae([Object(f["b"])({required:!0})],ne.prototype,"analysis",void 0),ae([Object(f["d"])("analysis")],ne.prototype,"onUpdateAnalysis",null),ne=ae([Object(f["a"])({name:"app-import-analysis-result",components:{AppButton:g["a"],AppBox:X["a"],AppSimpleFileUpload:te["a"]}})],ne);var se=ne,re=se,ie=Object(P["a"])(re,W,J,!1,null,null,null);ie.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/import-analysis-result.vue";var le=ie.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-box",{attrs:{title:e.$t("danger-zone")}},[a("app-button",{attrs:{type:"button",variant:"danger",loading:e.finishTaskLoading,disabled:!e.analysis.task_id},on:{click:e.onFinishTaskClick}},[e._v(" "+e._s(e.$t("finish-running-task"))+" ")]),a("hr"),a("app-button",{attrs:{type:"button",variant:"danger",loading:e.loading},on:{click:e.onDeleteAnalysisClick}},[e._v(" "+e._s(e.$t("delete"))+" ")])],1)},ue=[];oe._withStripped=!0;var ce=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},de=function(e){Object(c["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.finishTaskLoading=!1,e}return Object(u["a"])(a,[{key:"onDeleteAnalysisClick",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!confirm("Delete analysis and all according files? This cannot be undone.")){e.next=6;break}return this.loading=!0,e.next=5,m["a"].deleteAnalysis(this.analysis.id);case 5:this.$router.push({name:"Analyses"});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.showError(e.t0);case 11:return e.prev=11,this.loading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,8,11,14]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onFinishTaskClick",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.finishTaskLoading=!0,e.prev=1,e.next=4,m["a"].finishRunningTask(this.analysis.id);case 4:w["a"].emit(this.analysis.id,N["a"].UPDATE_ANALYSIS),this.showSuccess(this.$t("successfully-finished-running-task").toString()),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),this.showError(e.t0);case 11:return e.prev=11,this.finishTaskLoading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[1,8,11,14]])})));function t(){return e.apply(this,arguments)}return t}()}]),a}(_["a"]);ce([Object(f["b"])({required:!0})],de.prototype,"analysis",void 0),de=ce([Object(f["a"])({name:"app-delete-analysis",components:{AppButton:g["a"],AppBox:X["a"]}})],de);var pe=de,fe=pe,_e=Object(P["a"])(fe,oe,ue,!1,null,null,null);_e.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/delete-analysis.vue";var ye=_e.exports,me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-box",{attrs:{title:e.$t("analysis-file-actions")}},[a("app-button",{attrs:{type:"button",loading:e.plantCoverageLoading},on:{click:e.onPlantCoverageClick}},[e._v(" "+e._s(e.$t("check-drone-plant-coverage"))+" ")])],1)},he=[];me._withStripped=!0;var ge=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},be=function(e){Object(c["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.plantCoverageLoading=!1,e}return Object(u["a"])(a,[{key:"onPlantCoverageClick",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){var t,a,n;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.plantCoverageLoading=!0,null===(t=this.analysis)||void 0===t||!t.id){e.next=7;break}return e.next=4,m["a"].getDronePlantCoverage(null===(a=this.analysis)||void 0===a?void 0:a.id);case 4:n=e.sent,console.log(n),this.showSuccess(this.$t("successfully-checked-drone-coverage").toString());case 7:this.plantCoverageLoading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(_["a"]);ge([Object(f["b"])({required:!0})],be.prototype,"analysis",void 0),ge([Object(T["a"])("plantCoverageLoading")],be.prototype,"onPlantCoverageClick",null),be=ge([Object(f["a"])({name:"app-analysis-file-actions",components:{AppButton:g["a"],AppBox:X["a"]}})],be);var ve=be,Oe=ve,Ae=Object(P["a"])(Oe,me,he,!1,null,null,null);Ae.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/analysis-file-actions.vue";var Ee=Ae.exports,Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-box",{staticClass:"app-analysis-notes-and-history",attrs:{title:e.$t("notes-and-history")}},[a("div",{staticClass:"notes-container font-xs mar-bottom",domProps:{innerHTML:e._s(e.notesAndHistory)}}),a("b-form-group",{attrs:{label:e.$t("note")}},[a("b-textarea",{model:{value:e.note,callback:function(t){e.note=t},expression:"note"}})],1),a("app-button",{attrs:{type:"button",loading:e.loading,disabled:e.isAppendNoteButtonDisabled},on:{click:e.onAppendNoteClick}},[e._v(" "+e._s(e.$t("append-note"))+" ")])],1)},Ie=[];Se._withStripped=!0;a(96),a(221),a(310);var De=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},ke=function(e){Object(c["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.notesAndHistory="",e.note=null,e.loading=!1,e}return Object(u["a"])(a,[{key:"created",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){var t=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return w["a"].on(this.analysis.id,N["a"].UPDATE_ANALYSIS,Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.updateNotesAndHistory();case 2:case"end":return e.stop()}}),e)})))),e.next=3,this.updateNotesAndHistory();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isAppendNoteButtonDisabled",get:function(){return null===this.note||""===this.note.trim()}},{key:"onAppendNoteClick",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.note){e.next=2;break}throw{error:"EMPTY_NOTE",message:"Please type a note"};case 2:if(confirm(this.$t("add-analysis-note-are-you-sure").toString())){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,m["a"].appendAnalysisNote(this.analysis.id,this.note);case 6:return e.next=8,this.updateNotesAndHistory();case 8:this.note=null;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateNotesAndHistory",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){var t,a,n,s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getAnalysisNotesAndHistory(this.analysis.id);case 2:t=e.sent.notes_and_history,t=t.replace(/(\\n|\n)/g,"<br>"),a=Object(O["a"])(t.match(/([0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2} \| NOTE \|[^<]*)/g)||[]);try{for(a.s();!(n=a.n()).done;)s=n.value,t=t.replace(s,"<b>".concat(s,"</b>"))}catch(r){a.e(r)}finally{a.f()}this.notesAndHistory=t;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(_["a"]);De([Object(f["b"])({required:!0})],ke.prototype,"analysis",void 0),De([Object(T["a"])()],ke.prototype,"created",null),De([Object(T["a"])("loading")],ke.prototype,"onAppendNoteClick",null),ke=De([Object(f["a"])({name:"app-analysis-notes-and-history",components:{AppButton:g["a"],AppBox:X["a"]}})],ke);var Re=ke,je=Re,we=(a(446),Object(P["a"])(je,Se,Ie,!1,null,null,null));we.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/analysis-notes-and-history.vue";var Ne=we.exports,Te=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},Ce=function(e){Object(c["a"])(a,e);var t=Object(d["a"])(a);function a(){return Object(o["a"])(this,a),t.apply(this,arguments)}return Object(u["a"])(a)}(_["a"]);Te([Object(f["b"])({required:!0})],Ce.prototype,"analysis",void 0),Ce=Te([Object(f["a"])({name:"app-edit-analysis-result-admin",components:{AppUpdateAnalysisState:z,AppImportAnalysisResult:le,AppDeleteAnalysis:ye,AppAnalysisFileActions:Ee,AppAnalysisNotesAndHistory:Ne}})],Ce);var xe=Ce,Fe=xe,Me=Object(P["a"])(Fe,U,$,!1,null,null,null);Me.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/edit-analysis-admin.vue";var Pe=Me.exports,Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-alert",{attrs:{show:!e.uploadAllowed,variant:"info"}},[e._v(" "+e._s(e.$t("upload-not-allowed_descr"))+" ")]),e.uploadAllowed?a("app-analysis-uploader",{attrs:{analysis:e.analysis,droneOptions:e.droneOptions,selectedDrone:e.selectedDrone}}):e._e()],1)},Ve=[];Le._withStripped=!0;var Ue=a(398),$e=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},Be=function(e){Object(c["a"])(a,e);var t=Object(d["a"])(a);function a(){return Object(o["a"])(this,a),t.apply(this,arguments)}return Object(u["a"])(a,[{key:"uploadAllowed",get:function(){return this.analysis&&this.analysis.current_state.state.id<D["a"].DATA_COMPLETE_VERIFIED||!1}}]),a}(_["a"]);$e([Object(f["b"])({required:!0})],Be.prototype,"analysis",void 0),$e([Object(f["b"])({default:null})],Be.prototype,"selectedDrone",void 0),$e([Object(f["b"])({default:[]})],Be.prototype,"droneOptions",void 0),Be=$e([Object(f["a"])({name:"app-upload-analysis-files",components:{AppAnalysisUploader:Ue["a"]}})],Be);var Ge=Be,Xe=Ge,He=Object(P["a"])(Xe,Le,Ve,!1,null,null,null);He.options.__file="src/app/analysis/edit-analysis/upload-analysis-files.vue";var Ke=He.exports,Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("app-table-container",[a("app-table",{attrs:{rows:e.refMeasureItems,columns:e.refMeasureColumns,selectMode:"single",loading:e.loading,hoverActions:!0},on:{rowSelected:e.onRefMeasureSelected},scopedSlots:e._u([{key:"hoverActions",fn:function(t){return[a("app-button",{directives:[{name:"show",rawName:"v-show",value:e.isSuperAdmin,expression:"isSuperAdmin"}],attrs:{icon:"arrow-right-circle-fill",variant:"secondary",size:"sm",title:e.$t("move-to-another-analysis")},on:{click:function(a){return e.onMoveClick(t.item)}}}),a("app-button",{directives:[{name:"show",rawName:"v-show",value:e.isSuperAdmin,expression:"isSuperAdmin"}],attrs:{variant:"outline-danger",size:"sm",icon:"trash",title:e.$t("delete")},on:{click:function(a){return e.onDeleteClick(t.item)}}})]}}])})],1),a("app-reference-measurement-values",{attrs:{analysis:e.analysis,refMeasureId:e.selectedRefMeasureId}}),a("app-modal-form",{ref:"moveModal",attrs:{id:"move-modal",title:e.$t("move-to-another-analysis"),"ok-title":e.$t("move"),modalLoading:e.moveModalLoading},on:{submit:e.onMove}},[a("b-form-group",{attrs:{label:e.$t("select-analysis")}},[a("b-form-select",{attrs:{options:e.moveToAnalyses,required:""},model:{value:e.moveTargetAnalysisId,callback:function(t){e.moveTargetAnalysisId=t},expression:"moveTargetAnalysisId"}})],1)],1)],1)},qe=[];Ye._withStripped=!0;var Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.refMeasureId,expression:"refMeasureId"}]},[a("app-table-container",[a("app-table",{attrs:{rows:e.refMeasureValueItems,columns:e.refMeasureValueColumns,loading:e.loading,hoverActions:!0},scopedSlots:e._u([{key:"cell(values)",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(t.item.values)}})]}},{key:"hoverActions",fn:function(t){return[a("app-button",{directives:[{name:"show",rawName:"v-show",value:e.isSuperAdmin,expression:"isSuperAdmin"}],attrs:{variant:"secondary",size:"sm",title:t.item.ignored?e.$t("ignore-value-undo"):e.$t("ignore-value"),icon:t.item.ignored?"plus-circle":"dash-circle"},on:{click:function(a){return e.onIgnoreClick(t.item)}}})]}}])})],1)],1)},ze=[];Ze._withStripped=!0;a(51);var We=a(301),Je=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},Qe=function(e){Object(c["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.refMeasureValueItems=[],e.refMeasureValueColumns=[{key:"pcs",label:e.$t("pcs").toString()},{key:"notes",label:e.$t("notes").toString()},{key:"values",label:e.$t("values").toString()},{key:"ignored",label:e.$t("ignored").toString()}],e}return Object(u["a"])(a,[{key:"created",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateRefMeasurementValues();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onRefMeasureChanged",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateRefMeasurementValues();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onIgnoreClick",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].ignoreReferenceMeasurementEntry(t.id,!t.ignored);case 2:t.ignored=!t.ignored,this.showSuccess(this.$t("reference-measurement-value-change-success").toString());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateRefMeasurementValues",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){var t,a,n,s,r,l,o,u,c=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.refMeasureId){e.next=3;break}return this.refMeasureValueItems=[],e.abrupt("return");case 3:return e.next=5,m["a"].getReferenceMeasurementEntries(this.analysis.id,{reference_measurement_id:this.refMeasureId});case 5:return t=e.sent,e.next=8,m["a"].getAllKeyFigures();case 8:a=e.sent,n=[],s=Object(O["a"])(t.entries);try{for(s.s();!(r=s.n()).done;)l=r.value,o=this.getRefMeasureEntryValues(a,l,t.key_figures),u=o.map((function(e){return"".concat(c.$t(e.entry.transName).toString(),": ").concat(e.value)})).join("<br>"),n.push({id:l.entry_id,pcs:l.pcs,notes:l.notes,ignored:l.ignore,values:u})}catch(i){s.e(i)}finally{s.f()}this.refMeasureValueItems=n.sort((function(e,t){var a=e.pcs.toLowerCase(),n=t.pcs.toLowerCase();return a<n?-1:a>n?1:0}));case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getRefMeasureEntryValues",value:function(e,t,a){var n=[];if(t.values){var s,i=[],l=Object(O["a"])(a);try{var o=function(){var l=s.value;if(l.entry_key_name in t.values){var o=e.find((function(e){return e.id===l.key_figure_id})).component_id;if(!i.includes(o)){i.push(o);var u=We["a"].getMappingsByComponentId(o),c=new We["a"](u);n.push.apply(n,Object(r["a"])(c.getRefMeasureEntries(t,a)))}}};for(l.s();!(s=l.n()).done;)o()}catch(u){l.e(u)}finally{l.f()}}return n}}]),a}(_["a"]);Je([Object(f["b"])({required:!0})],Qe.prototype,"analysis",void 0),Je([Object(f["b"])({default:null})],Qe.prototype,"refMeasureId",void 0),Je([Object(f["d"])("refMeasureId")],Qe.prototype,"onRefMeasureChanged",null),Je([Object(T["a"])()],Qe.prototype,"onIgnoreClick",null),Je([Object(T["a"])("loading")],Qe.prototype,"updateRefMeasurementValues",null),Qe=Je([Object(f["a"])({name:"app-reference-measurement-values",components:{AppTableContainer:A["a"],AppTable:E["a"],AppButton:g["a"]}})],Qe);var et=Qe,tt=et,at=Object(P["a"])(tt,Ze,ze,!1,null,null,null);at.options.__file="src/app/analysis/edit-analysis/reference-measurement/reference-measurement-values.vue";var nt=at.exports,st=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},rt=function(e){Object(c["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.refMeasureItems=[],e.refMeasureColumns=[{key:"measureDate",label:e.$t("measure-date").toString()},{key:"measureNotes",label:e.$t("notes").toString()},{key:"user_created",label:e.$t("acquired-by").toString()}],e.selectedRefMeasureId=null,e.moveRefMeasureId=null,e.moveTargetAnalysisId=null,e.moveToAnalyses=[],e.moveModalLoading=!1,e}return Object(u["a"])(a,[{key:"created",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.updateRefMeasurements();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onMoveClick",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(t){var a=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.moveRefMeasureId=t.id,e.next=3,m["a"].getAllAnalysis({plant_id:this.analysis.plant.id});case 3:this.moveToAnalyses=e.sent.filter((function(e){return e.id!==a.analysis.id})).map((function(e){return{value:e.id,text:e.name}})),this.moveTargetAnalysisId=null,this.moveModal.show();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onMove",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.moveTargetAnalysisId){e.next=2;break}throw{error:"MISSING_TARGET_ANALYSIS",message:"Please select an analysis"};case 2:return e.next=4,m["a"].moveReferenceMeasurement(this.moveRefMeasureId,this.moveTargetAnalysisId);case 4:return this.showSuccess(this.$t("reference-measurement-moved-success").toString()),e.next=7,this.updateRefMeasurements();case 7:w["a"].emit(this.analysis.id,N["a"].UPDATE_ANALYSIS),this.moveModal.hide();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onDeleteClick",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(confirm(this.$t("reference-measurement-delete-are-you-sure").toString())){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,m["a"].deleteReferenceMeasurement(t.id);case 4:return this.showSuccess(this.$t("reference-measurement-delete-success").toString()),e.next=7,this.updateRefMeasurements();case 7:w["a"].emit(this.analysis.id,N["a"].UPDATE_ANALYSIS);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onRefMeasureSelected",value:function(e){e.length>0?this.selectedRefMeasureId=e[0].id:this.selectedRefMeasureId=null}},{key:"updateRefMeasurements",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getReferenceMeasurements(this.analysis.id);case 2:this.refMeasureItems=e.sent.map((function(e){return{id:e.id,measureDate:R["a"].toDateTime(e.measure_time_from)+" - "+R["a"].toDateTime(e.measure_time_to),measureNotes:e.notes,user_created:e.user_created?(e.user_created.first_name+" "+e.user_created.last_name).trim()||e.user_created.email:""}}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(_["a"]);st([Object(f["b"])({required:!0})],rt.prototype,"analysis",void 0),st([Object(f["c"])()],rt.prototype,"moveModal",void 0),st([Object(T["a"])("loading")],rt.prototype,"onMoveClick",null),st([Object(T["a"])("moveModalLoading")],rt.prototype,"onMove",null),st([Object(T["a"])("loading")],rt.prototype,"onDeleteClick",null),st([Object(T["a"])("loading")],rt.prototype,"updateRefMeasurements",null),rt=st([Object(f["a"])({name:"app-analysis-reference-measurements",components:{AppTableContainer:A["a"],AppTable:E["a"],AppModalForm:j["a"],AppReferenceMeasurementValues:nt,AppButton:g["a"]}})],rt);var it=rt,lt=it,ot=Object(P["a"])(lt,Ye,qe,!1,null,null,null);ot.options.__file="src/app/analysis/edit-analysis/reference-measurement/analysis-reference-measurements.vue";var ut=ot.exports,ct=a(62),dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-step-progress"},e._l(e.realSteps,(function(t){return a("div",{key:t.id,class:"app-step-progress-step "+t.class,attrs:{id:"appStepProgressStep"+t.id}},[a("div",{class:"app-step-progress-step-counter "+(t.danger?"text-danger":"")},[e._v(" "+e._s(t.danger?"X":t.id)+" ")]),a("div",{class:"app-step-progress-step-name "+(t.danger?"text-danger":"")},[e._v(" "+e._s(t.name)+" ")]),t.active?a("b-popover",{attrs:{target:"appStepProgressStep"+t.id,triggers:"hover",placement:"top"}},[a("span",{domProps:{innerHTML:e._s(t.description)}})]):e._e()],1)})),0)},pt=[];dt._withStripped=!0;a(149),a(76),a(83);var ft=a(17),_t=a(290),yt=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},mt=function(e){Object(c["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.realSteps=[],e}return Object(u["a"])(a,[{key:"created",value:function(){this.onStepsChanged()}},{key:"onStepsChanged",value:function(){var e=this,t=300;this.realSteps=[],this.steps.forEach((function(a,n){var s={id:a.id,name:a.name,description:a.description,active:a.active,danger:a.danger,class:""};e.realSteps.push(s),setTimeout((function(){return s.class=e.getStepClass(a)}),n*t)}))}},{key:"getStepClass",value:function(e){return this.isStepComplete(e)?"completed":this.isActiveStep(e)?"active":""}},{key:"isStepComplete",value:function(e){return this.activeStep&&this.activeStep.id>e.id||!1}},{key:"isActiveStep",value:function(e){return this.activeStep&&this.activeStep.id===e.id||!1}},{key:"activeStep",get:function(){return this.steps.find((function(e){return e.active}))}}]),a}(ft["default"]);yt([Object(f["b"])({required:!0})],mt.prototype,"steps",void 0),yt([Object(f["d"])("steps")],mt.prototype,"onStepsChanged",null),mt=yt([Object(f["a"])({name:"app-step-progress",components:{AppExplanation:_t["a"]}})],mt);var ht=mt,gt=ht,bt=(a(447),Object(P["a"])(gt,dt,pt,!1,null,null,null));bt.options.__file="src/app/shared/components/app-step-progress/app-step-progress.vue";var vt=bt.exports,Ot=a(312),At=a(322),Et=function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},St=function(e){Object(c["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.analysis=null,e.flownAt="",e.loading=!1,e.hasReferenceMeasurements=!1,e.productPackagesSelection=[],e.selectedProductPackageIds=null,e.keyFiguresSelection=[],e.selectedKeyFigureIds=null,e.selectedDrone=null,e.selectedDroneId=null,e.droneOptionsRaw=[],e.droneOptions=null,e.tabIndex=0,e.tabs=["#download","#upload"],e}return Object(u["a"])(a,[{key:"mounted",value:function(){var e=this;this.tabIndex=this.tabs.findIndex((function(t){return t===e.$route.meta.hash}))}},{key:"created",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){var t=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateAnalysis(this.$route.params.id);case 2:w["a"].on(this.analysis.id,N["a"].UPDATE_ANALYSIS,(function(){t.updateAnalysis(t.analysis.id)}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"analysisProgressSteps",get:function(){var e=2;return[{id:D["a"].UPLOADING,name:this.hasState([D["a"].UPLOAD_FAILED,D["a"].DATA_INCOMPLETE])?this.$t(this.analysis.current_state.state.name).toString():this.$t(D["b"][D["a"].UPLOADING]).toString(),description:this.hasState([D["a"].UPLOAD_FAILED,D["a"].DATA_INCOMPLETE])?this.$t(this.analysis.current_state.state.name+"_descr").toString():this.$t(D["b"][D["a"].UPLOADING]+"_descr").toString(),danger:this.hasState([D["a"].UPLOAD_FAILED,D["a"].DATA_INCOMPLETE]),active:this.hasState([D["a"].UPLOADING,D["a"].UPLOAD_FAILED,D["a"].DATA_INCOMPLETE])},{id:D["a"].DATA_COMPLETE-e,name:this.$t(D["b"][D["a"].DATA_COMPLETE]).toString(),description:this.$t(D["b"][D["a"].DATA_COMPLETE]+"_descr").toString(),active:this.hasState([D["a"].DATA_COMPLETE])},{id:D["a"].DATA_COMPLETE_VERIFIED-e,name:this.$t(D["b"][D["a"].DATA_COMPLETE_VERIFIED]).toString(),description:this.$t(D["b"][D["a"].DATA_COMPLETE_VERIFIED]+"_descr").toString(),active:this.hasState([D["a"].DATA_COMPLETE_VERIFIED])},{id:D["a"].PROCESSING-e,name:this.$t(D["b"][D["a"].PROCESSING]).toString(),description:this.$t(D["b"][D["a"].PROCESSING]+"_descr").toString(),active:this.hasState([D["a"].PROCESSING])},{id:D["a"].FINISHED-e,name:this.$t(D["b"][D["a"].FINISHED]).toString(),description:this.$t(D["b"][D["a"].FINISHED]+"_descr").toString(),active:this.hasState([D["a"].FINISHED])}]}},{key:"hasState",value:function(e){return this.analysis&&this.analysis.current_state&&e.includes(this.analysis.current_state.state.id)||!1}},{key:"updateAnalysis",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(t){var a,n,s,l,o=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getAnalysis(t);case 2:if(this.analysis=e.sent,this.flownAt=this.analysis.flown_at,!this.isSuperAdmin){e.next=9;break}return e.next=7,m["a"].getReferenceMeasurements(this.analysis.id);case 7:e.t0=e.sent.length,this.hasReferenceMeasurements=e.t0>0;case 9:return e.next=11,m["a"].getOrderPPsMulitselectOptions(this.analysis.plant.id,this.analysis.flown_at,this.analysis.customer.id);case 11:if(this.productPackagesSelection=e.sent,this.selectedProductPackageIds=this.analysis.order_product_packages.map((function(e){return e.id})),!this.isSuperAdmin){e.next=18;break}return e.next=16,m["a"].getAllKeyFigures();case 16:this.keyFiguresSelection=e.sent.filter((function(e){return e.component.technology_id===o.analysis.plant.technology_id})).map((function(e){return{id:e.id.toString(),label:e.name}})),this.selectedKeyFigureIds=(null===(s=this.analysis.analysis_key_figures)||void 0===s?void 0:s.map((function(e){return e.key_figure_id.toString()})))||null;case 18:return this.watchAnalysisTask(),this.isSuperAdmin&&this.analysis.analysis_result&&this.analysis.analysis_result.released&&this.analysis.current_state.state.id!==D["a"].FINISHED&&k["a"].showInfo(this.analysis.id,this.$t("analysis-not-finished_descr").toString()),!this.isSuperAdmin||this.analysis.current_state.state.id!==D["a"].FINISHED||this.analysis.analysis_result&&this.analysis.analysis_result.released||k["a"].showInfo(this.analysis.id,this.$t("analysis-not-released_descr").toString()),e.next=23,m["a"].getDroneOfAnalysis(this.analysis.id);case 23:return this.selectedDrone=e.sent,null!==(a=this.selectedDrone)&&void 0!==a&&a.id&&(this.selectedDroneId=null===(l=this.selectedDrone)||void 0===l?void 0:l.id),e.next=27,m["a"].getAvailableDronesForAnalysis(this.analysis.id);case 27:this.droneOptionsRaw=e.sent.map((function(e){return{value:e.id,text:e.custom_name+" ("+e.drone_model.name_abbrev+")"}})),!this.selectedDroneIsCurrentlyAvailable&&null!==(n=this.selectedDrone)&&void 0!==n&&n.id?this.droneOptions=[].concat(Object(r["a"])(this.droneOptionsRaw),[{value:this.selectedDrone.id,text:this.selectedDrone.custom_name+" ("+this.selectedDrone.drone_model.name_abbrev+")"}]):this.droneOptions=this.droneOptionsRaw;case 29:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"watchAnalysisTask",value:function(){var e=this;this.analysis.task_id&&this.isSuperAdmin&&m["a"].waitForTask(this.analysis.task_id,(function(t,a){a?k["a"].showError(e.analysis.id,{error:y["a"].SOMETHING_WENT_WRONG,message:"<b>".concat(t.output.error,"</b><br><br>")+m["a"].getTaskOutputAsMessage(t)}):k["a"].showSuccess(e.analysis.id,m["a"].getTaskOutputAsMessage(t)),w["a"].emit(e.analysis.id,N["a"].FINISHED_ANALYSIS_TASK,t)}),(function(t){k["a"].showInfo(e.analysis.id,m["a"].getTaskOutputAsMessage(t,e.$t("wait-for-start").toString())),w["a"].emit(e.analysis.id,N["a"].RUN_ANALYSIS_TASK,t)}))}},{key:"onSubmitEditAnalysis",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){var t,a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].updateAnalysis(this.analysis.id,{flown_at:null===(t=this.flownAt)||void 0===t?void 0:t.substring(0,10),order_product_package_ids:this.selectedProductPackageIds||void 0,key_figure_ids:(null===(a=this.selectedKeyFigureIds)||void 0===a?void 0:a.map((function(e){return parseInt(e)})))||void 0,drone_id:this.selectedDroneId||void 0});case 2:this.showSuccess(this.$t("analysis-updated-successfully").toString()),w["a"].emit(this.analysis.id,N["a"].UPDATE_ANALYSIS);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"changeProductPackagesAndDroneAllowed",get:function(){return this.analysis.current_state.state.id<D["a"].DATA_COMPLETE}},{key:"selectedDroneIsCurrentlyAvailable",get:function(){var e,t=this;return null==(null===(e=this.selectedDrone)||void 0===e?void 0:e.id)||this.droneOptionsRaw.find((function(e){var a;return e.value==(null===(a=t.selectedDrone)||void 0===a?void 0:a.id)}))}},{key:"noDroneAvailable",get:function(){return!(!this.droneOptions||0!=this.droneOptions.length)}}]),a}(_["a"]);Et([Object(T["a"])()],St.prototype,"updateAnalysis",null),Et([Object(T["a"])("loading")],St.prototype,"onSubmitEditAnalysis",null),St=Et([Object(f["a"])({name:"app-edit-analysis",components:{AppContent:h["a"],AppButton:g["a"],AppDownloadAnalysisFiles:V,AppEditAnalysisAdmin:Pe,AppUploadAnalysisFiles:Ke,AppBox:X["a"],AppAnalysisReferenceMeasurements:ut,AppSuperAdminMarker:ct["a"],AppStepProgress:vt,AppMultiselect:Ot["a"],AppDatepicker:At["a"]}})],St);var It=St,Dt=It,kt=(a(448),Object(P["a"])(Dt,n,s,!1,null,null,null));kt.options.__file="src/app/analysis/edit-analysis/edit-analysis.vue";t["default"]=kt.exports}}]);