(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{304:function(e,t,r){},322:function(e,t,r){"use strict";r(304)},331:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-table-filter"},[e._t("default")],2)},o=[];n._withStripped=!0;var a=r(19),i=r(18),s=r(23),l=r(22),c=r(27),u=(r(44),r(24),r(17)),d=r(15),m=function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},p=function(e){Object(s["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(i["a"])(this,r),t.apply(this,arguments)}return Object(a["a"])(r)}(u["default"]);p=m([d["a"]],p);var b=p,h=b,_=(r(322),r(28)),f=Object(_["a"])(h,n,o,!1,null,null,null);f.options.__file="src/app/shared/components/app-table-filter/app-table-filter.vue";t["a"]=f.exports},380:function(e,t,r){},381:function(e,t,r){},494:function(e,t,r){"use strict";r(380)},495:function(e,t,r){"use strict";r(381)},562:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-settings-drones"},[r("app-settings-drone-models"),r("div",{staticClass:"app-settings-drones-table-toolbar"},[r("app-button",{attrs:{variant:"primary"},on:{click:e.onCreateDroneClick}},[e._v(" "+e._s(e.$t("create-drone"))+" ")]),r("app-table-filter",[r("b-checkbox",{attrs:{switch:""},on:{change:e.updateDroneRows},model:{value:e.showRetired,callback:function(t){e.showRetired=t},expression:"showRetired"}},[e._v(" "+e._s(e.$t("show-retired"))+" ")])],1),r("app-table-filter",{directives:[{name:"show",rawName:"v-show",value:e.availableCustomers,expression:"availableCustomers"}]},[r("label",{attrs:{for:"customer-filter"}},[e._v(e._s(e.$t("customer")))]),r("b-form-select",{attrs:{id:"customer-filter",options:e.availableCustomers},on:{change:e.updateDroneRows},model:{value:e.selectedCustomerId,callback:function(t){e.selectedCustomerId=t},expression:"selectedCustomerId"}})],1),r("div",{staticClass:"clear"})],1),r("app-table-container",[r("app-table",{attrs:{columns:e.droneColumns,rows:e.droneRows,loading:e.loading,hoverActions:!0},scopedSlots:e._u([{key:"cell(customer_plants)",fn:function(t){return[r("span",{class:t.item.retired?"grayed":"",domProps:{innerHTML:e._s(t.item.customer_plants.map((function(e){return e.customer_name+" "+e.plant_name})).join("<br>"))}})]}},{key:"cell(drone_model)",fn:function(t){return[r("span",{class:t.item.retired?"grayed":""},[e._v(" "+e._s(t.item.drone_model.name_abbrev)+" ")])]}},{key:"cell(custom_name)",fn:function(t){return[r("span",{class:t.item.retired?"grayed":""},[e._v(" "+e._s(t.item.custom_name)+" ")])]}},{key:"cell(serial_number)",fn:function(t){return[r("span",{class:t.item.retired?"grayed":""},[e._v(" "+e._s(t.item.serial_number)+" ")])]}},{key:"cell(number_available_batteries)",fn:function(t){return[r("span",{class:t.item.retired?"grayed":""},[e._v(" "+e._s(t.item.number_available_batteries)+" ")])]}},{key:"hoverActions",fn:function(t){return[r("app-button",{attrs:{variant:"secondary",size:"sm",title:e.$t("edit-something",{something:t.item.custom_name}),icon:"wrench"},on:{click:function(r){return e.onEditDroneClick(t.item)}}}),r("app-button",{attrs:{variant:"outline-danger",size:"sm",title:e.$t("delete-something",{something:t.item.custom_name}),icon:"trash"},on:{click:function(r){return e.onDeleteDroneClick(t.item)}}})]}}])})],1),r("app-modal-form",{ref:"appDroneModal",attrs:{id:"drone-modal",title:e.droneModalTitle,"ok-title":e.droneModalOkTitle,"cancel-title":e.$t("cancel"),modalLoading:e.droneModalLoading},on:{submit:e.onSubmitDrone}},[e.currentDrone?r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:e.$t("customer-plants")}},[r("b-alert",{attrs:{show:!e.appendNewCustomerPlantAllowed,variant:"info"}},[e._v(" "+e._s(e.$t("fill-in-empty-customer-plants-first"))+" ")]),e._l(e.selectedCustomerPlants,(function(t){return r("b-row",{key:t.id,staticClass:"mar-bottom"},[r("b-col",{attrs:{cols:"5"}},[r("b-form-select",{attrs:{id:"drone-customer-selection",options:e.availableCustomers},on:{change:function(r){return e.onCustomerSelectionChanged(t)}},model:{value:t.customer_id,callback:function(r){e.$set(t,"customer_id",r)},expression:"customerPlant.customer_id"}})],1),r("b-col",{attrs:{cols:"5"}},[r("b-form-select",{directives:[{name:"show",rawName:"v-show",value:void 0!=t.customer_id,expression:"customerPlant.customer_id != undefined"}],attrs:{id:"drone-plant-selection",options:t.available_plant_ids},model:{value:t.plant_id,callback:function(r){e.$set(t,"plant_id",r)},expression:"customerPlant.plant_id"}})],1),r("b-col",{attrs:{cols:"2"}},[r("app-button",{attrs:{variant:"outline-danger",size:"sm",icon:"x"},on:{click:function(r){return e.deleteCustomerPlantEntry(t)}}})],1)],1)})),r("app-button",{attrs:{variant:"secondary",size:"sm",icon:"plus"},on:{click:function(t){return e.appendEmptyCustomerPlant()}}})],2),r("b-form-group",{attrs:{label:e.$t("drone-model")}},[r("b-form-select",{attrs:{id:"drone-model-selection",options:e.availableDroneModels,required:""},model:{value:e.currentDrone.drone_model.id,callback:function(t){e.$set(e.currentDrone.drone_model,"id",t)},expression:"currentDrone.drone_model.id"}})],1),r("b-form-group",{attrs:{label:e.$t("name")}},[r("b-form-input",{attrs:{id:"new-drone-name",required:"",type:"text",placeholder:e.$t("name")},model:{value:e.currentDrone.custom_name,callback:function(t){e.$set(e.currentDrone,"custom_name",t)},expression:"currentDrone.custom_name"}})],1),r("b-form-group",{attrs:{label:e.$t("serial-number")}},[r("b-form-input",{attrs:{id:"new-drone-serial-number",required:"",type:"text",placeholder:e.$t("serial-number")},model:{value:e.currentDrone.serial_number,callback:function(t){e.$set(e.currentDrone,"serial_number",t)},expression:"currentDrone.serial_number"}})],1),r("b-form-group",{attrs:{label:e.$t("internal-identifier")}},[r("b-form-input",{attrs:{id:"new-drone-internal-identifier",required:"",type:"text",placeholder:e.$t("internal-identifier")},model:{value:e.currentDrone.internal_identifier,callback:function(t){e.$set(e.currentDrone,"internal_identifier",t)},expression:"currentDrone.internal_identifier"}})],1),r("b-form-group",{attrs:{label:e.$t("notes")}},[r("b-form-textarea",{attrs:{id:"new-drone-notes",rows:"4"},model:{value:e.currentDrone.notes,callback:function(t){e.$set(e.currentDrone,"notes",t)},expression:"currentDrone.notes"}})],1),r("b-form-group",{attrs:{label:e.$t("number-available-batteries")}},[r("b-form-input",{attrs:{id:"new-drone-number-available-batteries",required:"",type:"number",placeholder:e.$t("number-available-batteries"),min:"1",max:"99"},model:{value:e.currentDrone.number_available_batteries,callback:function(t){e.$set(e.currentDrone,"number_available_batteries",t)},expression:"currentDrone.number_available_batteries"}})],1),r("b-form-checkbox",{attrs:{id:"new-drone-retired"},model:{value:e.currentDrone.retired,callback:function(t){e.$set(e.currentDrone,"retired",t)},expression:"currentDrone.retired"}},[e._v(" "+e._s(e.$t("retired"))+" ")])],1)],1):e._e()],1)],1)},o=[];n._withStripped=!0;var a=r(58),i=r(6),s=r(49),l=r(9),c=r(18),u=r(19),d=r(23),m=r(22),p=r(27),b=(r(44),r(24),r(83),r(76),r(96),r(75),r(150),r(222),r(15)),h=r(288),_=r(285),f=r(62),v=r(308),g=r(153),D=r(42),w=r(45),y=r(97),k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-settings-drone-models"},[r("div",{staticClass:"app-settings-drone-models-table-toolbar"},[r("app-button",{attrs:{variant:"primary"},on:{click:e.onCreateDroneModelClick}},[e._v(" "+e._s(e.$t("create-drone-model"))+" ")])],1),r("app-table-container",[r("app-table",{attrs:{columns:e.droneModelColumns,rows:e.droneModelRows,loading:e.loading,hoverActions:!0},scopedSlots:e._u([{key:"cell(vendor)",fn:function(t){return[r("span",{class:t.item.supported?"":"grayed"},[e._v(" "+e._s(t.item.vendor)+" ")])]}},{key:"cell(name)",fn:function(t){return[r("span",{staticClass:"drone-model-table-name",class:t.item.supported?"":"grayed"},[e._v(" "+e._s(t.item.name_abbrev)+" ("),r("span",{staticClass:"grayed"},[e._v(e._s(t.item.name))]),e._v(") ")])]}},{key:"cell(flight_time)",fn:function(t){return[r("span",{class:t.item.supported?"":"grayed"},[e._v(" "+e._s(e.$t("number-with-minutes",{number:t.item.flight_time}))+" ")])]}},{key:"cell(recharge_time)",fn:function(t){return[r("span",{class:t.item.supported?"":"grayed"},[e._v(" "+e._s(e.$t("number-with-minutes",{number:t.item.recharge_time}))+" ")])]}},{key:"cell(battery_swap_time)",fn:function(t){return[r("span",{class:t.item.supported?"":"grayed"},[e._v(" "+e._s(e.$t("number-with-minutes",{number:t.item.battery_swap_time}))+" ")])]}},{key:"hoverActions",fn:function(t){return[r("app-button",{attrs:{variant:"secondary",size:"sm",title:e.$t("edit-something",{something:t.item.name}),icon:"wrench"},on:{click:function(r){return e.onEditDroneModelClick(t.item)}}}),r("app-button",{attrs:{variant:"outline-danger",size:"sm",title:e.$t("delete-something",{something:t.item.name}),icon:"trash"},on:{click:function(r){return e.onDeleteDroneModelClick(t.item)}}})]}}])})],1),r("app-modal-form",{ref:"appDroneModelModal",attrs:{id:"drone-model-modal",title:e.droneModelModalTitle,"ok-title":e.droneModelModalOkTitle,"cancel-title":e.$t("cancel"),modalLoading:e.droneModelModalLoading},on:{submit:e.onSubmitDroneModel}},[e.currentDroneModel?r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:e.$t("vendor")}},[r("b-form-input",{attrs:{id:"new-drone-model-vendor",required:"",type:"text",placeholder:e.$t("vendor")},model:{value:e.currentDroneModel.vendor,callback:function(t){e.$set(e.currentDroneModel,"vendor",t)},expression:"currentDroneModel.vendor"}})],1),r("b-form-group",{attrs:{label:e.$t("model-name")}},[r("b-form-input",{attrs:{id:"new-drone-model-name",required:"",type:"text",placeholder:e.$t("model-name")},model:{value:e.currentDroneModel.name,callback:function(t){e.$set(e.currentDroneModel,"name",t)},expression:"currentDroneModel.name"}})],1),r("b-form-group",{attrs:{label:e.$t("name-abbrev")}},[r("b-form-input",{attrs:{id:"new-drone-model-name-abbrev",required:"",type:"text",placeholder:e.$t("name-abbrev")},model:{value:e.currentDroneModel.name_abbrev,callback:function(t){e.$set(e.currentDroneModel,"name_abbrev",t)},expression:"currentDroneModel.name_abbrev"}})],1),r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:e.$t("flight-time")}},[r("b-form-input",{attrs:{id:"new-drone-model-flight-time",required:"",type:"number",placeholder:e.$t("flight-time")},model:{value:e.currentDroneModel.flight_time,callback:function(t){e.$set(e.currentDroneModel,"flight_time",t)},expression:"currentDroneModel.flight_time"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:e.$t("recharge-time")}},[r("b-form-input",{attrs:{id:"new-drone-model-recharge-time",required:"",type:"number",placeholder:e.$t("recharge-time")},model:{value:e.currentDroneModel.recharge_time,callback:function(t){e.$set(e.currentDroneModel,"recharge_time",t)},expression:"currentDroneModel.recharge_time"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:e.$t("battery-swap-time")}},[r("b-form-input",{attrs:{id:"new-drone-model-battery-swap-time",required:"",type:"number",placeholder:e.$t("battery-swap-time")},model:{value:e.currentDroneModel.battery_swap_time,callback:function(t){e.$set(e.currentDroneModel,"battery_swap_time",t)},expression:"currentDroneModel.battery_swap_time"}})],1)],1)],1),r("b-form-checkbox",{attrs:{id:"new-drone-model-supported"},model:{value:e.currentDroneModel.supported,callback:function(t){e.$set(e.currentDroneModel,"supported",t)},expression:"currentDroneModel.supported"}},[e._v(" "+e._s(e.$t("supported"))+" ")])],1)],1):e._e()],1)],1)},M=[];k._withStripped=!0;var C=function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},O=function(e){Object(d["a"])(r,e);var t=Object(m["a"])(r);function r(){var e;return Object(c["a"])(this,r),e=t.apply(this,arguments),e.droneModelColumns=[],e.droneModelRows=[],e.loading=!1,e.droneModelModalLoading=!1,e.droneModelModalTitle="",e.droneModelModalOkTitle="",e.currentDroneModel={id:"",name:"",name_abbrev:"",vendor:"",flight_time:0,recharge_time:0,battery_swap_time:0,supported:!1},e}return Object(u["a"])(r,[{key:"created",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.droneModelColumns=[{key:"vendor",label:this.$t("vendor").toString()},{key:"name",label:this.$t("name").toString()},{key:"flight_time",label:this.$t("flight-time").toString()},{key:"recharge_time",label:this.$t("recharge-time").toString()},{key:"battery_swap_time",label:this.$t("battery-swap-time").toString()}],e.next=3,this.updateDroneModelRows();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateDroneModelRows",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,D["a"].getDroneModels();case 2:this.droneModelRows=e.sent.map((function(e){return{id:e.id,name:e.name,name_abbrev:e.name_abbrev,vendor:e.vendor,flight_time:e.flight_time,recharge_time:e.recharge_time,battery_swap_time:e.battery_swap_time,supported:e.supported}})).sort((function(e,t){var r=e.vendor,n=t.vendor,o=e.name,a=t.name;return r<n?-1:r>n?1:o<a?-1:o>a?1:0}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onCreateDroneModelClick",value:function(){this.currentDroneModel={id:"",name:"",name_abbrev:"",vendor:"",flight_time:0,recharge_time:0,battery_swap_time:0,supported:!1},this.droneModelModalTitle=this.$t("create-drone-model").toString(),this.droneModelModalOkTitle=this.$t("create").toString(),this.appDroneModelModal.show()}},{key:"onSubmitDroneModel",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.currentDroneModel.id){e.next=6;break}return e.next=3,D["a"].createDroneModel({name:this.currentDroneModel.name,name_abbrev:this.currentDroneModel.name_abbrev,vendor:this.currentDroneModel.vendor,flight_time:this.currentDroneModel.flight_time,recharge_time:this.currentDroneModel.recharge_time,battery_swap_time:this.currentDroneModel.battery_swap_time,supported:this.currentDroneModel.supported});case 3:this.showSuccess(this.$t("something-created-success",{something:this.currentDroneModel.name}).toString()),e.next=9;break;case 6:return e.next=8,D["a"].updateDroneModel(this.currentDroneModel.id,{name:this.currentDroneModel.name,name_abbrev:this.currentDroneModel.name_abbrev,vendor:this.currentDroneModel.vendor,flight_time:this.currentDroneModel.flight_time,recharge_time:this.currentDroneModel.recharge_time,battery_swap_time:this.currentDroneModel.battery_swap_time,supported:this.currentDroneModel.supported});case 8:this.showSuccess(this.$t("something-edited-successfully",{something:this.currentDroneModel.name}).toString());case 9:return this.appDroneModelModal.hide(),e.next=12,this.updateDroneModelRows();case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onEditDroneModelClick",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.currentDroneModel={id:t.id,name:t.name,name_abbrev:t.name_abbrev,vendor:t.vendor,flight_time:t.flight_time,recharge_time:t.recharge_time,battery_swap_time:t.battery_swap_time,supported:t.supported},this.droneModelModalTitle=this.$t("update-something",{something:this.currentDroneModel.name}).toString(),this.droneModelModalOkTitle=this.$t("apply").toString(),this.appDroneModelModal.show();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onDeleteDroneModelClick",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(confirm(this.$t("sure-delete-something",{something:t.name}).toString())){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,D["a"].deleteDroneModel(t.id);case 4:return this.showSuccess(this.$t("something-deleted-successfully",{something:t.name}).toString()),e.next=7,this.updateDroneModelRows();case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(w["a"]);C([Object(b["c"])()],O.prototype,"appDroneModelModal",void 0),C([Object(y["a"])("loading")],O.prototype,"created",null),C([Object(y["a"])()],O.prototype,"onCreateDroneModelClick",null),C([Object(y["a"])("droneModelModalLoading")],O.prototype,"onSubmitDroneModel",null),C([Object(y["a"])()],O.prototype,"onEditDroneModelClick",null),C([Object(y["a"])("loading")],O.prototype,"onDeleteDroneModelClick",null),O=C([Object(b["a"])({name:"app-settings-drone-models",components:{AppTableContainer:h["a"],AppModalForm:g["a"],AppTable:_["a"],AppButton:f["a"],AppMultiselect:v["a"]}})],O);var x=O,$=x,j=(r(494),r(28)),S=Object(j["a"])($,k,M,!1,null,null,null);S.options.__file="src/app/settings/drones/drone-models.vue";var P=S.exports,R=r(331),A=r(158),T=function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},E=function(e){Object(d["a"])(r,e);var t=Object(m["a"])(r);function r(){var e;return Object(c["a"])(this,r),e=t.apply(this,arguments),e.droneColumns=[],e.droneRows=[],e.loading=!1,e.showRetired=!1,e.availableDroneModels=[],e.appendNewCustomerPlantAllowed=!0,e.selectedCustomerPlants=[],e.allCustomers=[],e.availableCustomers=[],e.selectedCustomerId=null,e.allPlants=[],e.droneModalLoading=!1,e.droneModalTitle="",e.droneModalOkTitle="",e.currentDrone={id:"",drone_model:{id:"",name:"",name_abbrev:"",vendor:"",flight_time:0,recharge_time:0,battery_swap_time:0,supported:!1},custom_name:"",serial_number:"",internal_identifier:"",notes:"",number_available_batteries:1,retired:!1},e}return Object(u["a"])(r,[{key:"created",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.droneColumns=[{key:"customer_plants",label:this.$t("customer-plants").toString()},{key:"drone_model",label:this.$t("drone-type").toString()},{key:"custom_name",label:this.$t("name").toString()},{key:"serial_number",label:this.$t("serial-number").toString()},{key:"internal_identifier",label:this.$t("internal-identifier").toString(),labelExpl:this.$t("internal-identifier_expl").toString()},{key:"notes",label:this.$t("notes").toString()},{key:"number_available_batteries",label:this.$t("batteries").toString()}],e.next=3,this.updateDroneRows();case 3:return e.next=5,this.updateAvailableDroneModels();case 5:return e.t0=A["a"],e.next=8,D["a"].getCustomers();case 8:return e.t1=e.sent,this.allCustomers=(0,e.t0)(e.t1,"name"),e.t2=A["a"],e.next=13,D["a"].getAllPlants();case 13:e.t3=e.sent,this.allPlants=(0,e.t2)(e.t3,"name"),this.availableCustomers=[{value:null,text:""}].concat(Object(s["a"])(this.allCustomers.map((function(e){return{value:e.id,text:e.name}})))),this.appendEmptyCustomerPlant();case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateAvailableDroneModels",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,D["a"].getDroneModels();case 2:this.availableDroneModels=e.sent.filter((function(e){return t?e.supported||e.name_abbrev==t:e.supported})).map((function(e){return{value:e.id,text:e.name_abbrev}}));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateDroneRows",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){var t;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},this.selectedCustomerId&&(t.customer_id=this.selectedCustomerId),e.next=4,D["a"].getDrones(t);case 4:this.droneRows=e.sent.map((function(e){var t;return{id:e.id,customer_plants:null===(t=e.customer_plants)||void 0===t?void 0:t.map((function(e){return{customer_id:e.customer_id,customer_name:e.customer_name,plant_id:e.plant_id,plant_name:e.plant_name}})).sort((function(e,t){var r=e.customer_name?e.customer_name:"",n=t.customer_name?t.customer_name:"";if(r<n)return-1;if(r>n)return 1;var o=e.plant_name?e.plant_name:"",a=t.plant_name?t.plant_name:"";return o<a?-1:o>a?1:0})),drone_model:e.drone_model,custom_name:e.custom_name,serial_number:e.serial_number,internal_identifier:e.internal_identifier,notes:e.notes,number_available_batteries:e.number_available_batteries,retired:e.retired}})).sort((function(e,t){var r=e.customer_plants&&e.customer_plants.length>0&&void 0!=e.customer_plants[0].customer_name?e.customer_plants[0].customer_name:"",n=t.customer_plants&&t.customer_plants.length>0&&void 0!=t.customer_plants[0].customer_name?t.customer_plants[0].customer_name:"";if(r<n)return-1;if(r>n)return 1;var o=e.custom_name,a=t.custom_name;return o<a?-1:o>a?1:0})),this.showRetired||(this.droneRows=this.droneRows.filter((function(e){return!e.retired})));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onCreateDroneClick",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.currentDrone={id:"",drone_model:{id:"",name:"",name_abbrev:"",vendor:"",flight_time:0,recharge_time:0,battery_swap_time:0,supported:!1},custom_name:"",serial_number:"",internal_identifier:"",notes:"",number_available_batteries:1,retired:!1},this.selectedCustomerPlants=[],this.appendEmptyCustomerPlant(),this.droneModalTitle=this.$t("create-drone").toString(),this.droneModalOkTitle=this.$t("create").toString(),e.next=7,this.updateAvailableDroneModels();case 7:this.appDroneModal.show();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onSubmitDrone",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(){var t,r,n;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(this.currentDrone.customer_plants=[],t=0;t<this.selectedCustomerPlants.length;t++)r=this.selectedCustomerPlants[t].customer_id,n=this.selectedCustomerPlants[t].plant_id,void 0!=r&&void 0!=n&&this.currentDrone.customer_plants.push({customer_id:r,plant_id:n});if(this.currentDrone.id){e.next=8;break}return e.next=5,D["a"].createDrone({customer_plant_ids_encoded:this.currentDrone.customer_plants,custom_name:this.currentDrone.custom_name,drone_model_id:this.currentDrone.drone_model.id,serial_number:this.currentDrone.serial_number,number_available_batteries:this.currentDrone.number_available_batteries,retired:this.currentDrone.retired,internal_identifier:this.currentDrone.internal_identifier,notes:this.currentDrone.notes});case 5:this.showSuccess(this.$t("something-created-success",{something:this.currentDrone.custom_name}).toString()),e.next=11;break;case 8:return e.next=10,D["a"].updateDrone(this.currentDrone.id,{customer_plant_ids_encoded:this.currentDrone.customer_plants,custom_name:this.currentDrone.custom_name,drone_model_id:this.currentDrone.drone_model.id,serial_number:this.currentDrone.serial_number,number_available_batteries:this.currentDrone.number_available_batteries,retired:this.currentDrone.retired,internal_identifier:this.currentDrone.internal_identifier,notes:this.currentDrone.notes});case 10:this.showSuccess(this.$t("something-edited-successfully",{something:this.currentDrone.custom_name}).toString());case 11:return this.appDroneModal.hide(),e.next=14,this.updateDroneRows();case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onEditDroneClick",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(t){var r,n,o;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t.id,e.t1=null===(r=t.customer_plants)||void 0===r?void 0:r.map((function(e){return{customer_id:e.customer_id,plant_id:e.plant_id}})),e.t2=t.custom_name,e.next=5,D["a"].getDroneModel(t.drone_model.id);case 5:if(e.t3=e.sent,e.t4=t.serial_number,e.t5=t.internal_identifier,e.t6=this.currentDrone.notes,e.t7=t.number_available_batteries,e.t8=t.retired,this.currentDrone={id:e.t0,customer_plants:e.t1,custom_name:e.t2,drone_model:e.t3,serial_number:e.t4,internal_identifier:e.t5,notes:e.t6,number_available_batteries:e.t7,retired:e.t8},this.selectedCustomerPlants=[],this.currentDrone.customer_plants&&this.currentDrone.customer_plants.length>0)for(n=0;n<this.currentDrone.customer_plants.length;n++)o={id:this.selectedCustomerPlants.length+1,customer_id:this.currentDrone.customer_plants[n].customer_id,available_plant_ids:[],plant_id:this.currentDrone.customer_plants[n].plant_id},this.selectedCustomerPlants.push(o),this.onCustomerSelectionChanged(o);else this.appendEmptyCustomerPlant();return this.appendNewCustomerPlantAllowed=!0,this.droneModalTitle=this.$t("update-something",{something:this.currentDrone.custom_name}).toString(),this.droneModalOkTitle=this.$t("apply").toString(),e.next=19,this.updateAvailableDroneModels(this.currentDrone.drone_model.name_abbrev);case 19:this.appDroneModal.show();case 20:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onDeleteDroneClick",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(confirm(this.$t("sure-delete-something",{something:t.custom_name}).toString())){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,D["a"].deleteDrone(t.id);case 4:return this.showSuccess(this.$t("something-deleted-successfully",{something:t.custom_name}).toString()),e.next=7,this.updateDroneRows();case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onCustomerSelectionChanged",value:function(){var e=Object(l["a"])(Object(i["a"])().mark((function e(t){var r,n,o,s,l,c,u,d,m;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.available_plant_ids=[],r=Object(a["a"])(this.allPlants),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=42;break}if(o=n.value,!o.customers){e.next=40;break}s=Object(a["a"])(o.customers),e.prev=8,s.s();case 10:if((l=s.n()).done){e.next=32;break}c=l.value,u=Object(a["a"])(this.allCustomers),e.prev=13,u.s();case 15:if((d=u.n()).done){e.next=22;break}if(m=d.value,m.id!=c.id||c.id!=t.customer_id){e.next=20;break}return t.available_plant_ids.push({value:o.id.toString(),text:o.name}),e.abrupt("break",22);case 20:e.next=15;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e["catch"](13),u.e(e.t0);case 27:return e.prev=27,u.f(),e.finish(27);case 30:e.next=10;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e["catch"](8),s.e(e.t1);case 37:return e.prev=37,s.f(),e.finish(37);case 40:e.next=4;break;case 42:e.next=47;break;case 44:e.prev=44,e.t2=e["catch"](2),r.e(e.t2);case 47:return e.prev=47,r.f(),e.finish(47);case 50:case"end":return e.stop()}}),e,this,[[2,44,47,50],[8,34,37,40],[13,24,27,30]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkIfAppendNewCustomerPlantAllowed",value:function(){for(var e=0,t=0;t<this.selectedCustomerPlants.length;t++)void 0==this.selectedCustomerPlants[t].customer_id&&(e+=1);this.appendNewCustomerPlantAllowed=!(e>=1)}},{key:"appendEmptyCustomerPlant",value:function(){if(this.checkIfAppendNewCustomerPlantAllowed(),this.appendNewCustomerPlantAllowed){var e={id:this.selectedCustomerPlants.length+1,customer_id:this.selectedCustomerId?this.selectedCustomerId:void 0,available_plant_ids:[]};this.selectedCustomerPlants.push(e),this.selectedCustomerId&&this.onCustomerSelectionChanged(e)}}},{key:"deleteCustomerPlantEntry",value:function(e){this.selectedCustomerPlants=this.selectedCustomerPlants.filter((function(t){return t!=e}))}}]),r}(w["a"]);T([Object(b["c"])()],E.prototype,"appDroneModal",void 0),T([Object(y["a"])("loading")],E.prototype,"created",null),T([Object(y["a"])("droneModalLoading")],E.prototype,"onCreateDroneClick",null),T([Object(y["a"])("droneModalLoading")],E.prototype,"onSubmitDrone",null),T([Object(y["a"])()],E.prototype,"onEditDroneClick",null),T([Object(y["a"])("loading")],E.prototype,"onDeleteDroneClick",null),T([Object(y["a"])()],E.prototype,"onCustomerSelectionChanged",null),E=T([Object(b["a"])({name:"app-settings-drones",components:{AppTableContainer:h["a"],AppModalForm:g["a"],AppTable:_["a"],AppButton:f["a"],AppMultiselect:v["a"],AppSettingsDroneModels:P,AppTableFilter:R["a"]}})],E);var q=E,I=q,L=(r(495),Object(j["a"])(I,n,o,!1,null,null,null));L.options.__file="src/app/settings/drones/drones.vue";t["default"]=L.exports}}]);