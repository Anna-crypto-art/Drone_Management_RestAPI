(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{275:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(24),n(301),n(48);var a=n(113);function r(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Object(a["a"])(e),null===e)break;return e}function i(){return i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var a=r(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},i.apply(this,arguments)}},282:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var a,r,i=n(55);(function(e){e[e["EMPTY"]=0]="EMPTY",e[e["UPLOADING"]=1]="UPLOADING",e[e["UPLOAD_FAILED"]=2]="UPLOAD_FAILED",e[e["DATA_INCOMPLETE"]=3]="DATA_INCOMPLETE",e[e["DATA_COMPLETE"]=4]="DATA_COMPLETE",e[e["DATA_COMPLETE_VERIFIED"]=5]="DATA_COMPLETE_VERIFIED",e[e["PROCESSING"]=6]="PROCESSING",e[e["FINISHED"]=7]="FINISHED"})(r||(r={}));var s=(a={},Object(i["a"])(a,r.EMPTY,"EMPTY"),Object(i["a"])(a,r.UPLOADING,"UPLOADING"),Object(i["a"])(a,r.UPLOAD_FAILED,"UPLOAD_FAILED"),Object(i["a"])(a,r.DATA_INCOMPLETE,"DATA_INCOMPLETE"),Object(i["a"])(a,r.DATA_COMPLETE,"DATA_COMPLETE"),Object(i["a"])(a,r.DATA_COMPLETE_VERIFIED,"DATA_COMPLETE_VERIFIED"),Object(i["a"])(a,r.PROCESSING,"PROCESSING"),Object(i["a"])(a,r.FINISHED,"FINISHED"),a)},283:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"app-explanation"},[n("span",{ref:"appExplTarget",staticClass:"app-explanation-container"},[n("b-icon",{attrs:{icon:"question-circle-fill"}})],1),n("b-popover",{attrs:{target:function(){return e.$refs.appExplTarget},triggers:"hover",placement:"top"}},[e._t("default")],2)],1)},r=[];a._withStripped=!0;var i=n(20),s=n(19),o=n(26),l=n(25),u=n(30),c=(n(48),n(24),n(17)),p=n(16),f=function(e,t,n,a){var r,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},d=function(e){Object(o["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(s["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n)}(c["default"]);d=f([Object(p["a"])({name:"app-explanation"})],d);var h=d,v=h,b=(n(302),n(34)),m=Object(b["a"])(v,a,r,!1,null,null,null);m.options.__file="src/app/shared/components/app-explanation/app-explanation.vue";t["a"]=m.exports},287:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e["UPDATE_ANALYSIS"]="updateAnalysis",e["RUN_ANALYSIS_TASK"]="runAnalysisTask",e["FINISHED_ANALYSIS_TASK"]="finishedAnalysisTask",e["QFLY_SERVER_STATE_CHANGED"]="qflyServerStateChanged"}(a||(a={}))},289:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(19),r=n(20),i=n(59),s=n(26),o=n(25),l=(n(95),n(17)),u=function(e){Object(s["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(r["a"])(n,[{key:"emit",value:function(e,t){this.$emit.apply(this,[e].concat(Object(i["a"])(t)))}},{key:"on",value:function(e,t){this.$on(e,t)}}]),n}(l["default"]),c=function(){function e(){Object(a["a"])(this,e)}return Object(r["a"])(e,null,[{key:"getAnalysisEventBus",value:function(t){return t in e.anaylsisEventBusses||(e.anaylsisEventBusses[t]=new u),e.anaylsisEventBusses[t]}},{key:"on",value:function(t,n,a){e.getAnalysisEventBus(t).on(n,a)}},{key:"emit",value:function(t,n){for(var a=arguments.length,r=new Array(a>2?a-2:0),i=2;i<a;i++)r[i-2]=arguments[i];e.getAnalysisEventBus(t).emit(n,r)}}]),e}();c.anaylsisEventBusses={}},291:function(e,t,n){},295:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(95);function a(e){var t=["KB","MB","GB","TB"],n=0;do{e/=1024}while(e>1024&&++n<t.length);return"".concat(Math.round(e)," ").concat(t[n])}},296:function(e,t,n){"use strict";var a,r,i;n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),function(e){e["FILE_PROGRESS"]="UPLOAD_FILE_PROGRESS",e["FILE_COMPLETE"]="FILE_COMPLETE",e["FILE_CHUNK_COMPLETE"]="FILE_CHUNK_COMPLETE",e["ERROR"]="UPLOAD_ERROR",e["START_UPLOAD"]="START_UPLOAD",e["UPLOAD_COMPLETE"]="UPLOAD_COMPLETE",e["RESUME_UPLOAD_AFTER_ERROR"]="RESUME_UPLOAD_AFTER_ERROR"}(a||(a={})),function(e){e["UNPREPARED"]="UNPREPARED",e["INITIALIZED"]="INITIALIZED",e["UPLOADING"]="UPLOADING",e["FINISHED"]="FINISHED",e["FAILED"]="FAILED",e["RETRYING"]="RETRYING"}(r||(r={})),function(e){e["FILE_SUCCESS"]="fileSuccess",e["FILE_PROGRESS"]="fileProgress",e["FILE_ERROR"]="fileError",e["FILE_RETRY"]="fileRetry",e["FILE_ADDED"]="fileAdded",e["FILE_REMOVED"]="fileRemoved",e["PROGRESS"]="progress",e["FAILED"]="failed",e["COMPLETED"]="completed"}(i||(i={}))},301:function(e,t,n){var a=n(21),r=n(36),i=n(37),s=n(38),o=n(74),l=n(116);function u(e,t){var n,a,c=arguments.length<3?e:arguments[2];return i(e)===c?e[t]:(n=o.f(e,t))?s(n,"value")?n.value:void 0===n.get?void 0:n.get.call(c):r(a=l(e))?u(a,t,c):void 0}a({target:"Reflect",stat:!0},{get:u})},302:function(e,t,n){"use strict";n(291)},303:function(e,t,n){"use strict";var a,r="object"===typeof Reflect?Reflect:null,i=r&&"function"===typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function s(e){console&&console.warn&&console.warn(e)}a=r&&"function"===typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!==e};function l(){l.init.call(this)}e.exports=l,e.exports.once=g,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function p(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function f(e,t,n,a){var r,i,o;if(c(n),i=e._events,void 0===i?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),o=i[t]),void 0===o)o=i[t]=n,++e._eventsCount;else if("function"===typeof o?o=i[t]=a?[n,o]:[o,n]:a?o.unshift(n):o.push(n),r=p(e),r>0&&o.length>r&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,s(l)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=d.bind(a);return r.listener=n,a.wrapFn=r,r}function v(e,t,n){var a=e._events;if(void 0===a)return[];var r=a[t];return void 0===r?[]:"function"===typeof r?n?[r.listener||r]:[r]:n?O(r):m(r,r.length)}function b(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),a=0;a<t;++a)n[a]=e[a];return n}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function O(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function g(e,t){return new Promise((function(n,a){function r(n){e.removeListener(t,i),a(n)}function i(){"function"===typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}w(e,t,i,{once:!0}),"error"!==t&&E(e,r,{once:!0})}))}function E(e,t,n){"function"===typeof e.on&&w(e,"error",t,n)}function w(e,t,n,a){if("function"===typeof e.on)a.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(i){a.once&&e.removeEventListener(t,r),n(i)}))}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return p(this)},l.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a="error"===e,r=this._events;if(void 0!==r)a=a&&void 0===r.error;else if(!a)return!1;if(a){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var l=r[e];if(void 0===l)return!1;if("function"===typeof l)i(l,this,t);else{var u=l.length,c=m(l,u);for(n=0;n<u;++n)i(c[n],this,t)}return!0},l.prototype.addListener=function(e,t){return f(this,e,t,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(e,t){return f(this,e,t,!0)},l.prototype.once=function(e,t){return c(t),this.on(e,h(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,h(this,e,t)),this},l.prototype.removeListener=function(e,t){var n,a,r,i,s;if(c(t),a=this._events,void 0===a)return this;if(n=a[e],void 0===n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(r=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,r=i;break}if(r<0)return this;0===r?n.shift():y(n,r),1===n.length&&(a[e]=n[0]),void 0!==a.removeListener&&this.emit("removeListener",e,s||t)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(e){var t,n,a;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,i=Object.keys(n);for(a=0;a<i.length;++a)r=i[a],"removeListener"!==r&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;a>=0;a--)this.removeListener(e,t[a]);return this},l.prototype.listeners=function(e){return v(this,e,!0)},l.prototype.rawListeners=function(e){return v(this,e,!1)},l.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):b.call(e,t)},l.prototype.listenerCount=b,l.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]}},310:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var a=n(6),r=n(11);n(24);function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];clearTimeout(t),t=setTimeout((function(){e.apply(void 0,r)}),n)}}function s(e){return o.apply(this,arguments)}function o(){return o=Object(r["a"])(Object(a["a"])().mark((function e(t){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout((function(){return e()}),t)}));case 2:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}},326:function(e,t,n){},327:function(e,t,n){},328:function(e,t,n){},329:function(e,t,n){},378:function(e,t,n){"use strict";n(326)},379:function(e,t,n){"use strict";n(327)},380:function(e,t,n){"use strict";n(328)},381:function(e,t,n){"use strict";n(329)},428:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-content",{attrs:{title:e.$t("new-data-upload"),navback:!0,subtitle:e.plantName,eventId:"newAnalysis"}},[n("div",{staticClass:"app-new-analysis mar-bottom-2x"},[n("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.plantOptions.length>1,expression:"plantOptions.length > 1"}],attrs:{"label-cols-lg":"2",label:e.$t("plant")}},[n("b-form-select",{attrs:{required:"",options:e.plantOptions},model:{value:e.selectedPlantId,callback:function(t){e.selectedPlantId=t},expression:"selectedPlantId"}})],1),n("b-form-group",{attrs:{"label-cols-lg":"2",label:e.$t("acquisition-date")}},[n("b-datepicker",{attrs:{required:""},model:{value:e.flownAt,callback:function(t){e.flownAt=t},expression:"flownAt"}})],1),n("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.productPackagesSelection.length>0,expression:"productPackagesSelection.length > 0"}],attrs:{"label-cols-lg":"2",label:e.$t("product-packages")}},[n("app-multiselect",{attrs:{options:e.productPackagesSelection,readonly:!e.isSuperAdmin},model:{value:e.selectedProductPackages,callback:function(t){e.selectedProductPackages=t},expression:"selectedProductPackages"}})],1)],1),n("app-analysis-uploader",{attrs:{plantId:e.selectedPlantId,analysis:e.analysis,flownAt:e.flownAt}})],1)},r=[];a._withStripped=!0;var i=n(6),s=n(11),o=n(19),l=n(20),u=n(26),c=n(25),p=n(30),f=(n(48),n(24),n(145),n(71),n(144),n(94),n(16)),d=n(42),h=n(96),v=n(45),b=n(72),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-analysis-upload"},[n("div",{staticClass:"mar-bottom-2x"},[n("b-form-checkbox",{attrs:{disabled:!e.hasPlantMetadata},on:{change:e.onChangeDataComplete},model:{value:e.dataComplete,callback:function(t){e.dataComplete=t},expression:"dataComplete"}},[e._v(" "+e._s(e.$t("data-complete"))+" "),n("app-explanation",[e._v(e._s(e.dataCompleteMetadataExpl))])],1)],1),e.uploaderService?n("app-uploader",{attrs:{uploaderService:e.uploaderService,title:e.$t("browse-or-drag-drop-files")}}):e._e(),e.gotoNewAnalysis?n("div",{staticClass:"pull-right mar-top mar-bottom"},[n("app-button",{on:{click:e.onGotoNewAnalysisClick}},[e._v(e._s(e.$t("goto-analysis",{analysis:e.gotoNewAnalysis.name})))])],1):e._e()],1)},y=[];m._withStripped=!0;var O=n(275),g=n(113),E=(n(112),n(117)),w=n(283),k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-file-upload"},[n("b-alert",{attrs:{variant:"danger"},model:{value:e.showErrorAlert,callback:function(t){e.showErrorAlert=t},expression:"showErrorAlert"}},[e.error?n("div",[e._v(" "+e._s(e.$t("error-occured-retrying"))+" "),n("span",{staticClass:"pad-left"},[n("b-spinner",{attrs:{small:""}}),e._v(" ("+e._s(e.errorTrials)+" "+e._s(e.$t("trials"))+") ")],1),n("div",{staticClass:"mar-top font-xs"},[e._v(" "+e._s(e.$t("details"))+": "),n("b",[e._v(e._s(e.error.error))]),n("br"),e._v(" "+e._s(e.error.message)+" ")])]):e._e()]),n("app-files-selection",{attrs:{disabled:e.disableFilesSelection},on:{filesSelected:e.onFilesSelected},scopedSlots:e._u([{key:"files",fn:function(){return[n("div",{directives:[{name:"show",rawName:"v-show",value:e.files.length>0,expression:"files.length > 0"}],staticClass:"app-file-upload-files mar-top"},e._l(e.files,(function(t){return n("app-file-uploader",{key:t.fileName,attrs:{uploaderService:e.uploaderService,uploading:e.uploading,file:t}})})),1)]},proxy:!0}])},[n("div",{staticClass:"app-file-upload-content mar-bottom"},[e.title?n("h3",{staticClass:"app-file-upload-content-title"},[e._v(e._s(e.title))]):e._e(),e._t("default")],2)]),n("app-button",{directives:[{name:"show",rawName:"v-show",value:e.uploadUnfinished,expression:"uploadUnfinished"}],attrs:{loading:e.uploading,disabled:e.uploadButtonDisabled,cls:"pull-right mar-top mar-bottom"},on:{click:e.onStartUpload}},[e._v(" "+e._s(e.$t("upload"))+" ")])],1)},j=[];k._withStripped=!0;var _=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-file-upload-file mar-bottom-half"},[n("div",{staticClass:"app-file-upload-file-infos"},[n("div",{staticClass:"app-file-upload-file-name"},[n("small",{staticClass:"app-file-upload-file-name-size grayed"},[e._v(e._s(e.fileSize))]),e._v(" "+e._s(e.file.fileName)+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.uploading,expression:"!uploading"}],staticClass:"app-file-upload-file-remove",on:{click:e.onFileRemove}},[n("b-icon",{attrs:{icon:"x"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.uploading,expression:"uploading"}],staticClass:"app-file-upload-file-progress"},[n("span",{directives:[{name:"show",rawName:"v-show",value:!e.success,expression:"!success"}]},[e._v(e._s(e.progress)+"%")]),n("b-icon",{directives:[{name:"show",rawName:"v-show",value:e.success,expression:"success"}],staticClass:"text-success",attrs:{icon:"check2"}})],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.uploading,expression:"uploading"}],ref:"uploadProgressBar",staticClass:"app-file-upload-file-progressbar"})])},S=[];_._withStripped=!0;var A=n(17),P=n(295),I=function(e,t,n,a){var r,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},C=function(e){Object(u["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.progress=0,e.success=!1,e}return Object(l["a"])(n,[{key:"created",value:function(){var e=this;this.file.onProgress((function(t){e.progress=t,e.uploadProgressBar&&(e.uploadProgressBar.style.width=e.progress+"%")})),this.file.onComplete((function(){e.success=!0,e.uploadProgressBar&&(e.uploadProgressBar.style.display="none"),e.progress=0}))}},{key:"fileSize",get:function(){return Object(P["a"])(this.file.size)}},{key:"onFileRemove",value:function(){this.uploading||this.uploaderService.removeFile(this.file.fileName)}}]),n}(A["default"]);I([Object(f["b"])({required:!0})],C.prototype,"file",void 0),I([Object(f["b"])({required:!0})],C.prototype,"uploading",void 0),I([Object(f["b"])({required:!0})],C.prototype,"uploaderService",void 0),I([Object(f["c"])()],C.prototype,"uploadProgressBar",void 0),C=I([Object(f["a"])({name:"app-file-uploader"})],C);var x=C,R=x,L=(n(378),n(34)),U=Object(L["a"])(R,_,S,!1,null,null,null);U.options.__file="src/app/shared/components/app-file-upload/app-file-uploader.vue";var N=U.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-file-selection mar-bottom",class:{dragging:e.dragging},on:{drop:e.onDrop,dragover:e.onDragOver,dragleave:e.onDragLeave}},[e._t("default"),n("div",{staticClass:"app-file-selection-button"},[n("app-file-input",{attrs:{disabled:e.disabled},model:{value:e.fileButtonSelection,callback:function(t){e.fileButtonSelection=t},expression:"fileButtonSelection"}})],1),e._t("files")],2)},T=[];D._withStripped=!0;var F=n(59),M=(n(148),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"app-file-input btn btn-primary",class:{disabled:e.disabled}},[n("input",{ref:"fileInputElement",staticClass:"app-file-input-file",attrs:{type:"file",disabled:e.disabled,accept:e.accept,multiple:e.multiple},on:{click:e.onClick,change:e.onChange}}),e._v(" "+e._s(e.$t("browse"))+" ")])}),G=[];M._withStripped=!0;var B=function(e,t,n,a){var r,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},$=function(e){Object(u["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.modelValue=null,e}return Object(l["a"])(n,[{key:"created",value:function(){this.modelValue=this.value}},{key:"onModelValueChanged",value:function(){this.$emit("input",this.modelValue)}},{key:"onClick",value:function(){this.fileInputElement.value=""}},{key:"onChange",value:function(){this.setFiles()}},{key:"setFiles",value:function(){if(this.fileInputElement.files&&0!==this.fileInputElement.files.length){for(var e=[],t=0;t<this.fileInputElement.files.length;t++)e.push(this.fileInputElement.files[t]);this.modelValue=e}else this.modelValue=null}}]),n}(A["default"]);B([Object(f["b"])({required:!0})],$.prototype,"value",void 0),B([Object(f["b"])({default:!0})],$.prototype,"multiple",void 0),B([Object(f["b"])({default:"*"})],$.prototype,"accept",void 0),B([Object(f["b"])({default:!1})],$.prototype,"disabled",void 0),B([Object(f["c"])()],$.prototype,"fileInputElement",void 0),B([Object(f["d"])("modelValue")],$.prototype,"onModelValueChanged",null),$=B([Object(f["a"])({name:"app-file-input"})],$);var z=$,Y=z,V=(n(379),Object(L["a"])(Y,M,G,!1,null,null,null));V.options.__file="src/app/shared/components/app-file-upload/app-file-input.vue";var q=V.exports,H=function(e,t,n,a){var r,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},K=function(e){Object(u["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.fileButtonSelection=null,e.fileDropSelection=null,e.dragging=!1,e}return Object(l["a"])(n,[{key:"emitFiles",value:function(){this.disabled||this.$emit("filesSelected",this.fileDropSelection||this.fileButtonSelection)}},{key:"onFileButtonSelectionChanged",value:function(){this.fileButtonSelection&&(this.fileDropSelection=null),this.emitFiles()}},{key:"onDrop",value:function(e){e.preventDefault(),this.dragging=!1;var t=[];Object(F["a"])(e.dataTransfer.files).forEach((function(e){t.push(e)})),this.fileButtonSelection=null,t.length>0?this.fileDropSelection=t:this.fileDropSelection=null,this.emitFiles()}},{key:"onDragOver",value:function(e){e.preventDefault(),this.dragging=!0}},{key:"onDragLeave",value:function(){this.dragging=!1}}]),n}(A["default"]);H([Object(f["b"])({default:!1})],K.prototype,"disabled",void 0),H([Object(f["d"])("fileButtonSelection")],K.prototype,"onFileButtonSelectionChanged",null),K=H([Object(f["a"])({name:"app-files-selection",components:{AppFileInput:q}})],K);var J=K,Z=J,Q=(n(380),Object(L["a"])(Z,D,T,!1,null,null,null));Q.options.__file="src/app/shared/components/app-file-upload/app-files-selection.vue";var W,X=Q.exports;(function(e){e[e["SELECTING"]=0]="SELECTING",e[e["RESUMING"]=1]="RESUMING",e[e["UPLOADING"]=10]="UPLOADING",e[e["RETRYING"]=11]="RETRYING",e[e["COMPLETED"]=20]="COMPLETED"})(W||(W={}));var ee=n(288),te=function(e,t,n,a){var r,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},ne=function(e){Object(u["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.uploaderState=W.SELECTING,e.uploading=!1,e.error=null,e.showErrorAlert=!1,e.uploadUnfinished=!0,e}return Object(l["a"])(n,[{key:"created",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.registerUploaderEvents();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hasStateSelecting",get:function(){return this.uploaderState===W.SELECTING}},{key:"hasStateResuming",get:function(){return this.uploaderState===W.RESUMING}},{key:"hasStateUploading",get:function(){return this.uploaderState===W.UPLOADING}},{key:"hasStateRetrying",get:function(){return this.uploaderState===W.RETRYING}},{key:"hasStateCompleted",get:function(){return this.uploaderState===W.COMPLETED}},{key:"onFilesSelected",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.uploaderService.fileUploaders=[],!t){e.next=4;break}return e.next=4,this.uploaderService.addFiles(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onStartUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.uploaderService.doUpload();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"files",get:function(){return this.uploaderService.fileUploaders}},{key:"uploadButtonDisabled",get:function(){return 0===this.files.length||this.uploading}},{key:"disableFilesSelection",get:function(){return this.uploading||!this.uploadUnfinished}},{key:"errorTrials",get:function(){return this.uploaderService.getTrials()}},{key:"registerUploaderEvents",value:function(){var e=this;this.uploaderService.onStartUpload((function(){e.uploaderState=W.UPLOADING,e.uploaderStateChanged()})),this.uploaderService.onResume((function(){e.uploaderState=W.UPLOADING,e.uploaderStateChanged()})),this.uploaderService.onError((function(t){e.uploaderState=W.RETRYING,e.error=t,e.showErrorAlert=!0,e.uploaderStateChanged()})),this.uploaderService.onUploadComplete((function(){e.uploaderState=W.COMPLETED,e.uploaderStateChanged()}))}},{key:"uploaderStateChanged",value:function(){(this.hasStateUploading||this.hasStateRetrying)&&(this.uploading=!0),this.hasStateUploading&&(this.error=null,this.showErrorAlert=!1),this.hasStateResuming,this.hasStateCompleted&&(this.uploadUnfinished=!1,this.uploading=!1,this.showSuccess(this.$t("upload-completed-successfully").toString(),!1))}}]),n}(d["a"]);te([Object(f["b"])({required:!0})],ne.prototype,"uploaderService",void 0),te([Object(f["b"])()],ne.prototype,"title",void 0),te([Object(ee["a"])()],ne.prototype,"onStartUpload",null),ne=te([Object(f["a"])({name:"app-uploader",components:{AppFileUploader:N,AppFilesSelection:X,AppButton:b["a"]}})],ne);var ae=ne,re=ae,ie=(n(381),Object(L["a"])(re,k,j,!1,null,null,null));ie.options.__file="src/app/shared/components/app-file-upload/app-uploader.vue";var se=ie.exports,oe=n(67),le=(n(212),n(213),n(303)),ue=n(310),ce=(n(43),n(50),n(120),n(296)),pe=function(){function e(t,n,a){Object(o["a"])(this,e),this.file=t,this.fileName=n,this.chunkSizeInMB=a,this.event=new le["EventEmitter"],this.complete=!1,this.uploadId=null,this.fileId=null,this.missingChunkNumbers=[]}return Object(l["a"])(e,[{key:"onProgress",value:function(e){this.event.on(ce["c"].FILE_PROGRESS,e)}},{key:"onChunkComplete",value:function(e){this.event.on(ce["c"].FILE_CHUNK_COMPLETE,e)}},{key:"onComplete",value:function(e){this.event.on(ce["c"].FILE_COMPLETE,e)}},{key:"onError",value:function(e){this.event.on(ce["c"].ERROR,e)}},{key:"emitProgress",value:function(e){this.event.emit(ce["c"].FILE_PROGRESS,e)}},{key:"emitComplete",value:function(){this.event.emit(ce["c"].FILE_COMPLETE)}},{key:"emitError",value:function(){this.event.emit(ce["c"].ERROR)}},{key:"emitChunkComplete",value:function(){this.event.emit(ce["c"].FILE_CHUNK_COMPLETE)}},{key:"fileUploadCompleted",value:function(){this.complete=!0,this.emitComplete()}},{key:"size",get:function(){return this.file.size}},{key:"upload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){var t,n,a,r,s,o,l=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.complete){e.next=3;break}return this.fileUploadCompleted(),e.abrupt("return");case 3:t=1024*this.chunkSizeInMB*1024,n=this.file.size,a=0,r=!1,s=Object(i["a"])().mark((function e(){var s,o,u,c;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=l.getNextChunkNumber(a),!1!==s){e.next=3;break}return e.abrupt("return","break");case 3:return a=s-1,o=a*t,u=s*t,u>=n&&(r=!0,u=n),c=l.file.slice(o,u),e.next=10,v["a"].uploadFileChunk(l.uploadId,c,l.fileId,a+1,(function(e){var r=t/n*a,i=e.loaded/e.total,s=(u-o)/n,c=Math.round(100*(r+i*s));l.emitProgress(c)}));case 10:l.emitChunkComplete(),l.removeChunkNumber(),a++;case 13:case"end":return e.stop()}}),e)}));case 8:if(r){e.next=15;break}return e.delegateYield(s(),"t0",10);case 10:if(o=e.t0,"break"!==o){e.next=13;break}return e.abrupt("break",15);case 13:e.next=8;break;case 15:this.fileUploadCompleted();case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"unregisterEvents",value:function(){this.event.removeAllListeners()}},{key:"getNextChunkNumber",value:function(e){if(this.missingChunkNumbers.length>0){var t=this.missingChunkNumbers[0];if(-1===t){if(t=e+1,t>this.maxChunks)return!1;this.missingChunkNumbers.unshift(t)}return t}return!1}},{key:"removeChunkNumber",value:function(){if(this.missingChunkNumbers.length>0){var e=this.missingChunkNumbers[0];-1!==e&&this.missingChunkNumbers.splice(0,1)}}},{key:"maxChunks",get:function(){var e=1024*this.chunkSizeInMB*1024,t=this.file.size;return Math.ceil(t/e)}}]),e}(),fe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;Object(o["a"])(this,e),this.chunkSizeInMB=t,this.event=new le["EventEmitter"],this.fileUploaders=[],this.upload=null,this.raisedError=!1,this.trials=0}return Object(l["a"])(e,[{key:"addFiles",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(t){var n,a,r,s,o=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["a"].getSecuredFilenames(t.map((function(e){return e.name})));case 2:n=e.sent,a=Object(oe["a"])(n);try{for(s=function(){var e=r.value,n=t.find((function(t){return t.name===e.original_name}));if(!n)throw new Error("File mapping error");var a=new pe(n,e.secured_name,o.chunkSizeInMB);a.onChunkComplete((function(){o.emitResume()})),o.fileUploaders.push(a)},a.s();!(r=a.n()).done;)s()}catch(i){a.e(i)}finally{a.f()}case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeFile",value:function(e){var t=this.fileUploaders.findIndex((function(t){return t.fileName===e}));-1!==t&&this.fileUploaders.splice(t,1)}},{key:"onError",value:function(e){this.event.on(ce["c"].ERROR,e)}},{key:"onStartUpload",value:function(e){this.event.on(ce["c"].START_UPLOAD,e)}},{key:"onResume",value:function(e){this.event.on(ce["c"].RESUME_UPLOAD_AFTER_ERROR,e)}},{key:"onUploadComplete",value:function(e){this.event.on(ce["c"].UPLOAD_COMPLETE,e)}},{key:"getTrials",value:function(){return this.trials}},{key:"emitError",value:function(e){this.event.emit(ce["c"].ERROR,e),this.raisedError=!0,this.trials+=1}},{key:"emitResume",value:function(){this.trials=0,this.event.emit(ce["c"].RESUME_UPLOAD_AFTER_ERROR)}},{key:"getCreateUploadFiles",value:function(){return this.fileUploaders.map((function(e){return{name:e.fileName,size:e.file.size}}))}},{key:"prepareFileUploaders",value:function(){var e=this;if(!this.upload)throw new Error("Upload is undefined. Missing upload object");var t,n=Object(oe["a"])(this.fileUploaders);try{var a=function(){var n=t.value,a=e.upload.files.find((function(e){return e.name==n.fileName}));if(!a)throw new Error("File mapping error");n.uploadId=e.upload.upload_id,n.fileId=a.id,n.complete=a.complete,n.missingChunkNumbers=a.missing_chunks};for(n.s();!(t=n.n()).done;)a()}catch(r){n.e(r)}finally{n.f()}}},{key:"setUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=6;break}return e.next=3,v["a"].getUpload(t);case 3:this.upload=e.sent,e.next=7;break;case 6:this.upload=t;case 7:this.prepareFileUploaders();case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"startUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){var t,n,a,r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.upload){e.next=2;break}throw new Error("No upload created or resumed");case 2:if(0!==this.fileUploaders.length){e.next=4;break}throw new Error("No files to upload");case 4:if(!this.fileUploaders.find((function(e){return!e.fileId}))){e.next=6;break}throw new Error("Files not prepared for upload");case 6:if(t=this.getInvalidUploadFilesSelection(),!(t.missingFiles.length>0||t.unknownFiles.length>0)){e.next=9;break}throw new Error("Missing upload files or unknown upload files for resume upload");case 9:this.event.emit(ce["c"].START_UPLOAD);case 10:if(void 0===(n=this.fileUploaders.find((function(e){return!e.complete})))){e.next=50;break}return e.prev=11,e.next=14,this.tryUpload(n);case 14:e.next=48;break;case 16:e.prev=16,e.t0=e["catch"](11),a=3;case 19:if(!(a>0)){e.next=33;break}return e.prev=20,e.next=23,this.tryUpload(n);case 23:return e.abrupt("break",33);case 26:return e.prev=26,e.t1=e["catch"](20),a--,e.next=31,Object(ue["b"])(1e3*Math.abs(a-3));case 31:e.next=19;break;case 33:r=!0;case 34:if(!r){e.next=48;break}return e.prev=35,e.next=38,this.refreshUpload();case 38:r=!1,e.next=46;break;case 41:return e.prev=41,e.t2=e["catch"](35),this.emitError(e.t2),e.next=46,Object(ue["b"])(1e4);case 46:e.next=34;break;case 48:e.next=10;break;case 50:case"end":return e.stop()}}),e,this,[[11,16],[20,26],[35,41]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancelUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){var t,n,a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["a"].cancelUpload(this.upload.upload_id);case 2:this.upload=null,t=Object(oe["a"])(this.fileUploaders);try{for(t.s();!(n=t.n()).done;)a=n.value,a.unregisterEvents()}catch(r){t.e(r)}finally{t.f()}this.fileUploaders=[];case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMyUploadingUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",v["a"].getMyUploadingUpload());case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getInvalidUploadFilesSelection",value:function(){var e=this;if(!this.upload)throw new Error("upload is undefined");var t={missingFiles:this.upload.files.filter((function(t){return!e.fileUploaders.find((function(e){return e.fileName===t.name}))})).map((function(e){return e.name})),unknownFiles:this.fileUploaders.filter((function(t){return!e.upload.files.find((function(e){return e.name===t.fileName}))})).map((function(e){return e.fileName}))};return t}},{key:"tryUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.upload();case 3:this.isUploadComplete()&&this.event.emit(ce["c"].UPLOAD_COMPLETE),e.next=11;break;case 6:throw e.prev=6,e.t0=e["catch"](0),t.emitError(),this.emitError(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"refreshUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.upload){e.next=2;break}throw new Error("Upload is undefined");case 2:this.setUpload(this.upload.upload_id);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isUploadComplete",value:function(){return!this.fileUploaders.find((function(e){return!e.complete}))}}]),e}(),de=n(221),he=function(e){Object(u["a"])(n,e);var t=Object(c["a"])(n);function n(e,a,r){var i;return Object(o["a"])(this,n),i=t.call(this,r),i.plantId=e,i.analysisId=a,i}return Object(l["a"])(n,[{key:"doUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.analysisId){e.next=5;break}if(this.flownAt){e.next=3;break}throw{error:"INVALID_OR_MISSING_PARAMS",message:de["i18n"].t("missing").toString()+" "+de["i18n"].t("acquisition-date").toString()};case 3:if(this.plantId){e.next=5;break}throw{error:"INVALID_OR_MISSING_PARAMS",message:de["i18n"].t("missing").toString()+" "+de["i18n"].t("plant").toString()};case 5:return e.next=7,this.createAnalysisUpload();case 7:return e.next=9,this.startUpload();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setFlownAt",value:function(e){this.flownAt=e}},{key:"setAnalysisId",value:function(e){this.analysisId=e}},{key:"setPlantId",value:function(e){this.plantId=e}},{key:"createAnalysisUpload",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){var t;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.upload){e.next=6;break}return e.next=3,v["a"].createAnalysisUpload({chunk_size_in_mb:this.chunkSizeInMB,files:this.getCreateUploadFiles(),analysis_id:this.analysisId,create_analysis:!this.analysisId&&{flown_at:this.flownAt,plant_id:this.plantId}||void 0});case 3:t=e.sent,this.analysisId||(this.analysisId=t.analysis_id),this.setUpload(t);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(fe),ve=n(289),be=n(287),me=function(e,t,n,a){var r,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},ye=function(e){Object(u["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.dataComplete=!1,e.hasPlantMetadata=!1,e.uploaderService=null,e.gotoNewAnalysis=null,e.appContentEventId="newAnalysis",e}return Object(l["a"])(n,[{key:"created",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){var t;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["a"])(Object(g["a"])(n.prototype),"created",this).call(this);case 2:this.uploaderService=new he(this.plantId||void 0,null===(t=this.analysis)||void 0===t?void 0:t.id),this.dataComplete=!!this.analysis&&this.analysis.data_complete,this.analysis&&(this.appContentEventId=this.analysis.id),this.registerUploadEvents();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onAnalysisChanged",value:function(){this.dataComplete=!!this.analysis&&this.analysis.data_complete}},{key:"onPlantIdChanged",value:function(){this.plantId&&this.uploaderService.setPlantId(this.plantId)}},{key:"onFlownAtChanged",value:function(){this.flownAt&&this.uploaderService.setFlownAt(this.flownAt)}},{key:"registerUploadEvents",value:function(){var e=this;this.uploaderService.onStartUpload(Object(s["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.t0=e.analysis,t.t0){t.next=5;break}return t.next=4,v["a"].getAnalysis(e.uploaderService.analysisId);case 4:t.t0=t.sent;case 5:n=t.t0,e.hasPlantMetadata=n.has_plant_metadata||!1;case 7:case"end":return t.stop()}}),t)})))),this.uploaderService.onUploadComplete(Object(s["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v["a"].getAnalysis(e.uploaderService.analysisId);case 2:n=t.sent,n.has_plant_metadata&&n.data_complete&&E["a"].showInfo(e.appContentEventId,e.$t("analysis-with-metdata-data-complete_quest").toString()),e.hasPlantMetadata=n.has_plant_metadata||!1,e.analysis||(e.gotoNewAnalysis=n);case 6:case"end":return t.stop()}}),t)}))))}},{key:"dataCompleteMetadataExpl",get:function(){return!this.hasPlantMetadata&&this.$t("missing-plant-metadata").toString()||this.$t("data-complete_expl").toString()}},{key:"onChangeDataComplete",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){var t;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["a"].getAnalysis(this.uploaderService.analysisId);case 2:if(t=e.sent,!t.plant.in_setup_phase||!this.dataComplete){e.next=7;break}if(confirm(this.$t("data-complete-sure-quest").toString())){e.next=7;break}return this.dataComplete=!1,e.abrupt("return");case 7:return e.next=9,v["a"].updateAnalysis(t.id,{data_complete:this.dataComplete});case 9:ve["a"].emit(t.id,be["a"].UPDATE_ANALYSIS);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onGotoNewAnalysisClick",value:function(){this.$router.push({name:"EditAnalysis",params:{id:this.gotoNewAnalysis.id}})}}]),n}(d["a"]);me([Object(f["b"])({default:null})],ye.prototype,"plantId",void 0),me([Object(f["b"])({default:null})],ye.prototype,"flownAt",void 0),me([Object(f["b"])({default:null})],ye.prototype,"analysis",void 0),me([Object(f["d"])("analysis")],ye.prototype,"onAnalysisChanged",null),me([Object(f["d"])("plantId")],ye.prototype,"onPlantIdChanged",null),me([Object(f["d"])("flownAt")],ye.prototype,"onFlownAtChanged",null),me([Object(ee["a"])()],ye.prototype,"onChangeDataComplete",null),me([Object(ee["a"])()],ye.prototype,"onGotoNewAnalysisClick",null),ye=me([Object(f["a"])({name:"app-analysis-uploader",components:{AppContent:h["a"],AppUploader:se,AppButton:b["a"],AppExplanation:w["a"]}})],ye);var Oe=ye,ge=Oe,Ee=Object(L["a"])(ge,m,y,!1,null,null,null);Ee.options.__file="src/app/analysis/shared/analysis-uploader.vue";var we=Ee.exports,ke=n(307),je=n(282),_e=function(e,t,n,a){var r,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},Se=function(e){Object(u["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.selectedPlantId=null,e.plantOptions=[],e.flownAt=null,e.analysis=null,e.productPackagesSelection=[],e.selectedProductPackages=null,e}return Object(l["a"])(n,[{key:"created",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.preparePlantSelection();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onSelectedPlantIdChanged",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadProductPackagesSelection();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onFlownAtChanged",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadProductPackagesSelection();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"plantName",get:function(){var e=this;if(this.selectedPlantId,this.plants){var t=this.plants.find((function(t){return t.id===e.selectedPlantId}));if(t)return t.name}return""}},{key:"preparePlantSelection",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){var t,n;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["a"].getPlants();case 2:return this.plants=e.sent,t=this.$route.query.plantId,t&&!Array.isArray(t)?this.plants=this.plants.filter((function(e){return e.id===t})):t=void 0,e.next=7,v["a"].getAllAnalysis({plant_id:t});case 7:if(n=e.sent,this.plants=this.plants.filter((function(e){return!n.find((function(t){return t.plant.id===e.id&&t.current_state&&t.current_state.state.id<=je["a"].DATA_INCOMPLETE}))})),0!==this.plants.length){e.next=12;break}return this.$router.push({name:"Analyses"}),e.abrupt("return");case 12:this.plantOptions=this.plants.map((function(e){return{value:e.id,text:e.name}})),1===this.plants.length&&(this.selectedPlantId=this.plants[0].id);case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadProductPackagesSelection",value:function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.productPackagesSelection=[],this.selectedPlantId&&this.flownAt){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,v["a"].getOrderPPsMulitselectOptions(this.selectedPlantId,this.flownAt);case 5:return this.productPackagesSelection=e.sent,e.next=8,v["a"].getNewAnalysisProductPackagesProposal(this.selectedPlantId,this.flownAt);case 8:this.selectedProductPackages=e.sent.map((function(e){return e.id}));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(d["a"]);_e([Object(ee["a"])()],Se.prototype,"created",null),_e([Object(f["d"])("selectedPlantId")],Se.prototype,"onSelectedPlantIdChanged",null),_e([Object(f["d"])("flownAt")],Se.prototype,"onFlownAtChanged",null),_e([Object(ee["a"])()],Se.prototype,"loadProductPackagesSelection",null),Se=_e([Object(f["a"])({name:"app-new-analysis",components:{AppContent:h["a"],AppButton:b["a"],AppAnalysisUploader:we,AppMultiselect:ke["a"]}})],Se);var Ae=Se,Pe=Ae,Ie=Object(L["a"])(Pe,a,r,!1,null,null,null);Ie.options.__file="src/app/analysis/new-analysis/new-awesome-analysis.vue";t["default"]=Ie.exports}}]);