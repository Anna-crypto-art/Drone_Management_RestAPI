(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{250:function(e,t,a){},252:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"app-table-container "+(e.size?"app-table-container-"+e.size:"")},[e._t("default")],2)},s=[];n._withStripped=!0;var i=a(25),r=a(24),l=a(31),o=a(30),u=a(40),c=(a(61),a(26),a(15)),p=a(33),d=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},f=function(e){Object(l["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a)}(c["default"]);d([Object(p["b"])({default:""})],f.prototype,"size",void 0),f=d([p["a"]],f);var h=f,y=h,v=(a(255),a(39)),b=Object(v["a"])(y,n,s,!1,null,null,null);b.options.__file="src/app/shared/components/app-table-container/app-table-container.vue";t["a"]=b.exports},253:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a(26),a(265),a(61);var n=a(97);function s(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Object(n["a"])(e),null===e)break;return e}function i(){return i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=s(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:a):i.value}},i.apply(this,arguments)}},255:function(e,t,a){"use strict";a(250)},265:function(e,t,a){var n=a(18),s=a(29),i=a(34),r=a(35),l=a(56),o=a(99);function u(e,t){var a,n,c=arguments.length<3?e:arguments[2];return i(e)===c?e[t]:(a=l.f(e,t))?r(a,"value")?a.value:void 0===a.get?void 0:a.get.call(c):s(n=o(e))?u(n,t,c):void 0}n({target:"Reflect",stat:!0},{get:u})},266:function(e,t,a){},267:function(e,t,a){},269:function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return s})),function(e){e["UPLOADING"]="UPLOADING",e["UPLOAD_FAILED"]="UPLOAD_FAILED",e["PICK_ME_UP"]="PICK_ME_UP",e["PROCESSING"]="PROCESSING",e["PROCESS_FAILED"]="PROCESS_FAILED",e["ABANDONED"]="ABANDONED",e["FINISHED"]="FINISHED"}(n||(n={}));var s={UPLOADING:[n.PICK_ME_UP,n.UPLOAD_FAILED,n.ABANDONED],UPLOAD_FAILED:[n.UPLOADING,n.ABANDONED,n.PICK_ME_UP],PICK_ME_UP:[n.PROCESSING,n.ABANDONED],PROCESSING:[n.FINISHED,n.ABANDONED,n.PROCESS_FAILED],PROCESS_FAILED:[n.PROCESSING,n.ABANDONED],ABANDONED:[],FINISHED:[]}},270:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(24),s=a(25),i=function(){function e(){Object(n["a"])(this,e)}return Object(s["a"])(e,null,[{key:"download",value:function(e,t){var a=document.createElement("a");a.href=e,a.setAttribute("download",t||e),document.body.appendChild(a),a.click()}}]),e}()},272:function(e,t,a){"use strict";a(266)},273:function(e,t,a){"use strict";a(267)},274:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n="new-analysis-storage-key"},275:function(e,t,a){"use strict";var n=a(18),s=a(57),i=a(41),r=a(20),l=a(130),o=[],u=o.sort,c=r((function(){o.sort(void 0)})),p=r((function(){o.sort(null)})),d=l("sort"),f=c||!p||!d;n({target:"Array",proto:!0,forced:f},{sort:function(e){return void 0===e?u.call(i(this)):u.call(i(this),s(e))}})},276:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i}));var n=a(16);a(62),a(26);function s(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];clearTimeout(t),t=setTimeout((function(){e.apply(void 0,s)}),a)}}function i(e){return r.apply(this,arguments)}function r(){return r=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout((function(){return e()}),t)}));case 2:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}},278:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-file-upload"},[a("div",{staticClass:"app-file-upload-dropzone",attrs:{id:"file-upload-dropzone-id"}},[a("div",{staticClass:"app-file-upload-dropzone-content"},[e.title?a("h3",{staticClass:"app-file-upload-dropzone-content-title"},[e._v(e._s(e.title))]):e._e(),e._t("default")],2),a("div",{staticClass:"app-file-upload-dropzone-browsebutton"},[a("b-button",{attrs:{variant:"primary",id:"file-upload-browsebutton-id"}},[e._v(e._s(e.$t("browse...")))])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.keyResumFiles>0,expression:"keyResumFiles > 0"}],key:e.keyResumFiles,staticClass:"app-file-upload-dropzone-files",staticStyle:{"margin-top":"30px"}},e._l(e.files,(function(t){return a("app-file-upload-file",{key:t.uniqueIdentifier,ref:"uploadFiles",refInFor:!0,attrs:{uploading:e.uploading,file:t}})})),1)])])},s=[];n._withStripped=!0;var i=a(24),r=a(25),l=a(31),o=a(30),u=a(40),c=(a(61),a(26),a(125),a(15)),p=a(33),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-file-upload-file"},[a("div",{staticClass:"app-file-upload-file-infos"},[a("div",{staticClass:"app-file-upload-file-name"},[a("small",{staticClass:"app-file-upload-file-name-size grayed"},[e._v(e._s(e.getFileSize(e.file.size)))]),e._v(" "+e._s(e.file.fileName)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"app-file-upload-file-name-error",class:{"text-danger":!e.retry}},[e._v(" "+e._s(e.retry&&e.$t("retrying...")||e.error)+" ")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.uploading,expression:"!uploading"}],staticClass:"app-file-upload-file-remove",on:{click:e.onFileRemove}},[a("b-icon",{attrs:{icon:"x"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.uploading,expression:"uploading"}],staticClass:"app-file-upload-file-progress"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.success,expression:"!success"}]},[e._v(e._s(e.progress)+"%")]),a("b-icon",{directives:[{name:"show",rawName:"v-show",value:e.success,expression:"success"}],staticClass:"text-success",attrs:{icon:"check2"}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.uploading,expression:"uploading"}],ref:"uploadProgressBar",staticClass:"app-file-upload-file-progressbar"})])},f=[];d._withStripped=!0;a(124);var h=a(49),y=a(259),v=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},b=function(e){Object(l["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.progress=0,e.error="",e.retry=!1,e.success=!1,e}return Object(r["a"])(a,[{key:"created",value:function(){this.uploading&&(this.emitProgress(),100===this.progress&&this.emitSuccess())}},{key:"uniqueIdentifier",get:function(){return this.file.uniqueIdentifier}},{key:"getFileSize",value:function(e){var t=["KB","MB","GB","TB"],a=0;do{e/=1024}while(e>1024&&++a<t.length);return"".concat(Math.round(e)," ").concat(t[a])}},{key:"onFileRemove",value:function(){this.file.cancel(),y["a"].emitFileRemoved(this.file)}},{key:"emitError",value:function(e){try{var t=JSON.parse(e);t.error&&(this.error=t.error)}catch(a){console.error(e),this.error=h["a"].SOMETHING_WENT_WRONG}this.success=!1,this.retry=!1}},{key:"emitRetry",value:function(){this.success=!1,this.retry=!0}},{key:"emitProgress",value:function(){var e=Math.round(100*this.file.progress(!1));e!==this.progress&&(this.progress=e,this.error="",this.retry=!1,this.uploadProgressBar&&(this.uploadProgressBar.style.width=this.progress+"%"))}},{key:"emitSuccess",value:function(){this.error="",this.retry=!1,this.progress=0,this.success=!0,this.uploadProgressBar&&(this.uploadProgressBar.style.display="none")}}]),a}(c["default"]);v([Object(p["b"])({required:!0})],b.prototype,"file",void 0),v([Object(p["b"])({required:!0})],b.prototype,"uploading",void 0),v([Object(p["c"])()],b.prototype,"uploadProgressBar",void 0),b=v([Object(p["a"])({name:"app-file-upload-file"})],b);var m=b,g=m,w=(a(272),a(39)),O=Object(w["a"])(g,d,f,!1,null,null,null);O.options.__file="src/app/shared/components/app-file-upload/app-file-upload-file.vue";var _=O.exports,A=a(261),j=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},k=function(e){Object(l["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.keyResumFiles=0,e.uploading=!1,e}return Object(r["a"])(a,[{key:"mounted",value:function(){this.checkUploadState(),this.registerUploadEvents()}},{key:"checkUploadState",value:function(){y["a"].hasState(A["b"].UPLOADING)?(this.uploading=!0,this.keyResumFiles=y["a"].files.length):y["a"].init("file-upload-dropzone-id","file-upload-browsebutton-id")}},{key:"registerUploadEvents",value:function(){var e=this;y["a"].on(A["a"].FILE_SUCCESS,(function(t){var a=e.getFileUploadFile(t);a&&a.emitSuccess()})),y["a"].on(A["a"].FILE_ERROR,(function(t,a){var n=e.getFileUploadFile(t);n&&n.emitError(a)})),y["a"].on(A["a"].FILE_PROGRESS,(function(t){var a=e.getFileUploadFile(t);a&&a.emitProgress()})),y["a"].on(A["a"].FILE_RETRY,(function(t,a){var n=e.getFileUploadFile(t);n&&n.emitRetry()})),y["a"].on(A["a"].FILE_ADDED,(function(t){e.keyResumFiles+=1})),y["a"].on(A["a"].FILE_REMOVED,(function(t){e.keyResumFiles-=1}))}},{key:"upload",value:function(e,t){this.uploading=!0,this.keyResumFiles+=100,y["a"].upload(e,t)}},{key:"files",get:function(){return y["a"].files}},{key:"cancel",value:function(){y["a"].cancel(),this.uploading=!1,this.keyResumFiles-=100}},{key:"getFileUploadFile",value:function(e){return this.uploadFiles.find((function(t){return t.uniqueIdentifier===e.uniqueIdentifier}))}}]),a}(c["default"]);j([Object(p["c"])()],k.prototype,"uploadFiles",void 0),j([Object(p["b"])()],k.prototype,"title",void 0),k=j([Object(p["a"])({name:"app-file-upload",components:{AppFileUploadFile:_}})],k);var R=k,F=R,S=(a(273),Object(w["a"])(F,n,s,!1,null,null,null));S.options.__file="src/app/shared/components/app-file-upload/app-file-upload.vue";t["a"]=S.exports},283:function(e,t,a){},318:function(e,t,a){"use strict";a(283)},347:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.analysis?a("app-content",{attrs:{title:e.analysis.name||"",navback:!0},scopedSlots:e._u([{key:"subtitle",fn:function(){return[e.analysis.current_state?a("div",[a("b",[e._v(e._s(e.$t(e.analysis.current_state.state.name)))])]):e._e()]},proxy:!0}],null,!1,80026355)},[a("div",{staticClass:"app-edit-analysis"},[a("b-tabs",[e._e(),a("b-tab",{staticClass:"app-edit-analysis-download-tab",scopedSlots:e._u([{key:"title",fn:function(){return[a("b-icon",{attrs:{icon:"download"}}),a("span",{staticClass:"pad-left"},[e._v(e._s(e.$t("download")))])]},proxy:!0}],null,!1,1288288109)},[a("app-download-analysis-files",{ref:"downloadAnalysisFiles",attrs:{analysis:e.analysis}})],1),e.isSuperAdmin?a("b-tab",{staticClass:"app-edit-analysis-admin-tab",scopedSlots:e._u([{key:"title",fn:function(){return[a("b-icon",{attrs:{icon:"braces"}}),a("span",{staticClass:"pad-left"},[e._v(e._s(e.$t("admin-panel")))])]},proxy:!0}],null,!1,3372386877)},[a("app-edit-analysis-admin",{ref:"editAnalysisAdmin",attrs:{analysis:e.analysis},on:{updateAnalysis:e.onUpdateAnalysis}})],1):e._e()],1)],1)]):e._e()},s=[];n._withStripped=!0;var i=a(16),r=a(24),l=a(25),o=a(31),u=a(30),c=a(40),p=(a(62),a(61),a(26),a(33)),d=a(63),f=a(75),h=a(74),y=a(79),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-analysis-upload"},[a("b-form",{staticStyle:{"margin-bottom":"50px"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("b-row",{directives:[{name:"show",rawName:"v-show",value:!e.analysis,expression:"!analysis"}],staticStyle:{"margin-bottom":"25px"}},[a("b-col",{attrs:{sm:"4"}},[a("b-form-group",{attrs:{"label-cols":"auto",label:e.$t("plant")}},[a("b-form-select",{attrs:{required:"",options:e.plantOptions},model:{value:e.newAnalysis.plant_id,callback:function(t){e.$set(e.newAnalysis,"plant_id",t)},expression:"newAnalysis.plant_id"}})],1)],1)],1),a("app-file-upload",{ref:"appFileUpload",attrs:{title:e.$t("select-files")}}),a("app-button",{ref:"uploadButton",attrs:{type:"submit",cls:"pull-right"}},[e._v(e._s(e.uploadButtonTxt))]),a("app-button",{directives:[{name:"show",rawName:"v-show",value:e.showCancelButton,expression:"showCancelButton"}],ref:"cancelUploadButton",attrs:{variant:"secondary",type:"button"},on:{click:e.onCancelUpload}},[e._v(e._s(e.$t("cancel")))]),a("div",{staticClass:"clearfix"})],1)],1)},b=[];v._withStripped=!0;var m=a(253),g=a(97),w=(a(243),a(96),a(95),a(124),a(129),a(278)),O=a(246),_=a(269),A=a(259),j=a(261),k=a(274),R=a(119),F=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},S=function(e){Object(o["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.uploadButtonTxt="",e.showCancelButton=!1,e.plantOptions=[],e.newAnalysis={files:[],plant_id:""},e.storageKey=k["a"],e}return Object(l["a"])(a,[{key:"mounted",value:function(){this.registerUploadEvents()}},{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["a"])(Object(g["a"])(a.prototype),"created",this).call(this);case 2:return this.uploadButtonTxt=this.$t("upload").toString(),e.prev=3,e.next=6,h["a"].getAllPlants();case 6:t=e.sent,this.plantOptions=t.map((function(e){return{value:e.id,text:e.name}})),1===t.length&&(this.newAnalysis.plant_id=t[0].id),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](3),d["a"].showError(e.t0);case 14:n=this.fetchData(),n?(this.analysis=n.analysis,this.newAnalysis=n.newAnalysis,this.waitForFiles=n.fileNames):this.analysis_id&&(this.analysis={id:this.analysis_id});case 16:case"end":return e.stop()}}),e,this,[[3,11]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"updated",value:function(){this.checkUploadState()}},{key:"registerUploadEvents",value:function(){var e=this;A["a"].on(j["a"].COMPLETED,function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["a"].updateAnalysisState(a.id,{state:_["b"].PICK_ME_UP});case 3:R["a"].removeItem(k["a"]),d["a"].showSuccessAlert(e.$t("upload-completed-successfully").toString()),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),d["a"].showError(t.t0);case 10:e.isCreated&&(e.uploadButton.stopLoading(),e.uploadButton.disable(),e.analysis=void 0,e.showCancelButton=!1);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()),A["a"].on(j["a"].FAILED,function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return d["a"].showErrorAlert(e.$t(_["b"].UPLOAD_FAILED).toString()),console.error(a),t.prev=2,t.next=5,h["a"].updateAnalysisState(A["a"].getMetadata().id,{state:_["b"].UPLOAD_FAILED,message:a});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](2),console.error(t.t0);case 10:e.isCreated&&e.onFailed();case 11:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}()),A["a"].on(j["a"].FILE_RETRY,(function(t,a){d["a"].showWarningAlert("".concat(e.$t("upload-error-retry").toString()," ").concat(a,"/").concat(A["a"].getMaxRetries()),"resumable-upload-error-retry")}))}},{key:"checkUploadState",value:function(){A["a"].hasState(j["b"].UPLOADING)?this.uploadButton.startLoading():A["a"].hasState(j["b"].FAILED)?this.onFailed():this.analysis&&this.waitForFiles&&this.waitForFiles.length>0&&(d["a"].showInfoAlert(this.$t("need-files-to-upload_descr").toString()+'<ul style="margin: 5px 0 0 40px;"><li>'+this.waitForFiles.join("</li><li>")+"</li></ul>"),this.uploadButtonTxt=this.$t("resume-upload").toString(),this.uploadButton.disable(),this.showCancelButton=!0)}},{key:"fetchData",value:function(){return R["a"].getItem(this.storageKey)}},{key:"storeData",value:function(){var e=this.getStorageData();e?R["a"].setItem(this.storageKey,e):R["a"].removeItem(this.storageKey)}},{key:"getStorageData",value:function(){return this.analysis&&{newAnalysis:{files:[],plant_id:this.newAnalysis.plant_id},analysis:this.analysis,fileNames:this.appFileUpload.files.map((function(e){return e.fileName}))}||void 0}},{key:"onSubmit",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!A["a"].hasState(j["b"].FAILED)){e.next=3;break}return this.$router.go(0),e.abrupt("return");case 3:if(e.prev=3,this.onUploading(),this.analysis){e.next=9;break}return e.next=8,h["a"].createAnalysis(this.newAnalysis);case 8:this.analysis=e.sent;case 9:this.storeData(),this.appFileUpload.upload(h["a"].getAnalysisFileUploadUrl(this.analysis.id),{id:this.analysis.id}),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](3),d["a"].showError(e.t0),this.uploadButton.stopLoading();case 17:case"end":return e.stop()}}),e,this,[[3,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onFailed",value:function(){this.uploadButton.stopLoading(),this.uploadButtonTxt=this.$t("retry-upload").toString(),this.showCancelButton=!0}},{key:"onUploading",value:function(){this.uploadButton.startLoading(),this.showCancelButton=!1}},{key:"onCancelUpload",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.analysis){e.next=2;break}return e.abrupt("return");case 2:return this.cancelUploadButton.startLoading(),this.appFileUpload.cancel(),R["a"].removeItem(this.storageKey),this.uploadButton.stopLoading(),this.uploadButton.enable(),this.uploadButtonTxt=this.$t("upload").toString(),d["a"].clearAlert(),e.prev=9,e.next=12,h["a"].cancelAnalysisUpload(this.analysis.id);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](9),console.error(e.t0);case 17:return e.prev=17,this.analysis=void 0,this.cancelUploadButton.stopLoading(),this.showCancelButton=!1,this.$router.go(0),e.finish(17);case 23:case"end":return e.stop()}}),e,this,[[9,14,17,23]])})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["a"]);F([Object(p["c"])()],S.prototype,"appFileUpload",void 0),F([Object(p["c"])()],S.prototype,"uploadButton",void 0),F([Object(p["c"])()],S.prototype,"cancelUploadButton",void 0),F([Object(p["b"])({default:null})],S.prototype,"analysis_id",void 0),S=F([Object(p["a"])({name:"app-analysis-upload",components:{AppContent:y["a"],AppFileUpload:w["a"],AppButton:O["a"]}})],S);var x=S,E=x,D=a(39),U=Object(D["a"])(E,v,b,!1,null,null,null);U.options.__file="src/app/analysis/shared/analysis-upload.vue";var I=U.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("app-button",{ref:"downloadSelectedFilesButton",attrs:{disabled:e.isDownloadButtonDisabled},on:{click:e.onDownloadSelectedFilesClick}},[e._v(" "+e._s(e.$t("download-selected-files"))+" ")]),a("app-table-container",[a("b-table",{ref:"downloadFilesTable",attrs:{items:e.downloadFilesTableItems,fields:e.downloadFilesTableColumns,"select-mode":"multi",selectable:"",hover:"","head-variant":"light"},on:{"row-selected":e.onDownloadFilesSelected},scopedSlots:e._u([{key:"head(selected)",fn:function(){return[a("b-checkbox",{attrs:{checked:e.allDownloadFilesSelected},on:{change:e.onSelectAllDownloadFiles}})]},proxy:!0},{key:"cell(selected)",fn:function(e){var t=e.rowSelected;return[a("b-checkbox",{staticClass:"b-table-selectable-checkbox",attrs:{checked:t,disabled:""}})]}},{key:"row-details",fn:function(t){return e._l(t.item.kpis,(function(t){return a("span",{key:t.id,staticClass:"analysis-selection-sidebar-kpi-badge"},[a("b-badge",{style:"background-color: "+e.getKpiColor(t),attrs:{variant:"primary"}},[e._v(e._s(t.name))])],1)}))}}])})],1)],1)},B=[];C._withStripped=!0;var P=a(76),N=(a(275),a(252)),L=a(270),$=a(276),T=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},M=function(e){Object(o["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.isDownloadButtonDisabled=!0,e.downloadFilesTableColumns=[{key:"selected",label:""},{key:"name",label:e.$t("name").toString()}],e.downloadFilesTableItems=[],e.allDownloadFilesSelected=!1,e.selectedDonwloadFiles=[],e}return Object(l["a"])(a,[{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.updateAnalysis(this.analysis);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateAnalysis",value:function(e){this.analysis=e,this.setDownloadFilesTableItems()}},{key:"onDownloadFilesSelected",value:function(e){this.selectedDonwloadFiles=e,this.isDownloadButtonDisabled=0===this.selectedDonwloadFiles.length}},{key:"onDownloadSelectedFilesClick",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0,this.downloadSelectedFilesButton.startLoading(),t=Object(P["a"])(this.selectedDonwloadFiles),e.prev=3,t.s();case 5:if((a=t.n()).done){e.next=15;break}return n=a.value,e.next=9,h["a"].getAnalysisFileDownloadUrl(this.analysis.id,n.name);case 9:return s=e.sent,L["a"].download(s.url,n.name),e.next=13,Object($["b"])(3e3);case 13:e.next=5;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](3),t.e(e.t0);case 20:return e.prev=20,t.f(),e.finish(20);case 23:e.next=28;break;case 25:e.prev=25,e.t1=e["catch"](0),d["a"].showError(e.t1);case 28:return e.prev=28,this.downloadSelectedFilesButton.stopLoading(),e.finish(28);case 31:case"end":return e.stop()}}),e,this,[[0,25,28,31],[3,17,20,23]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onSelectAllDownloadFiles",value:function(e){if(e)this.downloadFilesTable.selectAllRows();else for(var t=0;t<this.downloadFilesTableItems.length;t++)this.downloadFilesTable.unselectRow(t)}},{key:"setDownloadFilesTableItems",value:function(){var e=[];this.analysis.files.video_files&&(e=e.concat(this.analysis.files.video_files)),this.analysis.files.drone_metadata_files&&(e=e.concat(this.analysis.files.drone_metadata_files)),this.analysis.files.other_files&&(e=e.concat(this.analysis.files.other_files)),e.sort(),this.downloadFilesTableItems=e.map((function(e){return{name:e}}))}}]),a}(f["a"]);T([Object(p["b"])({required:!0})],M.prototype,"analysis",void 0),T([Object(p["c"])()],M.prototype,"downloadSelectedFilesButton",void 0),T([Object(p["c"])()],M.prototype,"downloadFilesTable",void 0),M=T([Object(p["a"])({name:"app-download-analysis-files",components:{AppTableContainer:N["a"],AppButton:O["a"]}})],M);var G=M,z=G,q=Object(D["a"])(z,C,B,!1,null,null,null);q.options.__file="src/app/analysis/edit-analysis/download-analysis-files.vue";var K=q.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",[a("b-col",[a("app-update-analysis-state",{ref:"updateAnalysisState",attrs:{analysis:e.analysis},on:{updateAnalysis:e.onUpdateAnalysis}})],1),a("b-col",[a("app-import-analysis-result",{ref:"importAnalysisResult",attrs:{analysis:e.analysis},on:{updateAnalysis:e.onUpdateAnalysis}})],1)],1)],1)},W=[];H._withStripped=!0;var J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-box"},[a("h4",[e._v(e._s(e.$t("update-analysis-state")))]),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmitUpdateState(t)}}},[a("b-form-group",{attrs:{label:e.$t("select-new-analysis-state")}},[a("b-form-select",{attrs:{required:"",options:e.updateStateOptions},model:{value:e.selectedUpdateState,callback:function(t){e.selectedUpdateState=t},expression:"selectedUpdateState"}})],1),a("b-form-group",{attrs:{label:e.$t("message")}},[a("b-form-textarea",{attrs:{placeholder:e.$t("message"),row:"5"},model:{value:e.selectedUpdateStateMessage,callback:function(t){e.selectedUpdateStateMessage=t},expression:"selectedUpdateStateMessage"}})],1),a("app-button",{ref:"submitUpdateStateButton",attrs:{type:"submit"}},[e._v(e._s(e.$t("update")))])],1)],1)},Y=[];J._withStripped=!0;var V=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},Q=function(e){Object(o["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.selectedUpdateState=null,e.updateStateOptions=null,e.selectedUpdateStateMessage="",e}return Object(l["a"])(a,[{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.updateAnalysis(this.analysis);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateAnalysis",value:function(e){this.analysis=e,this.setUpdateStateOptions()}},{key:"onSubmitUpdateState",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.submitUpdateStateButton.startLoading(),this.selectedUpdateState){e.next=4;break}throw{error:"NO_STATE_SELECTED",message:"Please, selecte a state"};case 4:return e.next=6,h["a"].updateAnalysisState(this.analysis.id,{state:this.selectedUpdateState,message:this.selectedUpdateStateMessage});case 6:this.$emit("updateAnalysis"),d["a"].showSuccessAlert(this.$t("update-analysis-state-success").toString()),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),d["a"].showError(e.t0);case 13:return e.prev=13,this.submitUpdateStateButton.stopLoading(),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[0,10,13,16]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"setUpdateStateOptions",value:function(){var e=this;if(!this.analysis.current_state)return null;var t=_["a"][this.analysis.current_state.state.name];if(0===t.length)return null;this.updateStateOptions=t.map((function(t){return{value:t,text:e.$t(t).toString()}}))}}]),a}(f["a"]);V([Object(p["b"])({required:!0})],Q.prototype,"analysis",void 0),V([Object(p["c"])()],Q.prototype,"submitUpdateStateButton",void 0),Q=V([Object(p["a"])({name:"app-update-analysis-state",components:{AppButton:O["a"]}})],Q);var X=Q,Z=X,ee=Object(D["a"])(Z,J,Y,!1,null,null,null);ee.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/update-analysis-state.vue";var te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-box"},[a("h4",[e._v(e._s(e.$t("manage-result-files")))]),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.saveManageResultFiles(t)}}},[a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.analysis.analysis_result,expression:"analysis.analysis_result"}],attrs:{label:e.$t("download-existing-result-files")}},e._l(e.importedResultFiles,(function(t){return a("a",{key:t.id,attrs:{href:"#"},on:{click:function(a){return e.onResultFileClick(t)}}},[e._v(" "+e._s(t.filename)+" ")])})),0),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.analysis.analysis_result,expression:"analysis.analysis_result"}]},[a("b-form-checkbox",{attrs:{id:"removeAllAnalysisResultFiles"},model:{value:e.removeAllAnalysisResultFiles,callback:function(t){e.removeAllAnalysisResultFiles=t},expression:"removeAllAnalysisResultFiles"}},[e._v(" "+e._s(e.$t("remove-result-files"))+" ")])],1),a("b-form-group",{attrs:{label:e.$t("select-json-result-file-import")}},[a("b-form-file",{attrs:{accept:".json"},model:{value:e.jsonFile,callback:function(t){e.jsonFile=t},expression:"jsonFile"}})],1),a("b-form-group",{attrs:{label:e.$t("select-result-image-files")}},[a("b-form-file",{attrs:{accept:"image/png, image/jpeg",multiple:""},model:{value:e.imageFiles,callback:function(t){e.imageFiles=t},expression:"imageFiles"}})],1),a("app-button",{ref:"manageResultFilesSubmitButton",attrs:{type:"submit"}},[e._v(e._s(e.$t("apply")))])],1)],1)},ne=[];ae._withStripped=!0;var se=a(49),ie=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},re=function(e){Object(o["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.importedResultFiles=[],e.removeAllAnalysisResultFiles=!1,e.jsonFile=null,e.imageFiles=null,e}return Object(l["a"])(a,[{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.updateAnalysis(this.analysis);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateAnalysis",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.analysis=t,e.next=3,this.setManageImportFiles();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onResultFileClick",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h["a"].getAnalysisResultFileUrl(t.id);case 3:a=e.sent,L["a"].download(a.url,t.filename),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),d["a"].showError(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setManageImportFiles",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.analysis.analysis_result){e.next=4;break}return e.next=3,h["a"].getAnalysisResultFiles(this.analysis.analysis_result.id);case 3:this.importedResultFiles=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveManageResultFiles",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.manageResultFilesSubmitButton.startLoading(),t=function(){d["a"].showSuccessAlert(n.$t("success-managing-result-files").toString()),n.manageResultFilesSubmitButton.stopLoading(),n.$emit("updateAnalysis")},!this.analysis.analysis_result||!this.removeAllAnalysisResultFiles){e.next=6;break}return e.next=6,h["a"].deleteAnalysisResult(this.analysis.analysis_result.id);case 6:if(!this.jsonFile){e.next=14;break}return d["a"].showInfoAlert("Uploading..."),e.next=10,h["a"].importAnalysisResult(this.jsonFile,this.analysis.id,this.imageFiles||void 0,(function(e){d["a"].showInfoAlert("Uploading... "+e+"%")}));case 10:a=e.sent,h["a"].waitForTask(a.id,(function(e){n.manageResultFilesSubmitButton.stopLoading(),"SUCCESS"===e.state?t():"FAILURE"===e.state&&d["a"].showError({error:se["a"].SOMETHING_WENT_WRONG,message:e.result})}),(function(e){d["a"].showInfoAlert(e)})),e.next=15;break;case 14:t();case 15:e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](0),d["a"].showError(e.t0),this.manageResultFilesSubmitButton.stopLoading();case 21:case"end":return e.stop()}}),e,this,[[0,17]])})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["a"]);ie([Object(p["b"])({required:!0})],re.prototype,"analysis",void 0),ie([Object(p["c"])()],re.prototype,"manageResultFilesSubmitButton",void 0),re=ie([Object(p["a"])({name:"app-import-analysis-result",components:{AppButton:O["a"]}})],re);var le=re,oe=le,ue=Object(D["a"])(oe,ae,ne,!1,null,null,null);ue.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/import-analysis-result.vue";var ce=ue.exports,pe=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},de=function(e){Object(o["a"])(a,e);var t=Object(u["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(l["a"])(a,[{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.updateAnalysis(this.analysis);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateAnalysis",value:function(e){this.analysis=e,this.updateAnalysisState&&this.importAnalysisResult&&(this.updateAnalysisState.updateAnalysis(e),this.importAnalysisResult.updateAnalysis(e))}},{key:"onUpdateAnalysis",value:function(){this.$emit("updateAnalysis")}}]),a}(f["a"]);pe([Object(p["b"])({required:!0})],de.prototype,"analysis",void 0),pe([Object(p["c"])()],de.prototype,"updateAnalysisState",void 0),pe([Object(p["c"])()],de.prototype,"importAnalysisResult",void 0),de=pe([Object(p["a"])({name:"app-edit-analysis-result-admin",components:{AppUpdateAnalysisState:te,AppImportAnalysisResult:ce}})],de);var fe=de,he=fe,ye=Object(D["a"])(he,H,W,!1,null,null,null);ye.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/edit-analysis-admin.vue";var ve=ye.exports,be=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},me=function(e){Object(o["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.analysis=null,e}return Object(l["a"])(a,[{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateAnalysis(this.$route.params.id);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onUpdateAnalysis",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateAnalysis(this.analysis.id);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateAnalysis",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h["a"].getAnalysis(t);case 3:if(this.analysis=e.sent,!this.downloadAnalysisFiles||!this.editAnalysisAdmin){e.next=9;break}return e.next=7,this.downloadAnalysisFiles.updateAnalysis(this.analysis);case 7:return e.next=9,this.editAnalysisAdmin.updateAnalysis(this.analysis);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),d["a"].showError(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(t){return e.apply(this,arguments)}return t}()}]),a}(f["a"]);be([Object(p["c"])()],me.prototype,"downloadAnalysisFiles",void 0),be([Object(p["c"])()],me.prototype,"editAnalysisAdmin",void 0),me=be([Object(p["a"])({name:"app-edit-analysis",components:{AppContent:y["a"],AppAnalysisUpload:I,AppDownloadAnalysisFiles:K,AppEditAnalysisAdmin:ve}})],me);var ge=me,we=ge,Oe=(a(318),Object(D["a"])(we,n,s,!1,null,null,null));Oe.options.__file="src/app/analysis/edit-analysis/edit-analysis.vue";t["default"]=Oe.exports}}]);