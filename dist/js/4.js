(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{242:function(e,t,n){"use strict";var r=n(46),a=n(33),i=n(21),s=n(184),o="toString",l=RegExp.prototype,c=l[o],u=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),p=c.name!=o;(u||p)&&r(RegExp.prototype,o,(function(){var e=a(this),t=String(e.source),n=e.flags,r=String(void 0===n&&e instanceof RegExp&&!("flags"in l)?s.call(e):n);return"/"+t+"/"+r}),{unsafe:!0})},243:function(e,t,n){},244:function(e,t,n){"use strict";var r,a=n(24),i=n(25),s=n(29),o=n(28),l=n(15);(function(e){e["stopLoading"]="stop-loading",e["startLoading"]="start-loading"})(r||(r={}));var c=function(e){Object(s["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n,[{key:"onStopLoading",value:function(e){this.$on(r.stopLoading,e)}},{key:"onStartLoading",value:function(e){this.$on(r.startLoading,e)}},{key:"stopLoading",value:function(){this.$emit(r.stopLoading)}},{key:"startLoading",value:function(){this.$emit(r.startLoading)}}]),n}(l["default"]),u=new c;t["a"]=u},245:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-button",{class:e.cls,attrs:{variant:e.variant,type:e.type,disabled:e.isDisabled},on:{click:e.onClick}},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"app-button-loading"},[n("b-spinner",{attrs:{small:""}})],1),e._t("default")],2)},a=[];r._withStripped=!0;var i=n(24),s=n(25),o=n(29),l=n(28),c=n(45),u=(n(61),n(15)),p=n(32),d=n(244),f=function(e,t,n,r){var a,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},v=function(e){Object(o["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.loading=!1,e.disabled=!1,e}return Object(s["a"])(n,[{key:"created",value:function(){var e=this;d["a"].onStopLoading((function(){e.stopLoading()})),d["a"].onStartLoading((function(){e.startLoading()}))}},{key:"isDisabled",get:function(){return this.loading||this.disabled}},{key:"stopLoading",value:function(){this.loading=!1}},{key:"startLoading",value:function(){this.loading=!0}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}},{key:"onClick",value:function(e){this.$emit("click",e)}}]),n}(u["default"]);f([Object(p["b"])({default:"button"})],v.prototype,"type",void 0),f([Object(p["b"])({default:""})],v.prototype,"cls",void 0),f([Object(p["b"])({default:"primary"})],v.prototype,"variant",void 0),v=f([Object(p["a"])({name:"app-button"})],v);var m=v,b=m,h=(n(246),n(39)),g=Object(h["a"])(b,r,a,!1,null,null,null);g.options.__file="src/app/shared/components/app-button/app-button.vue";t["a"]=g.exports},246:function(e,t,n){"use strict";n(243)},250:function(e,t,n){},253:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"app-table-container "+(e.size?"app-table-container-"+e.size:"")},[e._t("default")],2)},a=[];r._withStripped=!0;var i=n(24),s=n(29),o=n(28),l=n(45),c=(n(61),n(15)),u=n(32),p=function(e,t,n,r){var a,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":Object(l["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},d=function(e){Object(s["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return n}(c["default"]);p([Object(u["b"])({default:""})],d.prototype,"size",void 0),d=p([u["a"]],d);var f=d,v=f,m=(n(256),n(39)),b=Object(m["a"])(v,r,a,!1,null,null,null);b.options.__file="src/app/shared/components/app-table-container/app-table-container.vue";t["a"]=b.exports},254:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},255:function(e,t,n){},256:function(e,t,n){"use strict";n(250)},258:function(e,t,n){"use strict";var r=n(19),a=n(259).trim,i=n(260);r({target:"String",proto:!0,forced:i("trim")},{trim:function(){return a(this)}})},259:function(e,t,n){var r=n(77),a=n(254),i="["+a+"]",s=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),l=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(s,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:l(1),end:l(2),trim:l(3)}},260:function(e,t,n){var r=n(21),a=n(254),i="​᠎";e.exports=function(e){return r((function(){return!!a[e]()||i[e]()!=i||a[e].name!==e}))}},261:function(e,t,n){"use strict";n(255)},262:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{staticClass:"app-modal-form",attrs:{id:e.id,"ok-title":e.okTitle},scopedSlots:e._u([{key:"modal-title",fn:function(){return[n("div",{staticClass:"app-modal-form-title"},[n("h2",[e._v(e._s(e.title))]),e.subtitle?n("div",{staticClass:"app-modal-form-title-subtitle grayed",domProps:{innerHTML:e._s(e.subtitle)}}):e._e()])]},proxy:!0},{key:"modal-footer",fn:function(){return[n("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return e.$bvModal.hide(e.id)}}},[e._v(e._s(e.$t("cancel")))]),n("app-button",{on:{click:e.onSubmit}},[e._v(e._s(e.okTitle))])]},proxy:!0}])},[n("b-alert",{staticClass:"app-modal-form-alert",attrs:{variant:"danger",dismissible:""},domProps:{innerHTML:e._s(e.alertMsg)},model:{value:e.showAlert,callback:function(t){e.showAlert=t},expression:"showAlert"}}),n("form",{on:{submit:e.onSubmit}},[e._t("default")],2)],1)},a=[];r._withStripped=!0;var i=n(24),s=n(25),o=n(29),l=n(28),c=n(45),u=(n(61),n(15)),p=n(32),d=n(245),f=function(e,t,n,r){var a,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},v=function(e){Object(o["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.showAlert=!1,e.alertMsg="",e}return Object(s["a"])(n,[{key:"show",value:function(){this.$bvModal.show(this.id||"")}},{key:"hide",value:function(){this.$bvModal.hide(this.id||"")}},{key:"alertError",value:function(e){this.showAlert=!0,console.error(e),"string"===typeof e?this.alertMsg=e:(this.alertMsg=e.error,e.details&&(this.alertMsg+="<br><small>Details: "+e.details+"</small>"))}},{key:"onSubmit",value:function(e){this.$emit("submit")}},{key:"hideAlert",value:function(){this.showAlert=!1,this.alertMsg=""}}]),n}(u["default"]);f([Object(p["b"])({required:!0})],v.prototype,"id",void 0),f([Object(p["b"])({required:!0})],v.prototype,"title",void 0),f([Object(p["b"])()],v.prototype,"subtitle",void 0),f([Object(p["b"])({required:!0})],v.prototype,"okTitle",void 0),v=f([Object(p["a"])({name:"app-modal-form",components:{AppButton:d["a"]}})],v);var m=v,b=m,h=(n(261),n(39)),g=Object(h["a"])(b,r,a,!1,null,null,null);g.options.__file="src/app/shared/components/app-modal/app-modal-form.vue";t["a"]=g.exports},341:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-settings-users"},[n("div",{staticClass:"app-settings-users-table-toolbar"},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.invite-modal",modifiers:{"invite-modal":!0}}],staticClass:"btn-invite",attrs:{variant:"primary"},on:{click:function(t){return e.showInviteUserModal()}}},[e._v(e._s(e.$t("invite")))])],1),n("div",{staticClass:"clearfix"}),n("app-table-container",[n("b-table",{attrs:{fields:e.columns,items:e.rows,"head-variant":"light",hover:""},scopedSlots:e._u([{key:"cell(name)",fn:function(t){return[t.item.name.userName?n("span",[e._v(" "+e._s(t.item.name.userName)),n("br"),n("small",{staticClass:"grayed"},[e._v(e._s(t.item.name.email))])]):n("span",[e._v(e._s(t.item.name.email))])]}},{key:"cell(state)",fn:function(t){return[e._v(" "+e._s(e.$t(t.item.state.userState))+" "),t.item.state.date?n("span",[n("br"),n("small",{staticClass:"grayed"},[e._v(e._s(t.item.state.date))])]):e._e()]}},{key:"cell(role)",fn:function(t){return[e._v(" "+e._s(t.item.role.userRole)+" "),t.item.role.customer?n("span",[n("br"),n("small",{staticClass:"grayed"},[e._v(e._s(t.item.role.customer))])]):e._e()]}},{key:"cell(actions)",fn:function(t){return[n("div",{staticClass:"hover-cell pull-right"},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:"pending"==t.item.state.userState,expression:"row.item.state.userState == 'pending'"}],attrs:{variant:"secondary",size:"sm",title:e.$t("resend-invitation")},on:{click:function(n){return e.onResendInvitationClick(t.item)}}},[n("b-icon",{attrs:{icon:"envelope"}})],1),n("b-button",{attrs:{variant:"secondary",size:"sm",title:e.$t("locked"===t.item.state.userState?"unlock":"lock")},on:{click:function(n){return e.onUnLockClick(t.item)}}},[n("b-icon",{attrs:{icon:"locked"===t.item.state.userState?"unlock":"lock"}})],1)],1)]}}])})],1),n("app-modal-form",{ref:"appInviteModal",attrs:{id:"inivite-modal",title:e.$t("invite-new-user"),subtitle:e.$t("invite-new-user_descr"),"ok-title":e.$t("invite")},on:{submit:e.inviteUser}},[n("b-form-group",{attrs:{label:e.$t("email"),"label-for":"email"}},[n("b-form-input",{attrs:{id:"email",type:"email",placeholder:e.$t("email"),required:""},model:{value:e.newUser.email,callback:function(t){e.$set(e.newUser,"email",t)},expression:"newUser.email"}})],1),n("b-row",[n("b-col",[n("b-form-group",{attrs:{label:e.$t("role"),"label-for":"role"}},[n("b-form-select",{attrs:{id:"role",options:e.roles},on:{change:e.onRoleSelectionChanged},model:{value:e.newUser.role,callback:function(t){e.$set(e.newUser,"role",t)},expression:"newUser.role"}})],1)],1),n("b-col",[n("b-form-group",{attrs:{label:e.$t("customer"),"label-for":"customer"}},[n("b-form-select",{attrs:{id:"customer",options:e.customers,disabled:e.customerSelectionDisabled},model:{value:e.newUser.customer_id,callback:function(t){e.$set(e.newUser,"customer_id",t)},expression:"newUser.customer_id"}})],1)],1)],1)],1)],1)},a=[];r._withStripped=!0;var i,s=n(16),o=n(24),l=n(25),c=n(29),u=n(28),p=n(45),d=(n(62),n(61),n(37),n(242),n(121),n(258),n(120),n(125),n(15)),f=n(32),v=n(253),m=n(262),b=n(75);(function(e){e["REGISTERED"]="REGISTERED",e["PENDING"]="PENDING",e["UNKNOWN"]="UNKNOWN"})(i||(i={}));var h=n(63),g=n(50),y=n(244),w=function(e,t,n,r){var a,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},k=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.columns=[],e.rows=[],e.customers=[],e.roles=[{value:g["a"].SUPER_ADMIN,text:g["a"].SUPER_ADMIN},{value:g["a"].CUSTOMER_ADMIN,text:g["a"].CUSTOMER_ADMIN}],e.newUser=e.initialInviteUser(),e.customerSelectionDisabled=!0,e}return Object(l["a"])(n,[{key:"created",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.columns=[{key:"name",label:this.$t("name").toString()},{key:"state",label:this.$t("state").toString()},{key:"role",label:this.$t("role").toString()},{key:"actions",label:""}],e.next=3,this.updateUserRows();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateUserRows",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,b["a"].getUsers();case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),h["a"].showError(e.t0);case 10:this.rows=t.map((function(e){var t="",r=e.state.toLowerCase();return e.is_locked?r="locked":e.state===i.REGISTERED?t=n.$t("registered-at").toString()+" "+new Date(Date.parse(e.registered_at)).toLocaleString():e.state===i.PENDING&&(t=n.$t("invited-at").toString()+" "+new Date(Date.parse(e.invited_at)).toLocaleString()),{id:e.id,name:{userName:((e.first_name||"")+" "+(e.last_name||"")).trim(),email:e.email},state:{date:t,userState:r},role:{userRole:e.role.name.toString(),customer:e.role.name===g["a"].CUSTOMER_ADMIN&&e.customer?e.customer.name:null}}}));case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"showInviteUserModal",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.newUser=this.initialInviteUser(),this.customerSelectionDisabled=!0,this.appInviteModal.show(),e.prev=3,e.next=6,b["a"].getCustomers();case 6:this.customers=e.sent.map((function(e){return{value:e.id,text:e.name}})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),this.appInviteModal.alertError(e.t0.error);case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"inviteUser",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.getErrorInviteUserForm(),!t){e.next=5;break}return this.appInviteModal.alertError(t),y["a"].stopLoading(),e.abrupt("return");case 5:return this.appInviteModal.hideAlert(),e.prev=6,y["a"].startLoading(),e.next=10,b["a"].inviteUser(this.newUser);case 10:return this.appInviteModal.hide(),h["a"].showSuccessAlert(this.$t("user-invited-successfully").toString()),e.next=14,this.updateUserRows();case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](6),this.appInviteModal.alertError(e.t0.error);case 19:return e.prev=19,y["a"].stopLoading(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[6,16,19,22]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"initialInviteUser",value:function(){return{email:"",role:""}}},{key:"onRoleSelectionChanged",value:function(){this.newUser.role!==g["a"].CUSTOMER_ADMIN?(this.customerSelectionDisabled=!0,this.newUser.customer_id=void 0):this.customerSelectionDisabled=!1}},{key:"onResendInvitationClick",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b["a"].resendUserInvitation(t.id);case 3:h["a"].showSuccessAlert(this.$t("user-invitation-sent-successfully").toString()),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),h["a"].showError(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onUnLockClick",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n="locked"!==t.state.userState,e.next=4,b["a"].unLockUser(t.id,n);case 4:return h["a"].showSuccessAlert(this.$t(n?"user-locked-successfully":"user-unlocked-successfully").toString()),e.next=7,this.updateUserRows();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),h["a"].showError(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getErrorInviteUserForm",value:function(){return/^\S+@\S+$/.test(this.newUser.email.trim())?-1===Object.keys(g["a"]).indexOf(this.newUser.role)?"INVALID_OR_MISSING_ROLE":this.newUser.role!==g["a"].CUSTOMER_ADMIN||this.newUser.customer_id?"":"CUSOMTER_REQUIRED_FOR_CUSTOMER_ADMIN":"INVALID_OR_MISSING_EMAIL"}}]),n}(d["default"]);w([Object(f["c"])()],k.prototype,"appInviteModal",void 0),k=w([Object(f["a"])({name:"app-settings-users",components:{AppTableContainer:v["a"],AppModalForm:m["a"]}})],k);var _=k,O=_,R=n(39),S=Object(R["a"])(O,r,a,!1,null,null,null);S.options.__file="src/app/settings/users/users.vue";t["default"]=S.exports}}]);