(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{260:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},263:function(e,t,r){"use strict";var n=r(19),a=r(264).trim,s=r(265);n({target:"String",proto:!0,forced:s("trim")},{trim:function(){return a(this)}})},264:function(e,t,r){var n=r(79),a=r(260),s="["+a+"]",i=RegExp("^"+s+s+"*"),o=RegExp(s+s+"*$"),c=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(i,"")),2&e&&(r=r.replace(o,"")),r}};e.exports={start:c(1),end:c(2),trim:c(3)}},265:function(e,t,r){var n=r(21),a=r(260),s="​᠎";e.exports=function(e){return n((function(){return!!a[e]()||s[e]()!=s||a[e].name!==e}))}},371:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-settings-users"},[r("div",{staticClass:"app-settings-users-table-toolbar"},[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.invite-modal",modifiers:{"invite-modal":!0}}],staticClass:"btn-invite",attrs:{variant:"primary"},on:{click:function(t){return e.showInviteUserModal()}}},[e._v(e._s(e.$t("invite")))])],1),r("div",{staticClass:"clearfix"}),r("app-table-container",[r("b-table",{attrs:{fields:e.columns,items:e.rows,"head-variant":"light",hover:""},scopedSlots:e._u([{key:"cell(name)",fn:function(t){return[t.item.name.userName?r("span",[e._v(" "+e._s(t.item.name.userName)),r("br"),r("small",{staticClass:"grayed"},[e._v(e._s(t.item.name.email))])]):r("span",[e._v(e._s(t.item.name.email))])]}},{key:"cell(state)",fn:function(t){return[e._v(" "+e._s(e.$t(t.item.state.userState))+" "),t.item.state.date?r("span",[r("br"),r("small",{staticClass:"grayed"},[e._v(e._s(t.item.state.date))])]):e._e()]}},{key:"cell(role)",fn:function(t){return[e._v(" "+e._s(t.item.role.userRole)+" "),t.item.role.customer?r("span",[r("br"),r("small",{staticClass:"grayed"},[e._v(e._s(t.item.role.customer))])]):e._e()]}},{key:"cell(actions)",fn:function(t){return[r("div",{staticClass:"hover-cell pull-right"},[r("b-button",{directives:[{name:"show",rawName:"v-show",value:"pending"==t.item.state.userState,expression:"row.item.state.userState == 'pending'"}],attrs:{variant:"secondary",size:"sm",title:e.$t("resend-invitation")},on:{click:function(r){return e.onResendInvitationClick(t.item)}}},[r("b-icon",{attrs:{icon:"envelope"}})],1),r("b-button",{attrs:{variant:"secondary",size:"sm",title:e.$t("locked"===t.item.state.userState?"unlock":"lock")},on:{click:function(r){return e.onUnLockClick(t.item)}}},[r("b-icon",{attrs:{icon:"locked"===t.item.state.userState?"unlock":"lock"}})],1)],1)]}}])})],1),r("app-modal-form",{ref:"appInviteModal",attrs:{id:"inivite-modal",title:e.$t("invite-new-user"),subtitle:e.$t("invite-new-user_descr"),"ok-title":e.$t("invite")},on:{submit:e.inviteUser}},[r("b-form-group",{attrs:{label:e.$t("email"),"label-for":"email"}},[r("b-form-input",{attrs:{id:"email",type:"email",placeholder:e.$t("email"),required:""},model:{value:e.newUser.email,callback:function(t){e.$set(e.newUser,"email",t)},expression:"newUser.email"}})],1),r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:e.$t("role"),"label-for":"role"}},[r("b-form-select",{attrs:{id:"role",options:e.roles},on:{change:e.onRoleSelectionChanged},model:{value:e.newUser.role,callback:function(t){e.$set(e.newUser,"role",t)},expression:"newUser.role"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:e.$t("customer"),"label-for":"customer"}},[r("b-form-select",{attrs:{id:"customer",options:e.customers,disabled:e.customerSelectionDisabled},model:{value:e.newUser.customer_id,callback:function(t){e.$set(e.newUser,"customer_id",t)},expression:"newUser.customer_id"}})],1)],1)],1)],1)],1)},a=[];n._withStripped=!0;var s,i=r(16),o=r(24),c=r(25),l=r(29),u=r(28),m=r(45),p=(r(62),r(61),r(37),r(248),r(123),r(263),r(122),r(127),r(15)),v=r(32),d=r(261),f=r(276),h=r(77);(function(e){e["REGISTERED"]="REGISTERED",e["PENDING"]="PENDING",e["UNKNOWN"]="UNKNOWN"})(s||(s={}));var b=r(63),w=r(50),g=r(250),k=function(e,t,r,n){var a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(m["a"])(Reflect))&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(i=(s<3?a(i):s>3?a(t,r,i):a(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},_=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(o["a"])(this,r),e=t.apply(this,arguments),e.columns=[],e.rows=[],e.customers=[],e.roles=[{value:w["a"].SUPER_ADMIN,text:w["a"].SUPER_ADMIN},{value:w["a"].CUSTOMER_ADMIN,text:w["a"].CUSTOMER_ADMIN}],e.newUser=e.initialInviteUser(),e.customerSelectionDisabled=!0,e}return Object(c["a"])(r,[{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.columns=[{key:"name",label:this.$t("name").toString()},{key:"state",label:this.$t("state").toString()},{key:"role",label:this.$t("role").toString()},{key:"actions",label:""}],e.next=3,this.updateUserRows();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateUserRows",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,h["a"].getUsers();case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),b["a"].showError(e.t0);case 10:this.rows=t.map((function(e){var t="",n=e.state.toLowerCase();return e.is_locked?n="locked":e.state===s.REGISTERED?t=r.$t("registered-at").toString()+" "+new Date(Date.parse(e.registered_at)).toLocaleString():e.state===s.PENDING&&(t=r.$t("invited-at").toString()+" "+new Date(Date.parse(e.invited_at)).toLocaleString()),{id:e.id,name:{userName:((e.first_name||"")+" "+(e.last_name||"")).trim(),email:e.email},state:{date:t,userState:n},role:{userRole:e.role.name.toString(),customer:e.role.name===w["a"].CUSTOMER_ADMIN&&e.customer?e.customer.name:null}}}));case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"showInviteUserModal",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.newUser=this.initialInviteUser(),this.customerSelectionDisabled=!0,this.appInviteModal.show(),e.prev=3,e.next=6,h["a"].getCustomers();case 6:this.customers=e.sent.map((function(e){return{value:e.id,text:e.name}})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),this.appInviteModal.alertError(e.t0.error);case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"inviteUser",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.getErrorInviteUserForm(),!t){e.next=5;break}return this.appInviteModal.alertError(t),g["a"].stopLoading(),e.abrupt("return");case 5:return this.appInviteModal.hideAlert(),e.prev=6,g["a"].startLoading(),e.next=10,h["a"].inviteUser(this.newUser);case 10:return this.appInviteModal.hide(),b["a"].showSuccessAlert(this.$t("user-invited-successfully").toString()),e.next=14,this.updateUserRows();case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](6),this.appInviteModal.alertError(e.t0.error);case 19:return e.prev=19,g["a"].stopLoading(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[6,16,19,22]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"initialInviteUser",value:function(){return{email:"",role:""}}},{key:"onRoleSelectionChanged",value:function(){this.newUser.role!==w["a"].CUSTOMER_ADMIN?(this.customerSelectionDisabled=!0,this.newUser.customer_id=void 0):this.customerSelectionDisabled=!1}},{key:"onResendInvitationClick",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h["a"].resendUserInvitation(t.id);case 3:b["a"].showSuccessAlert(this.$t("user-invitation-sent-successfully").toString()),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),b["a"].showError(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onUnLockClick",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r="locked"!==t.state.userState,e.next=4,h["a"].unLockUser(t.id,r);case 4:return b["a"].showSuccessAlert(this.$t(r?"user-locked-successfully":"user-unlocked-successfully").toString()),e.next=7,this.updateUserRows();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),b["a"].showError(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getErrorInviteUserForm",value:function(){return/^\S+@\S+$/.test(this.newUser.email.trim())?-1===Object.keys(w["a"]).indexOf(this.newUser.role)?"INVALID_OR_MISSING_ROLE":this.newUser.role!==w["a"].CUSTOMER_ADMIN||this.newUser.customer_id?"":"CUSOMTER_REQUIRED_FOR_CUSTOMER_ADMIN":"INVALID_OR_MISSING_EMAIL"}}]),r}(p["default"]);k([Object(v["c"])()],_.prototype,"appInviteModal",void 0),_=k([Object(v["a"])({name:"app-settings-users",components:{AppTableContainer:d["a"],AppModalForm:f["a"]}})],_);var S=_,R=S,U=r(39),I=Object(U["a"])(R,n,a,!1,null,null,null);I.options.__file="src/app/settings/users/users.vue";t["default"]=I.exports}}]);