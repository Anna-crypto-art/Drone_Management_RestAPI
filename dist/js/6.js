(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{250:function(e,t,a){},252:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"app-table-container "+(e.size?"app-table-container-"+e.size:"")},[e._t("default")],2)},n=[];s._withStripped=!0;var i=a(25),r=a(24),l=a(31),o=a(30),u=a(40),c=(a(61),a(26),a(15)),p=a(33),d=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},m=function(e){Object(l["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a)}(c["default"]);d([Object(p["b"])({default:""})],m.prototype,"size",void 0),m=d([p["a"]],m);var f=m,h=f,v=(a(255),a(39)),b=Object(v["a"])(h,s,n,!1,null,null,null);b.options.__file="src/app/shared/components/app-table-container/app-table-container.vue";t["a"]=b.exports},255:function(e,t,a){"use strict";a(250)},257:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},258:function(e,t,a){},260:function(e,t,a){"use strict";var s=a(18),n=a(262).trim,i=a(263);s({target:"String",proto:!0,forced:i("trim")},{trim:function(){return n(this)}})},262:function(e,t,a){var s=a(76),n=a(257),i="["+n+"]",r=RegExp("^"+i+i+"*"),l=RegExp(i+i+"*$"),o=function(e){return function(t){var a=String(s(t));return 1&e&&(a=a.replace(r,"")),2&e&&(a=a.replace(l,"")),a}};e.exports={start:o(1),end:o(2),trim:o(3)}},263:function(e,t,a){var s=a(20),n=a(257),i="​᠎";e.exports=function(e){return s((function(){return!!n[e]()||i[e]()!=i||n[e].name!==e}))}},264:function(e,t,a){"use strict";a(258)},268:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{staticClass:"app-modal-form",attrs:{id:e.id,"ok-title":e.okTitle,"no-close-on-backdrop":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[a("div",{staticClass:"app-modal-form-title"},[a("h2",[e._v(e._s(e.title))]),e.subtitle?a("div",{staticClass:"app-modal-form-title-subtitle grayed",domProps:{innerHTML:e._s(e.subtitle)}}):e._e()])]},proxy:!0},{key:"modal-footer",fn:function(){return[a("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return e.$bvModal.hide(e.id)}}},[e._v(e._s(e.$t("cancel")))]),a("app-button",{on:{click:e.onSubmit}},[e._v(e._s(e.okTitle))])]},proxy:!0}])},[a("b-alert",{staticClass:"app-modal-form-alert",attrs:{variant:e.alertVariant,dismissible:""},domProps:{innerHTML:e._s(e.alertMsg)},model:{value:e.showAlert,callback:function(t){e.showAlert=t},expression:"showAlert"}}),a("form",{on:{submit:e.onSubmit}},[e._t("default")],2)],1)},n=[];s._withStripped=!0;var i=a(24),r=a(25),l=a(31),o=a(30),u=a(40),c=(a(61),a(26),a(15)),p=a(33),d=a(246),m=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},f=function(e){Object(l["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.showAlert=!1,e.alertMsg="",e.alertVariant="default",e}return Object(r["a"])(a,[{key:"show",value:function(){this.$bvModal.show(this.id||"")}},{key:"hide",value:function(){this.hideAlert(),this.$bvModal.hide(this.id||"")}},{key:"alertError",value:function(e){if(this.alertVariant="danger",this.showAlert=!0,console.error(e),"string"===typeof e)this.alertMsg=e;else{this.alertMsg=e.error;var t=e.details||e.message;t&&(this.alertMsg+="<br><small>Details: "+t+"</small>")}}},{key:"alertInfo",value:function(e){this.alertVariant="primary",this.showAlert=!0,this.alertMsg=e}},{key:"onSubmit",value:function(e){this.$emit("submit")}},{key:"hideAlert",value:function(){this.showAlert=!1,this.alertMsg=""}}]),a}(c["default"]);m([Object(p["b"])({required:!0})],f.prototype,"id",void 0),m([Object(p["b"])({required:!0})],f.prototype,"title",void 0),m([Object(p["b"])()],f.prototype,"subtitle",void 0),m([Object(p["b"])({required:!0})],f.prototype,"okTitle",void 0),f=m([Object(p["a"])({name:"app-modal-form",components:{AppButton:d["a"]}})],f);var h=f,v=h,b=(a(264),a(39)),y=Object(b["a"])(v,s,n,!1,null,null,null);y.options.__file="src/app/shared/components/app-modal/app-modal-form.vue";t["a"]=y.exports},278:function(e,t,a){},279:function(e,t,a){},312:function(e,t,a){"use strict";a(278)},313:function(e,t,a){"use strict";a(279)},347:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-content",{attrs:{title:e.$t("analysis-overview"),subtitle:e.$t("analysis-overview_descr")}},[a("div",{staticClass:"app-analysis"},[a("router-link",{attrs:{to:{name:"AnalysisNew"}}},[a("b-button",{attrs:{variant:"primary"}},[e._v(e._s(e.createNewAnalysisBtnText))])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.plants,expression:"plants"}],staticClass:"app-analysis-plants-filter pull-right"},[a("b-form-select",{staticClass:"app-analysis-plants-filter-select",attrs:{id:"plants",options:e.plants},on:{change:e.onPlantSelectionChanged},model:{value:e.selectedPlantId,callback:function(t){e.selectedPlantId=t},expression:"selectedPlantId"}}),a("label",{staticClass:"app-analysis-plants-filter-label",attrs:{for:"plants"}},[e._v(e._s(e.$t("plant")))])],1),a("div",{staticClass:"clear"}),a("app-table-container",[a("b-table",{attrs:{hover:"",fields:e.columns,items:e.analysisRows,"head-variant":"light","show-empty":"",emptyText:e.$t("no-data"),busy:e.isLoading},scopedSlots:e._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center"},[a("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"empty",fn:function(t){return[a("span",{staticClass:"grayed"},[e._v(e._s(t.emptyText))])]}},{key:"head(actions)",fn:function(){return[a("span",{staticClass:"hidden"},[e._v(e._s(e.$t("actions")))])]},proxy:!0},{key:"cell(name)",fn:function(t){return[a("router-link",{attrs:{to:{name:"EditAnalysis",params:{id:t.item.id}}}},[e._v(e._s(t.item.name))])]}},{key:"cell(user)",fn:function(t){return[t.item.user.userName?a("span",[e._v(" "+e._s(t.item.user.userName)),a("br"),a("small",{staticClass:"grayed"},[e._v(e._s(t.item.user.email))])]):a("span",[e._v(e._s(t.item.user.email))])]}},{key:"cell(state)",fn:function(t){return[t.item.state?a("div",[e._v(" "+e._s(e.$t(t.item.state.state.name))+" "),"UPLOADING"===t.item.state.state.name?a("span",[e._v(" "+e._s(e.uploadStateProcess))]):e._e(),a("br"),a("small",{staticClass:"grayed"},[e._v(e._s(e.trans(e.getTimeDiff(t.item.state.started_at))))])]):a("div",[e._v("UNKNOWN")])]}},{key:"cell(hasResults)",fn:function(e){return[a("b-icon",{directives:[{name:"show",rawName:"v-show",value:e.item.analysisResultId,expression:"row.item.analysisResultId"}],staticClass:"font-xl text-success",attrs:{icon:"check"}})]}},{key:"cell(actions)",fn:function(t){return[a("div",{staticClass:"hover-cell pull-right"},[a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.isSuperAdmin,expression:"isSuperAdmin"}],attrs:{variant:"secondary",size:"sm",title:e.$t("manage-result-files")},on:{click:function(a){return e.onManageResultFilesClick(t.item)}}},[a("b-icon",{attrs:{icon:"hammer"}})],1),t.item.analysisResultId?a("router-link",{attrs:{title:e.$t("show-results"),to:{name:"Plant",params:{id:t.item.plantId},query:{view:"table",result:t.item.analysisResultId}}}},[a("b-button",{attrs:{variant:"primary",size:"sm"}},[a("b-icon",{attrs:{icon:"graph-up"}})],1)],1):e._e()],1),a("div",{staticClass:"clearfix"})]}}])})],1),a("app-modal-form",{ref:"appManageResultFilesModal",attrs:{id:"manage-result-files-modal",title:e.$t("manage-result-files"),subtitle:e.$t("manage-result-files_descr"),"ok-title":e.$t("apply")},on:{submit:e.saveManageResultFiles}},[a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.manageImportFiles.analysisResultId,expression:"manageImportFiles.analysisResultId"}]},[a("b-form-checkbox",{attrs:{id:"removeAllAnalysisResultFiles"},model:{value:e.manageImportFiles.removeAllAnalysisResultFiles,callback:function(t){e.$set(e.manageImportFiles,"removeAllAnalysisResultFiles",t)},expression:"manageImportFiles.removeAllAnalysisResultFiles"}},[e._v(" "+e._s(e.$t("remove-result-files"))+" ("+e._s(e.manageImportFiles.importedResultFiles)+") ")])],1),a("b-form-group",{attrs:{label:e.$t("select-json-result-file-import")}},[a("b-form-file",{attrs:{accept:".json"},model:{value:e.manageImportFiles.jsonFile,callback:function(t){e.$set(e.manageImportFiles,"jsonFile",t)},expression:"manageImportFiles.jsonFile"}})],1),a("b-form-group",{attrs:{label:e.$t("select-result-image-files")}},[a("b-form-file",{attrs:{accept:"image/png, image/jpeg",multiple:""},model:{value:e.manageImportFiles.imageFiles,callback:function(t){e.$set(e.manageImportFiles,"imageFiles",t)},expression:"manageImportFiles.imageFiles"}})],1)],1)],1)])},n=[];s._withStripped=!0;var i=a(64),r=a(16),l=a(24),o=a(25),u=a(31),c=a(30),p=a(40),d=(a(62),a(61),a(26),a(243),a(127),a(96),a(95),a(260),a(33)),m=a(79),f=a(252),h=a(74),v=a(63),b=a(245),y=a(259),g=a(77),R=a(261),w=a(268),_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-modal-form-info-area"},[e._t("default")],2)},k=[];_._withStripped=!0;var F=a(15),I=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},j=function(e){Object(u["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(l["a"])(this,a),t.apply(this,arguments)}return Object(o["a"])(a)}(F["default"]);j=I([Object(d["a"])({name:"app-modal-form-info-area"})],j);var O=j,x=O,A=(a(312),a(39)),S=Object(A["a"])(x,_,k,!1,null,null,null);S.options.__file="src/app/shared/components/app-modal/app-modal-form-info-area.vue";var M=S.exports,$=a(49),P=function(e,t,a,s){var n,i=arguments.length,r=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(i<3?n(r):i>3?n(t,a,r):n(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},C=function(e){Object(u["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.columns=[],e.plants=null,e.selectedPlantId=null,e.analysisRows=[],e.isLoading=!0,e.createNewAnalysisBtnText="",e.uploadStateProcess="",e.manageImportFiles={analysisResultId:"",removeAllAnalysisResultFiles:!1,importedResultFiles:""},e}return Object(o["a"])(a,[{key:"created",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.createNewAnalysisBtnText=this.$t("new-data-upload").toString(),this.columns=[{key:"name",label:this.$t("name").toString(),sortable:!0},{key:"plant",label:this.$t("plant").toString(),sortable:!0},{key:"date",label:this.$t("created-at").toString(),sortable:!0},{key:"user",label:this.$t("created-by").toString(),sortable:!0},{key:"state",label:this.$t("state").toString(),sortable:!0},{key:"hasResults",label:this.$t("has-results").toString()},{key:"actions"}],e.next=4,this.getPlants();case 4:return e.next=6,this.updateAnalysisRows();case 6:this.checkUploadState();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){this.registerUploadEvents()}},{key:"registerUploadEvents",value:function(){var e=this;y["a"].on(R["a"].PROGRESS,(function(){e.updateToUploadState()})),y["a"].on(R["a"].COMPLETED,(function(){e.createNewAnalysisBtnText=e.$t("new-data-upload").toString(),e.updateTableRowState(e.$t("PICK_ME_UP").toString())})),y["a"].on(R["a"].FAILED,(function(){e.updateTableRowState(e.$t("UPLOAD_FAILED").toString())}))}},{key:"checkUploadState",value:function(){y["a"].hasState(R["b"].UPLOADING)&&this.updateToUploadState()}},{key:"trans",value:function(e){return this.$t.apply(this,Object(i["a"])(e)).toString()}},{key:"onManageResultFilesClick",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.manageImportFiles.analysisId=t.id,this.manageImportFiles.analysisResultId=t.analysisResultId,this.manageImportFiles.removeAllAnalysisResultFiles=!1,!this.manageImportFiles.analysisResultId){e.next=7;break}return e.next=6,h["a"].getAnalysisResultFiles(this.manageImportFiles.analysisResultId);case 6:this.manageImportFiles.importedResultFiles=e.sent.map((function(e){return e.filename})).join(", ");case 7:this.appManageResultFilesModal.show();case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onPlantSelectionChanged",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateAnalysisRows();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveManageResultFiles",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,b["a"].startLoading(),t=function(){s.appManageResultFilesModal.hide(),v["a"].showSuccessAlert(s.$t("success-managing-result-files").toString()),b["a"].stopLoading(),s.updateAnalysisRows()},!this.manageImportFiles.analysisResultId||!this.manageImportFiles.removeAllAnalysisResultFiles){e.next=6;break}return e.next=6,h["a"].deleteAnalysisResult(this.manageImportFiles.analysisResultId);case 6:if(!this.manageImportFiles.jsonFile){e.next=14;break}return this.appManageResultFilesModal.alertInfo("Uploading..."),e.next=10,h["a"].importAnalysisResult(this.manageImportFiles.jsonFile,this.manageImportFiles.analysisId,this.manageImportFiles.imageFiles,(function(e){s.appManageResultFilesModal.alertInfo("Uploading... "+e+"%")}));case 10:a=e.sent,h["a"].waitForTask(a.id,(function(e){b["a"].stopLoading(),"SUCCESS"===e.state?t():"FAILURE"===e.state&&s.appManageResultFilesModal.alertError({error:$["a"].SOMETHING_WENT_WRONG,details:e.result})}),(function(e){s.appManageResultFilesModal.alertInfo(e)})),e.next=15;break;case 14:t();case 15:e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](0),this.appManageResultFilesModal.alertError(e.t0),b["a"].stopLoading();case 21:case"end":return e.stop()}}),e,this,[[0,17]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateToUploadState",value:function(){this.updateTableRowState(Math.round(100*y["a"].progress())+"%")&&(this.createNewAnalysisBtnText=this.$t("return-to-upload").toString())}},{key:"updateTableRowState",value:function(e){var t=y["a"].getMetadata();return!(!this.analysisRows||!t)&&(this.uploadStateProcess=e,!0)}},{key:"updateAnalysisRows",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.prev=1,t=this.selectedPlantId&&{plant_id:this.selectedPlantId}||void 0,e.next=5,h["a"].getAllAnalysis(t);case 5:this.analysisRows=e.sent.map((function(e){var t={id:e.id,name:e.name,date:new Date(Date.parse(e.created_at)).toLocaleString(),user:e.user&&{userName:((e.user.first_name||"")+" "+(e.user.last_name||"")).trim(),email:e.user.email}||"",analysisResultId:e.analysis_result&&(a.isSuperAdmin||e.analysis_result.released)&&e.analysis_result.id||void 0,state:e.current_state,files:e.files,plantId:e.plant.id,plant:e.plant.name};return t})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),v["a"].showError(e.t0);case 11:return e.prev=11,this.isLoading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[1,8,11,14]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPlants",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h["a"].getAllPlants();case 2:t=e.sent,t.length>1&&(this.plants=t.map((function(e){return{value:e.id,text:e.name}})),this.plants.unshift({value:null,text:""}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(g["a"]);P([Object(d["c"])()],C.prototype,"appManageResultFilesModal",void 0),C=P([Object(d["a"])({name:"app-analysis",components:{AppContent:m["a"],AppTableContainer:f["a"],AppModalForm:w["a"],AppModalFormInfoArea:M}})],C);var T=C,E=T,N=(a(313),Object(A["a"])(E,s,n,!1,null,null,null));N.options.__file="src/app/analysis/analysis.vue";t["default"]=N.exports}}]);