(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{244:function(e,t,r){"use strict";var n=r(48),s=r(34),i=r(20),a=r(186),o="toString",l=RegExp.prototype,c=l[o],u=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=o;(u||d)&&n(RegExp.prototype,o,(function(){var e=s(this),t=String(e.source),r=e.flags,n=String(void 0===r&&e instanceof RegExp&&!("flags"in l)?a.call(e):r);return"/"+t+"/"+n}),{unsafe:!0})},245:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-button",{class:e.cls,attrs:{variant:e.variant,type:e.type,disabled:e.isDisabled,size:e.size},on:{click:e.onClick}},[r("span",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"app-button-loading"},[r("b-spinner",{attrs:{small:""}})],1),e._t("default")],2)},s=[];n._withStripped=!0;var i=r(22),a=r(23),o=r(31),l=r(30),c=r(42),u=(r(66),r(26),r(16)),d=r(32),p=function(e,t,r,n){var s,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(t,r,a):s(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},m=function(e){Object(o["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(i["a"])(this,r),t.apply(this,arguments)}return Object(a["a"])(r,[{key:"isDisabled",get:function(){return this.loading||this.disabled}},{key:"onClick",value:function(e){this.$emit("click",e)}}]),r}(u["default"]);p([Object(d["b"])({default:"button"})],m.prototype,"type",void 0),p([Object(d["b"])({default:""})],m.prototype,"cls",void 0),p([Object(d["b"])({default:"primary"})],m.prototype,"variant",void 0),p([Object(d["b"])({default:!1})],m.prototype,"disabled",void 0),p([Object(d["b"])({default:!1})],m.prototype,"loading",void 0),p([Object(d["b"])({default:""})],m.prototype,"size",void 0),m=p([Object(d["a"])({name:"app-button"})],m);var f=m,v=f,h=(r(247),r(41)),b=Object(h["a"])(v,n,s,!1,null,null,null);b.options.__file="src/app/shared/components/app-button/app-button.vue";t["a"]=b.exports},246:function(e,t,r){},247:function(e,t,r){"use strict";r(246)},249:function(e,t,r){},253:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:"app-table-container "+(e.size?"app-table-container-"+e.size:"")},[e._t("default")],2)},s=[];n._withStripped=!0;var i=r(23),a=r(22),o=r(31),l=r(30),c=r(42),u=(r(66),r(26),r(16)),d=r(32),p=function(e,t,r,n){var s,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(t,r,a):s(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},m=function(e){Object(o["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(a["a"])(this,r),t.apply(this,arguments)}return Object(i["a"])(r)}(u["default"]);p([Object(d["b"])({default:""})],m.prototype,"size",void 0),m=p([d["a"]],m);var f=m,v=f,h=(r(255),r(41)),b=Object(h["a"])(v,n,s,!1,null,null,null);b.options.__file="src/app/shared/components/app-table-container/app-table-container.vue";t["a"]=b.exports},254:function(e,t,r){},255:function(e,t,r){"use strict";r(249)},258:function(e,t,r){"use strict";var n=r(18),s=r(60),i=r(43),a=r(20),o=r(132),l=[],c=l.sort,u=a((function(){l.sort(void 0)})),d=a((function(){l.sort(null)})),p=o("sort"),m=u||!d||!p;n({target:"Array",proto:!0,forced:m},{sort:function(e){return void 0===e?c.call(i(this)):c.call(i(this),s(e))}})},261:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},262:function(e,t,r){"use strict";r(254)},263:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-modal",{staticClass:"app-modal-form",attrs:{id:e.id,"ok-title":e.okTitle,"no-close-on-backdrop":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[r("div",{staticClass:"app-modal-form-title"},[e._t("modal-title",[r("h2",[e._v(e._s(e.title))]),e.subtitle?r("div",{staticClass:"app-modal-form-title-subtitle grayed",domProps:{innerHTML:e._s(e.subtitle)}}):e._e()])],2)]},proxy:!0},{key:"modal-footer",fn:function(){return[r("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return e.$bvModal.hide(e.id)}}},[e._v(e._s(e.$t("cancel")))]),r("app-button",{attrs:{loading:e.modalLoading},on:{click:e.onSubmit}},[e._v(e._s(e.okTitle))])]},proxy:!0}],null,!0)},[r("b-alert",{staticClass:"app-modal-form-alert",attrs:{variant:e.alertVariant,dismissible:""},domProps:{innerHTML:e._s(e.alertMsg)},model:{value:e.showAlert,callback:function(t){e.showAlert=t},expression:"showAlert"}}),r("form",{on:{submit:e.onSubmit}},[e._t("default")],2)],1)},s=[];n._withStripped=!0;var i=r(22),a=r(23),o=r(31),l=r(30),c=r(42),u=(r(66),r(26),r(16)),d=r(32),p=r(245),m=function(e,t,r,n){var s,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(t,r,a):s(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},f=function(e){Object(o["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.showAlert=!1,e.alertMsg="",e.alertVariant="default",e}return Object(a["a"])(r,[{key:"show",value:function(){this.$bvModal.show(this.id||"")}},{key:"hide",value:function(){this.hideAlert(),this.$bvModal.hide(this.id||"")}},{key:"alertError",value:function(e){if(this.alertVariant="danger",this.showAlert=!0,console.error(e),"string"===typeof e)this.alertMsg=e;else{this.alertMsg=e.error;var t=e.details||e.message;t&&(this.alertMsg+="<br><small>Details: "+t+"</small>")}}},{key:"alertInfo",value:function(e){this.alertVariant="primary",this.showAlert=!0,this.alertMsg=e}},{key:"onSubmit",value:function(e){this.$emit("submit")}},{key:"hideAlert",value:function(){this.showAlert=!1,this.alertMsg=""}}]),r}(u["default"]);m([Object(d["b"])({required:!0})],f.prototype,"id",void 0),m([Object(d["b"])({default:""})],f.prototype,"title",void 0),m([Object(d["b"])()],f.prototype,"subtitle",void 0),m([Object(d["b"])({required:!0})],f.prototype,"okTitle",void 0),m([Object(d["b"])({default:!1})],f.prototype,"modalLoading",void 0),f=m([Object(d["a"])({name:"app-modal-form",components:{AppButton:p["a"]}})],f);var v=f,h=v,b=(r(262),r(41)),g=Object(b["a"])(h,n,s,!1,null,null,null);g.options.__file="src/app/shared/components/app-modal/app-modal-form.vue";t["a"]=g.exports},264:function(e,t,r){"use strict";var n=r(18),s=r(265).trim,i=r(271);n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return s(this)}})},265:function(e,t,r){var n=r(83),s=r(261),i="["+s+"]",a=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),l=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(a,"")),2&e&&(r=r.replace(o,"")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},271:function(e,t,r){var n=r(20),s=r(261),i="​᠎";e.exports=function(e){return n((function(){return!!s[e]()||i[e]()!=i||s[e].name!==e}))}},293:function(e,t,r){},336:function(e,t,r){"use strict";r(293)},380:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-settings-users"},[r("div",{staticClass:"app-settings-users-table-toolbar"},[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.invite-modal",modifiers:{"invite-modal":!0}}],staticClass:"btn-invite",attrs:{variant:"primary"},on:{click:function(t){return e.showInviteUserModal()}}},[e._v(" "+e._s(e.$t("invite"))+" ")]),r("b-form-select",{staticClass:"app-settings-users-table-toolbar-select-customer",attrs:{id:"customers",options:e.customers},on:{change:e.onCustomerSelectionChanged},model:{value:e.selectedCustomerId,callback:function(t){e.selectedCustomerId=t},expression:"selectedCustomerId"}}),r("label",{staticClass:"app-settings-users-table-toolbar-select-customer-label",attrs:{for:"customers"}},[e._v(e._s(e.$t("customer")))])],1),r("div",{staticClass:"clearfix"}),r("app-table-container",[r("b-table",{attrs:{fields:e.columns,items:e.rows,"head-variant":"light",hover:"",busy:e.loading},scopedSlots:e._u([{key:"table-busy",fn:function(){return[r("div",{staticClass:"text-center"},[r("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"cell(name)",fn:function(t){return[t.item.name.userName?r("span",[e._v(" "+e._s(t.item.name.userName)),r("br"),r("small",{staticClass:"grayed"},[e._v(e._s(t.item.name.email))])]):r("span",[e._v(e._s(t.item.name.email))])]}},{key:"cell(state)",fn:function(t){return[e._v(" "+e._s(e.$t(t.item.state.userState))+" "),t.item.state.date?r("span",[r("br"),r("small",{staticClass:"grayed"},[e._v(e._s(t.item.state.date))])]):e._e()]}},{key:"cell(role)",fn:function(t){return[e._v(" "+e._s(t.item.role)+" "),t.item.customer.id?r("span",[r("br"),r("small",{staticClass:"grayed"},[e._v(e._s(t.item.customer.name))])]):e._e()]}},{key:"cell(plants)",fn:function(t){return e._l(t.item.plants,(function(t){return r("div",{key:t.id},[e._v(" "+e._s(t.name)+" ")])}))}},{key:"cell(actions)",fn:function(t){return[r("div",{staticClass:"hover-cell pull-right"},[r("b-button",{directives:[{name:"show",rawName:"v-show",value:"SUPER_ADMIN"!==t.item.role,expression:"row.item.role !== 'SUPER_ADMIN'"}],attrs:{variant:"secondary",size:"sm",title:e.$t("edit-user")},on:{click:function(r){return e.onEditUserClick(t.item)}}},[r("b-icon",{attrs:{icon:"wrench"}})],1),r("b-button",{directives:[{name:"show",rawName:"v-show",value:"pending"==t.item.state.userState,expression:"row.item.state.userState == 'pending'"}],attrs:{variant:"secondary",size:"sm",title:e.$t("resend-invitation")},on:{click:function(r){return e.onResendInvitationClick(t.item)}}},[r("b-icon",{attrs:{icon:"envelope"}})],1),r("b-button",{attrs:{variant:"secondary",size:"sm",title:e.$t("locked"===t.item.state.userState?"unlock":"lock")},on:{click:function(r){return e.onUnLockClick(t.item)}}},[r("b-icon",{attrs:{icon:"locked"===t.item.state.userState?"unlock":"lock"}})],1),r("b-button",{attrs:{variant:"outline-danger",size:"sm",title:e.$t("delete-user")},on:{click:function(r){return e.onDeleteUserClick(t.item)}}},[r("b-icon",{attrs:{icon:"trash"}})],1)],1)]}}])})],1),r("app-modal-form",{ref:"appInviteModal",attrs:{id:"inivite-modal",title:e.$t("invite-new-user"),subtitle:e.$t("invite-new-user_descr"),"ok-title":e.$t("invite"),modalLoading:e.inviteLoading},on:{submit:e.inviteUser}},[r("b-form-group",{attrs:{label:e.$t("email"),"label-for":"email"}},[r("b-form-input",{attrs:{id:"email",type:"email",placeholder:e.$t("email"),required:""},model:{value:e.newUser.email,callback:function(t){e.$set(e.newUser,"email",t)},expression:"newUser.email"}})],1),r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:e.$t("role"),"label-for":"role"}},[r("b-form-select",{attrs:{id:"role",options:e.roles},on:{change:e.onRoleSelectionChanged},model:{value:e.newUser.role,callback:function(t){e.$set(e.newUser,"role",t)},expression:"newUser.role"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:e.$t("customer"),"label-for":"customer"}},[r("b-form-select",{attrs:{id:"customer",options:e.customers},on:{change:e.onCustomerChanged},model:{value:e.newUser.customer_id,callback:function(t){e.$set(e.newUser,"customer_id",t)},expression:"newUser.customer_id"}})],1)],1)],1),r("b-row",[r("b-col",{directives:[{name:"show",rawName:"v-show",value:e.newUser.customer_id,expression:"newUser.customer_id"}]},[r("div",[r("b",[e._v(e._s(e.$t("plants")))])]),e._l(e.inviteUserCustomerPlants,(function(t){return r("div",{key:t.plant.id},[r("b-checkbox",{model:{value:t.selected,callback:function(r){e.$set(t,"selected",r)},expression:"customerPlant.selected"}},[e._v(" "+e._s(t.plant.name)+" "),t.otherCustomers?r("small",{staticClass:"grayed"},[e._v(e._s(t.otherCustomers))]):e._e()])],1)}))],2)],1)],1),r("app-modal-form",{ref:"appEditUserModal",attrs:{id:"edit-user-modal","ok-title":e.$t("apply"),modalLoading:e.editUserLoading},on:{submit:e.updateUser},scopedSlots:e._u([{key:"modal-title",fn:function(){return[r("h4",[e._v(e._s(e.$t("assign-plants-to-user",{user:e.editUser.name.email})))])]},proxy:!0}])},[r("b-row",[r("b-col",[r("div",[r("b",[e._v(e._s(e.$t("plants")))])]),e._l(e.editUserCustomerPlants,(function(t){return r("div",{key:t.plant.id},[r("b-checkbox",{model:{value:t.selected,callback:function(r){e.$set(t,"selected",r)},expression:"customerPlant.selected"}},[e._v(" "+e._s(t.plant.name)+" "),t.otherCustomers?r("small",{staticClass:"grayed"},[e._v(e._s(t.otherCustomers))]):e._e()])],1)}))],2)],1)],1)],1)},s=[];n._withStripped=!0;var i,a=r(14),o=r(22),l=r(23),c=r(31),u=r(30),d=r(42),p=(r(67),r(66),r(26),r(244),r(100),r(81),r(258),r(264),r(185),r(130),r(133),r(85),r(193),r(131),r(16)),m=r(32),f=r(253),v=r(263),h=r(80);(function(e){e["REGISTERED"]="REGISTERED",e["PENDING"]="PENDING",e["UNKNOWN"]="UNKNOWN"})(i||(i={}));var b=r(69),g=r(40),w=function(e,t,r,n){var s,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(d["a"])(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(t,r,a):s(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},y=10,_=function(e){Object(c["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(o["a"])(this,r),e=t.apply(this,arguments),e.columns=[],e.rows=[],e.loading=!1,e.inviteLoading=!1,e.customers=[],e.roles=[{value:g["a"].CUSTOMER_ADMIN,text:g["a"].CUSTOMER_ADMIN}],e.newUser=e.initialInviteUser(),e.selectedCustomerId=null,e.inviteUserCustomerPlants=[],e.editUserLoading=!1,e.editUser=null,e.editUserCustomerPlants=[],e}return Object(l["a"])(r,[{key:"created",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.columns=[{key:"name",label:this.$t("name").toString()},{key:"state",label:this.$t("state").toString()},{key:"role",label:this.$t("role").toString()},{key:"plants",label:this.$t("plants").toString()},{key:"actions",label:""}],e.next=3,this.updateUserRows();case 3:return e.prev=3,e.next=6,h["a"].getCustomers();case 6:return this.customers=e.sent.map((function(e){return{value:e.id,text:e.name}})),this.customers.unshift({value:null,text:""}),e.next=10,h["a"].getPlants();case 10:this.plants=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](3),this.appInviteModal.alertError(e.t0.error);case 16:case"end":return e.stop()}}),e,this,[[3,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateUserRows",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],this.loading=!0,e.prev=2,e.next=5,h["a"].getUsers(this.selectedCustomerId||void 0);case 5:t=e.sent,this.rows=t.map((function(e){var t="",n=e.state.toLowerCase();return e.is_locked?n="locked":e.state===i.REGISTERED?t=r.$t("registered-at").toString()+" "+new Date(Date.parse(e.registered_at)).toLocaleString():e.state===i.PENDING&&(t=r.$t("invited-at").toString()+" "+new Date(Date.parse(e.invited_at)).toLocaleString()),{id:e.id,name:{userName:((e.first_name||"")+" "+(e.last_name||"")).trim(),email:e.email},state:{date:t,userState:n},customer:{name:e.customer?e.customer.name:null,id:e.customer?e.customer.id:null},role:e.role.name.toString(),plants:e.plants||[]}})).sort((function(e,t){if(e.role===g["a"].SUPER_ADMIN&&t.role!==g["a"].SUPER_ADMIN)return-1;if(t.role===g["a"].SUPER_ADMIN&&e.role!==g["a"].SUPER_ADMIN)return 1;var r=e.name.email.toLowerCase(),n=t.name.email.toLowerCase();return r<n?-1:r>n?1:0})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),b["a"].showError(e.t0);case 12:return e.prev=12,this.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[2,9,12,15]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"showInviteUserModal",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.newUser=this.initialInviteUser(),this.setInviteUserCustomerPlants(),this.appInviteModal.show();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"inviteUser",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.getErrorInviteUserForm(),!t){e.next=5;break}return this.appInviteModal.alertError(t),this.inviteLoading=!1,e.abrupt("return");case 5:return this.appInviteModal.hideAlert(),this.inviteLoading=!0,e.prev=7,this.newUser.plant_ids=this.inviteUserCustomerPlants.filter((function(e){return e.selected})).map((function(e){return e.plant.id})),e.next=11,h["a"].inviteUser(this.newUser);case 11:return this.appInviteModal.hide(),b["a"].showSuccessAlert(this.$t("user-invited-successfully").toString()),e.next=15,this.updateUserRows();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](7),this.appInviteModal.alertError(e.t0.error);case 20:return e.prev=20,this.inviteLoading=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[7,17,20,23]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"initialInviteUser",value:function(){return this.selectedCustomerId?{email:"",role:g["a"].CUSTOMER_ADMIN,customer_id:this.selectedCustomerId}:{email:"",role:""}}},{key:"onRoleSelectionChanged",value:function(){this.newUser.role!==g["a"].CUSTOMER_ADMIN&&(this.newUser.customer_id=void 0)}},{key:"onResendInvitationClick",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h["a"].resendUserInvitation(t.id);case 3:b["a"].showSuccessAlert(this.$t("user-invitation-sent-successfully").toString()),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),b["a"].showError(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onUnLockClick",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,r="locked"!==t.state.userState,n=this.$t("sure-un-lock-user",{lock:r?"Lock":"Unlock",user:t.name.email}).toString(),confirm(n)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,h["a"].unLockUser(t.id,r);case 7:return b["a"].showSuccessAlert(this.$t(r?"user-locked-successfully":"user-unlocked-successfully").toString()),e.next=10,this.updateUserRows();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),b["a"].showError(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onCustomerSelectionChanged",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateUserRows();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onDeleteUserClick",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,e.prev=1,r=this.$t("sure-delete-user",{user:t.name.email}).toString(),confirm(r)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,h["a"].deleteUser(t.id);case 7:return b["a"].showSuccessAlert(this.$t("user-deleted-successfully",{user:t.name.email}).toString()),e.next=10,this.updateUserRows();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](1),b["a"].showError(e.t0);case 15:return e.prev=15,this.loading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[1,12,15,18]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onCustomerChanged",value:function(){var e=this;if(this.newUser.customer_id){var t=this.rows.filter((function(t){return t.customer.id===e.newUser.customer_id})).length;t>=y&&this.appInviteModal.alertInfo(this.$t("user-limit-for-customer-reached").toString())}this.setInviteUserCustomerPlants()}},{key:"onEditUserClick",value:function(e){this.editUser=e,this.setEditUserCustomerPlants(),this.appEditUserModal.hideAlert(),this.appEditUserModal.show()}},{key:"setInviteUserCustomerPlants",value:function(){var e,t=this;null!==(e=this.newUser)&&void 0!==e&&e.customer_id?this.inviteUserCustomerPlants=this.plants.filter((function(e){return e.customers.find((function(e){return e.id===t.newUser.customer_id}))})).map((function(e){return{plant:e,selected:!1,otherCustomers:e.customers.filter((function(e){return e.id!==t.newUser.customer_id})).map((function(e){return e.name})).join(", ")}})):this.inviteUserCustomerPlants=[]}},{key:"updateUser",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.appEditUserModal.hideAlert(),this.editUserLoading=!0,e.prev=2,t=this.editUserCustomerPlants.filter((function(e){return e.selected})).map((function(e){return e.plant.id})),e.next=6,h["a"].assignPlantsToUser(this.editUser.id,t);case 6:return this.appEditUserModal.hide(),b["a"].showSuccessAlert(this.$t("user-edited-successfully").toString()),e.next=10,this.updateUserRows();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](2),this.appInviteModal.alertError(e.t0.error);case 15:return e.prev=15,this.editUserLoading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"setEditUserCustomerPlants",value:function(){var e,t=this;null!==(e=this.editUser)&&void 0!==e&&e.customer.id?this.editUserCustomerPlants=this.plants.filter((function(e){return e.customers.find((function(e){return e.id===t.editUser.customer.id}))})).map((function(e){return{plant:e,selected:!!t.editUser.plants.find((function(t){return t.id===e.id})),otherCustomers:e.customers.filter((function(e){return e.id!==t.editUser.customer.id})).map((function(e){return e.name})).join(", ")}})):this.editUserCustomerPlants=[]}},{key:"getErrorInviteUserForm",value:function(){return/^\S+@\S+$/.test(this.newUser.email.trim())?-1===Object.keys(g["a"]).indexOf(this.newUser.role)?"INVALID_OR_MISSING_ROLE":this.newUser.role!==g["a"].CUSTOMER_ADMIN||this.newUser.customer_id?"":"CUSOMTER_REQUIRED_FOR_CUSTOMER_ADMIN":"INVALID_OR_MISSING_EMAIL"}}]),r}(p["default"]);w([Object(m["c"])()],_.prototype,"appInviteModal",void 0),w([Object(m["c"])()],_.prototype,"appEditUserModal",void 0),_=w([Object(m["a"])({name:"app-settings-users",components:{AppTableContainer:f["a"],AppModalForm:v["a"]}})],_);var k=_,U=k,C=(r(336),r(41)),O=Object(C["a"])(U,n,s,!1,null,null,null);O.options.__file="src/app/settings/users/users.vue";t["default"]=O.exports}}]);