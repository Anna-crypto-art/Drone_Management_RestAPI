(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{251:function(e,t,a){},253:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"app-table-container "+(e.size?"app-table-container-"+e.size:"")},[e._t("default")],2)},s=[];n._withStripped=!0;var i=a(23),r=a(22),l=a(31),o=a(30),c=a(41),u=(a(66),a(26),a(15)),p=a(32),d=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},f=function(e){Object(l["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a)}(u["default"]);d([Object(p["b"])({default:""})],f.prototype,"size",void 0),f=d([p["a"]],f);var y=f,h=y,b=(a(256),a(40)),v=Object(b["a"])(h,n,s,!1,null,null,null);v.options.__file="src/app/shared/components/app-table-container/app-table-container.vue";t["a"]=v.exports},254:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"box "+(e.loading?"loading":"")},[a("app-loading",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]}),e._t("title",[e.title?a("h4",{staticClass:"box-title"},[e._v(" "+e._s(e.title)+" ")]):e._e()]),e._t("default")],2)},s=[];n._withStripped=!0;var i=a(23),r=a(22),l=a(31),o=a(30),c=a(41),u=(a(66),a(26),a(15)),p=a(32),d=a(273),f=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},y=function(e){Object(l["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a)}(u["default"]);f([Object(p["b"])({default:""})],y.prototype,"title",void 0),f([Object(p["b"])({default:!1})],y.prototype,"loading",void 0),y=f([Object(p["a"])({name:"app-box",components:{AppLoading:d["a"]}})],y);var h=y,b=h,v=(a(278),a(40)),m=Object(v["a"])(b,n,s,!1,null,null,null);m.options.__file="src/app/shared/components/app-box/app-box.vue";t["a"]=m.exports},256:function(e,t,a){"use strict";a(251)},265:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(22),s=a(23),i=function(){function e(){Object(n["a"])(this,e)}return Object(s["a"])(e,null,[{key:"download",value:function(e,t){var a=document.createElement("a");a.href=e,a.setAttribute("download",t||e),document.body.appendChild(a),a.click(),document.body.removeChild(a)}}]),e}()},270:function(e,t,a){},271:function(e,t,a){},273:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-loading"},[a("div",{staticClass:"app-loading-container"},[a("b-spinner")],1)])},s=[];n._withStripped=!0;var i=a(23),r=a(22),l=a(31),o=a(30),c=a(41),u=(a(66),a(26),a(15)),p=a(32),d=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},f=function(e){Object(l["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a)}(u["default"]);f=d([Object(p["a"])({name:"app-loading"})],f);var y=f,h=y,b=(a(277),a(40)),v=Object(b["a"])(h,n,s,!1,null,null,null);v.options.__file="src/app/shared/components/app-loading/app-loading.vue";t["a"]=v.exports},276:function(e,t,a){"use strict";var n=a(18),s=a(61),i=a(42),r=a(20),l=a(132),o=[],c=o.sort,u=r((function(){o.sort(void 0)})),p=r((function(){o.sort(null)})),d=l("sort"),f=u||!p||!d;n({target:"Array",proto:!0,forced:f},{sort:function(e){return void 0===e?c.call(i(this)):c.call(i(this),s(e))}})},277:function(e,t,a){"use strict";a(270)},278:function(e,t,a){"use strict";a(271)},279:function(e,t,a){"use strict";var n=a(18),s=a(189).includes,i=a(105),r=a(57),l=r("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!l},{includes:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},280:function(e,t,a){"use strict";var n=a(18),s=a(281),i=a(83),r=a(283);n({target:"String",proto:!0,forced:!r("includes")},{includes:function(e){return!!~String(i(this)).indexOf(s(e),arguments.length>1?arguments[1]:void 0)}})},281:function(e,t,a){var n=a(282);e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},282:function(e,t,a){var n=a(29),s=a(55),i=a(24),r=i("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==s(e))}},283:function(e,t,a){var n=a(24),s=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[s]=!1,"/./"[e](t)}catch(n){}}return!1}},292:function(e,t,a){},331:function(e,t,a){"use strict";a(292)},370:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.analysis?a("app-content",{attrs:{title:e.analysis.name||"",navback:!0,eventId:e.analysis.id},scopedSlots:e._u([{key:"subtitle",fn:function(){return[e.analysis.current_state?a("div",[a("b",[e._v(e._s(e.$t(e.analysis.current_state.state.name)))])]):e._e()]},proxy:!0}],null,!1,80026355)},[a("div",{staticClass:"app-edit-analysis"},[a("b-tabs",[a("b-tab",{staticClass:"app-edit-analysis-download-tab",scopedSlots:e._u([{key:"title",fn:function(){return[a("b-icon",{attrs:{icon:"download"}}),a("span",{staticClass:"pad-left"},[e._v(e._s(e.$t("download")))])]},proxy:!0}],null,!1,1288288109)},[a("app-download-analysis-files",{attrs:{analysis:e.analysis}})],1),a("b-tab",{staticClass:"app-edit-analysis-upload-tab",scopedSlots:e._u([{key:"title",fn:function(){return[a("b-icon",{attrs:{icon:"upload"}}),a("span",{staticClass:"pad-left"},[e._v(e._s(e.$t("upload")))])]},proxy:!0}],null,!1,3987617677)},[a("app-upload-analysis-files",{attrs:{analysis:e.analysis}})],1),a("b-tab",{staticClass:"app-edit-analysis-edit-tab",scopedSlots:e._u([{key:"title",fn:function(){return[a("b-icon",{attrs:{icon:"pencil-square"}}),a("span",{staticClass:"pad-left"},[e._v(e._s(e.$t("edit")))])]},proxy:!0}],null,!1,725662720)},[a("b-row",[a("b-col",{attrs:{sm:""}},[a("app-box",{attrs:{title:e.$t("edit-analysis")}},[a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmitEditAnalysis(t)}}},[a("b-form-group",{attrs:{label:e.$t("acquisition-date"),"label-cols-sm":"4","label-cols-lg":"2"}},[a("b-datepicker",{attrs:{required:""},model:{value:e.flownAt,callback:function(t){e.flownAt=t},expression:"flownAt"}})],1),a("app-button",{attrs:{type:"submit",loading:e.loading}},[e._v(e._s(e.$t("apply")))])],1)],1)],1)],1)],1),e.isSuperAdmin?a("b-tab",{staticClass:"app-edit-analysis-admin-tab",scopedSlots:e._u([{key:"title",fn:function(){return[a("b-icon",{attrs:{icon:"braces"}}),a("span",{staticClass:"pad-left"},[e._v(e._s(e.$t("admin-panel")))])]},proxy:!0}],null,!1,3372386877)},[a("app-edit-analysis-admin",{attrs:{analysis:e.analysis}})],1):e._e()],1)],1)]):e._e()},s=[];n._withStripped=!0;var i=a(16),r=a(22),l=a(23),o=a(31),c=a(30),u=a(41),p=(a(67),a(66),a(26),a(244),a(32)),d=a(68),f=a(82),y=a(51),h=a(80),b=a(85),v=a(245),m=a(285),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("app-button",{attrs:{disabled:e.isDownloadButtonDisabled,loading:e.downloadButtonLoading},on:{click:e.onDownloadSelectedFilesClick}},[e._v(" "+e._s(e.$t("download-selected-files"))+" ")]),a("app-table-container",[a("b-table",{ref:"downloadFilesTable",attrs:{items:e.downloadFilesTableItems,fields:e.downloadFilesTableColumns,"select-mode":"multi",selectable:"",hover:"","head-variant":"light",busy:e.isFilesLoading},on:{"row-selected":e.onDownloadFilesSelected},scopedSlots:e._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center"},[a("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"head(selected)",fn:function(){return[a("b-checkbox",{attrs:{checked:e.allDownloadFilesSelected},on:{change:e.onSelectAllDownloadFiles}})]},proxy:!0},{key:"cell(selected)",fn:function(e){var t=e.rowSelected;return[a("b-checkbox",{staticClass:"b-table-selectable-checkbox",attrs:{checked:t,disabled:""}})]}},{key:"row-details",fn:function(t){return e._l(t.item.kpis,(function(t){return a("span",{key:t.id,staticClass:"analysis-selection-sidebar-kpi-badge"},[a("b-badge",{style:"background-color: "+e.getKpiColor(t),attrs:{variant:"primary"}},[e._v(e._s(t.name))])],1)}))}}])})],1)],1)},w=[];g._withStripped=!0;a(81),a(101),a(131),a(100),a(276);var _=a(253),O=a(265),j=a(288),A=a(104),S=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},k=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.isDownloadButtonDisabled=!0,e.downloadButtonLoading=!1,e.downloadFilesTableColumns=[{key:"selected",label:""},{key:"name",label:e.$t("name").toString()},{key:"size",label:e.$t("size").toString()}],e.downloadFilesTableItems=[],e.allDownloadFilesSelected=!1,e.selectedDonwloadFiles=[],e.isFilesLoading=!0,e}return Object(l["a"])(a,[{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.setDownloadFilesTableItems();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onAnalysisChanged",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.setDownloadFilesTableItems();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onDownloadFilesSelected",value:function(e){this.selectedDonwloadFiles=e,this.isDownloadButtonDisabled=0===this.selectedDonwloadFiles.length}},{key:"onDownloadSelectedFilesClick",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.downloadButtonLoading=!0,1!==this.selectedDonwloadFiles.length){e.next=9;break}return e.next=5,h["a"].getAnalysisFileDownloadUrl(this.analysis.id,this.selectedDonwloadFiles[0].name);case 5:t=e.sent,O["a"].download(t.url,this.selectedDonwloadFiles[0].name),e.next=14;break;case 9:return a="analysis-".concat(this.analysis.name,"-selected-files.zip"),e.next=12,h["a"].generateDownloadUrl(h["a"].downloadMultipleAnalysisFilesUrl(this.analysis.id,this.selectedDonwloadFiles.map((function(e){return e.name}))));case 12:n=e.sent,O["a"].download(n,a);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](0),A["a"].showError(this.analysis.id,e.t0);case 19:return e.prev=19,this.downloadButtonLoading=!1,e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[0,16,19,22]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onSelectAllDownloadFiles",value:function(e){if(e)this.downloadFilesTable.selectAllRows();else for(var t=0;t<this.downloadFilesTableItems.length;t++)this.downloadFilesTable.unselectRow(t)}},{key:"setDownloadFilesTableItems",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,n,s,i,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(this.isFilesLoading=!0,e.prev=1,t=[],a=0,n=Object.keys(this.analysis.files);a<n.length;a++)s=n[a],t=t.concat(this.analysis.files[s]);return t.sort(),e.next=7,h["a"].getAnalysisFilesInfo(this.analysis.id,t);case 7:i=e.sent,this.downloadFilesTableItems=Object.keys(i).map((function(e){return{name:e,size:null!==i[e]?Object(j["a"])(i[e]):r.$t("missing").toString()}})),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),A["a"].showError(this.analysis.id,e.t0);case 14:return e.prev=14,this.isFilesLoading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["a"]);S([Object(p["b"])({required:!0})],k.prototype,"analysis",void 0),S([Object(p["c"])()],k.prototype,"downloadFilesTable",void 0),S([Object(p["d"])("analysis")],k.prototype,"onAnalysisChanged",null),k=S([Object(p["a"])({name:"app-download-analysis-files",components:{AppTableContainer:_["a"],AppButton:v["a"]}})],k);var x=k,R=x,F=a(40),D=Object(F["a"])(R,g,w,!1,null,null,null);D.options.__file="src/app/analysis/edit-analysis/download-analysis-files.vue";var E=D.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",[a("b-col",{attrs:{sm:""}},[a("app-update-analysis-state",{attrs:{analysis:e.analysis}})],1),a("b-col",{attrs:{sm:""}},[a("app-import-analysis-result",{attrs:{analysis:e.analysis}})],1)],1),a("b-row",[a("b-col",{attrs:{sm:""}},[a("app-delete-analysis",{attrs:{analysis:e.analysis}})],1),a("b-col",{attrs:{sm:""}},[a("app-run-q-fly-for-analysis",{attrs:{analysis:e.analysis}})],1)],1)],1)},$=[];U._withStripped=!0;var C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-box",{scopedSlots:e._u([{key:"title",fn:function(){return[a("h4",{staticStyle:{"margin-bottom":"1em"}},[e._v(" "+e._s(e.$t("update-analysis-state"))+" "),a("br"),e.analysis.plant.in_setup_phase?e._e():a("small",{staticClass:"grayed",domProps:{innerHTML:e._s(e.$t("attention-state-update-starts-evaulation_expl"))}})])]},proxy:!0}])},[a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmitUpdateState(t)}}},[a("b-form-group",[a("b-form-checkbox",{model:{value:e.sendNotification,callback:function(t){e.sendNotification=t},expression:"sendNotification"}},[e._v(" "+e._s(e.$t("send-notification"))+" ")])],1),a("b-form-group",{attrs:{label:e.$t("select-new-analysis-state")}},[a("b-form-select",{attrs:{required:"",options:e.updateStateOptions},model:{value:e.selectedUpdateState,callback:function(t){e.selectedUpdateState=t},expression:"selectedUpdateState"}})],1),a("b-form-group",{attrs:{label:e.$t("message")}},[a("b-form-textarea",{attrs:{placeholder:e.$t("message"),row:"5"},model:{value:e.selectedUpdateStateMessage,callback:function(t){e.selectedUpdateStateMessage=t},expression:"selectedUpdateStateMessage"}})],1),a("app-button",{attrs:{type:"submit",loading:e.loading}},[e._v(e._s(e.$t("update")))])],1)],1)},T=[];C._withStripped=!0;var I=a(263),P=a(266),N=a(264),L=a(254),z=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},q=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.selectedUpdateState=null,e.updateStateOptions=null,e.selectedUpdateStateMessage="",e.sendNotification=!1,e.analysisStates=null,e}return Object(l["a"])(a,[{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateAnalysisStates();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onUpdateAnalysis",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateAnalysisStates();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateAnalysisStates",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,null!==this.analysisStates){e.next=5;break}return e.next=4,h["a"].getStates();case 4:this.analysisStates=e.sent;case 5:this.setUpdateStateOptions(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),A["a"].showError(this.analysis.id,e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onSubmitUpdateState",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.loading=!0,this.selectedUpdateState){e.next=4;break}throw{error:"NO_STATE_SELECTED",message:"Please, selecte a state"};case 4:return e.next=6,h["a"].updateAnalysisState(this.analysis.id,{state_id:this.selectedUpdateState,message:this.selectedUpdateStateMessage,do_send_mail:this.sendNotification});case 6:P["a"].emit(this.analysis.id,N["a"].UPDATE_ANALYSIS),A["a"].showSuccess(this.analysis.id,this.$t("update-analysis-state-success").toString()),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),A["a"].showError(this.analysis.id,e.t0);case 13:return e.prev=13,this.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[0,10,13,16]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"setUpdateStateOptions",value:function(){var e=this;if(this.analysis.current_state){var t=this.analysisStates[this.analysis.current_state.state.id];0!==t.length?this.updateStateOptions=t.map((function(t){return{value:t,text:e.$t(I["b"][t]).toString()}})):this.updateStateOptions=[]}else this.updateStateOptions=[]}}]),a}(f["a"]);z([Object(p["b"])({required:!0})],q.prototype,"analysis",void 0),z([Object(p["d"])("analysis")],q.prototype,"onUpdateAnalysis",null),q=z([Object(p["a"])({name:"app-update-analysis-state",components:{AppButton:v["a"],AppBox:L["a"]}})],q);var M=q,B=M,W=Object(F["a"])(B,C,T,!1,null,null,null);W.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/update-analysis-state.vue";var Q,Y=W.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-box",{attrs:{title:e.$t("manage-result-files")}},[a("b-form",{on:{submit:function(t){return t.preventDefault(),e.saveManageResultFiles(t)}}},[a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.analysis.analysis_result,expression:"analysis.analysis_result"}],attrs:{label:e.$t("download-existing-result-files")}},e._l(e.importedResultFiles,(function(t){return a("a",{key:t.id,attrs:{href:"#"},on:{click:function(a){return e.onResultFileClick(t)}}},[e._v(" "+e._s(t.filename)+" ")])})),0),a("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.analysis.analysis_result,expression:"analysis.analysis_result"}]},[a("b-form-checkbox",{attrs:{id:"removeAllAnalysisResultFiles"},model:{value:e.removeAllAnalysisResultFiles,callback:function(t){e.removeAllAnalysisResultFiles=t},expression:"removeAllAnalysisResultFiles"}},[e._v(" "+e._s(e.$t("remove-result-files"))+" ")])],1),a("b-form-group",{attrs:{label:e.$t("select-json-result-file-import")}},[a("b-form-file",{attrs:{accept:".json"},model:{value:e.jsonFile,callback:function(t){e.jsonFile=t},expression:"jsonFile"}})],1),a("b-form-group",{attrs:{label:e.$t("select-result-image-files")}},[a("b-form-file",{attrs:{accept:"image/png, image/jpeg",multiple:""},model:{value:e.imageFiles,callback:function(t){e.imageFiles=t},expression:"imageFiles"}})],1),a("app-button",{attrs:{type:"submit",loading:e.loading}},[e._v(e._s(e.$t("apply")))])],1)],1)},K=[];V._withStripped=!0,function(e){e["importAnalysisResult"]="app.tasks.import_analysis_results.import_analysis_results",e["validatePlantMetadata"]="app.tasks.validate_plant_metadata.validate_plant_metadata",e["runQFlyWizard"]="app.tasks.run_qfly_wizard.run_qfly_wizard"}(Q||(Q={}));var H=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},G=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.importedResultFiles=[],e.removeAllAnalysisResultFiles=!1,e.jsonFile=null,e.imageFiles=null,e}return Object(l["a"])(a,[{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.setManageImportFiles();case 2:P["a"].on(this.analysis.id,N["a"].RUN_ANALYSIS_TASK,(function(e){e.name===Q.importAnalysisResult&&(t.loading=!0)})),P["a"].on(this.analysis.id,N["a"].FINISHED_ANALYSIS_TASK,(function(e){e.name===Q.importAnalysisResult&&(t.loading=!1,"SUCCESS"===e.state&&t.successfullyFinished())}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onUpdateAnalysis",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.setManageImportFiles();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onResultFileClick",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h["a"].getAnalysisResultFileUrl(t.id);case 3:a=e.sent,O["a"].download(a.url,t.filename),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),d["a"].showError(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setManageImportFiles",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.analysis.analysis_result){e.next=4;break}return e.next=3,h["a"].getAnalysisResultFiles(this.analysis.analysis_result.id);case 3:this.importedResultFiles=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveManageResultFiles",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.loading=!0,!this.analysis.analysis_result||!this.removeAllAnalysisResultFiles){e.next=5;break}return e.next=5,h["a"].deleteAnalysisResult(this.analysis.analysis_result.id);case 5:if(!this.jsonFile){e.next=12;break}return A["a"].showInfo(this.analysis.id,"Uploading..."),e.next=9,h["a"].importAnalysisResult(this.jsonFile,this.analysis.id,this.imageFiles||void 0,(function(e){d["a"].showInfoAlert("Uploading... "+e+"%")}));case 9:P["a"].emit(this.analysis.id,N["a"].UPDATE_ANALYSIS),e.next=13;break;case 12:this.successfullyFinished();case 13:e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](0),A["a"].showError(this.analysis.id,e.t0),this.loading=!1;case 19:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"successfullyFinished",value:function(){A["a"].showSuccess(this.analysis.id,this.$t("success-managing-result-files").toString()),this.loading=!1,P["a"].emit(this.analysis.id,N["a"].UPDATE_ANALYSIS)}}]),a}(f["a"]);H([Object(p["b"])({required:!0})],G.prototype,"analysis",void 0),H([Object(p["d"])("analysis")],G.prototype,"onUpdateAnalysis",null),G=H([Object(p["a"])({name:"app-import-analysis-result",components:{AppButton:v["a"],AppBox:L["a"]}})],G);var J=G,X=J,Z=Object(F["a"])(X,V,K,!1,null,null,null);Z.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/import-analysis-result.vue";var ee=Z.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-box",{attrs:{title:e.$t("delete-analysis")}},[a("app-button",{attrs:{type:"button",variant:"danger",loading:e.loading},on:{click:e.onDeleteAnalysisClick}},[e._v(" "+e._s(e.$t("delete"))+" ")])],1)},ae=[];te._withStripped=!0;var ne=a(111),se=a(291),ie=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},re=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e}return Object(l["a"])(a,[{key:"onDeleteAnalysisClick",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!confirm("Delete analysis and all according files? This cannot be undone.")){e.next=7;break}return this.loading=!0,ne["a"].removeItem(se["a"]+"-"+this.analysis.id),e.next=6,h["a"].deleteAnalysis(this.analysis.id);case 6:this.$router.push({name:"Analyses"});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),A["a"].showError(this.analysis.id,e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["a"]);ie([Object(p["b"])({required:!0})],re.prototype,"analysis",void 0),re=ie([Object(p["a"])({name:"app-delete-analysis",components:{AppButton:v["a"],AppBox:L["a"]}})],re);var le=re,oe=le,ce=Object(F["a"])(oe,te,ae,!1,null,null,null);ce.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/delete-analysis.vue";var ue=ce.exports,pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-box",{attrs:{title:e.$t("run-qfly-server")}},[a("b-form-checkbox",{model:{value:e.startServer,callback:function(t){e.startServer=t},expression:"startServer"}},[e._v(" "+e._s(e.$t("start-qlfy-server"))+" ")]),a("br"),a("app-button",{attrs:{type:"button",loading:e.loadingValidateFiles,disabled:e.validateFilesDisabled,title:e.$t("enabled-if-data-complete-only")},on:{click:e.onValidateFilesClick}},[e._v(" "+e._s(e.$t("validate-file-completeness"))+" ")]),a("br"),a("br"),a("app-button",{attrs:{type:"button",loading:e.loadingRunQFlyWizard,disabled:e.runQFlyWizardDisabled,title:e.$t("enabled-if-data-complete-verfified-only")},on:{click:e.onRunQFlyWizardClick}},[e._v(" "+e._s(e.$t("run-qfly-wizard"))+" ")])],1)},de=[];pe._withStripped=!0;a(279),a(280);var fe=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},ye=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.startServer=!0,e.loadingValidateFiles=!1,e.loadingRunQFlyWizard=!1,e}return Object(l["a"])(a,[{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:P["a"].on(this.analysis.id,N["a"].RUN_ANALYSIS_TASK,(function(e){e.name===Q.validatePlantMetadata?t.loadingValidateFiles=!0:e.name===Q.runQFlyWizard&&(t.loadingRunQFlyWizard=!0)})),P["a"].on(this.analysis.id,N["a"].FINISHED_ANALYSIS_TASK,(function(e){e.name===Q.validatePlantMetadata?(t.loadingValidateFiles=!1,"SUCCESS"===e.state&&A["a"].showSuccess(t.analysis.id,t.$t("uploaded-data-complete-success").toString())):e.name===Q.runQFlyWizard&&(t.loadingRunQFlyWizard=!1,"SUCCESS"===e.state&&A["a"].showSuccess(t.analysis.id,t.$t("evaluation-finished-success").toString()))}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"validateFilesDisabled",get:function(){return this.analysis.current_state.state.id!==I["a"].DATA_COMPLETE}},{key:"runQFlyWizardDisabled",get:function(){return![I["a"].DATA_COMPLETE_VERIFIED,I["a"].PROCESSING].includes(this.analysis.current_state.state.id)}},{key:"onValidateFilesClick",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!confirm("Are you sure?")){e.next=6;break}return this.loadingValidateFiles=!0,e.next=5,h["a"].validatePlantMetadata(this.analysis.id,this.startServer);case 5:P["a"].emit(this.analysis.id,N["a"].UPDATE_ANALYSIS);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),A["a"].showError(this.analysis.id,e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onRunQFlyWizardClick",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!confirm("Are you sure?")){e.next=6;break}return this.loadingRunQFlyWizard=!0,e.next=5,h["a"].runQFlyWizard(this.analysis.id,this.startServer);case 5:P["a"].emit(this.analysis.id,N["a"].UPDATE_ANALYSIS);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),A["a"].showError(this.analysis.id,e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["a"]);fe([Object(p["b"])({required:!0})],ye.prototype,"analysis",void 0),ye=fe([Object(p["a"])({name:"app-run-qfly-for-analysis",components:{AppButton:v["a"],AppBox:L["a"]}})],ye);var he=ye,be=he,ve=Object(F["a"])(be,pe,de,!1,null,null,null);ve.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/run-qfly-for-analysis.vue";var me=ve.exports,ge=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},we=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(l["a"])(a)}(f["a"]);ge([Object(p["b"])({required:!0})],we.prototype,"analysis",void 0),we=ge([Object(p["a"])({name:"app-edit-analysis-result-admin",components:{AppUpdateAnalysisState:Y,AppImportAnalysisResult:ee,AppDeleteAnalysis:ue,AppRunQFlyForAnalysis:me}})],we);var _e=we,Oe=_e,je=Object(F["a"])(Oe,U,$,!1,null,null,null);je.options.__file="src/app/analysis/edit-analysis/edit-analysis-admin/edit-analysis-admin.vue";var Ae=je.exports,Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("app-analysis-upload",{attrs:{analysis:e.analysis},on:{startUpload:e.onStartUpload,cancelUpload:e.onCancelUpload,retryUpload:e.onRetryUpload}})],1)},ke=[];Se._withStripped=!0;var xe=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},Re=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(l["a"])(a,[{key:"onStartUpload",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a,n){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s=a?[]:t,e.next=4,h["a"].prepareAnalysisUpload(this.analysis.id,s);case 4:P["a"].emit(this.analysis.id,N["a"].UPDATE_ANALYSIS),n(this.analysis),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),A["a"].showError(this.analysis.id,e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t,a,n){return e.apply(this,arguments)}return t}()},{key:"onCancelUpload",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h["a"].cancelAnalysisUpload(this.analysis.id);case 3:return e.next=5,h["a"].updateAnalysisState(this.analysis.id,{state_id:I["a"].UPLOAD_FAILED,message:"Upload canceled"});case 5:t(!1),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),A["a"].showError(this.analysis.id,e.t0),t(!0);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onRetryUpload",value:function(){this.$router.go(0)}}]),a}(f["a"]);xe([Object(p["b"])({required:!0})],Re.prototype,"analysis",void 0),Re=xe([Object(p["a"])({name:"app-upload-analysis-files",components:{AppAnalysisUpload:m["a"]}})],Re);var Fe=Re,De=Fe,Ee=Object(F["a"])(De,Se,ke,!1,null,null,null);Ee.options.__file="src/app/analysis/edit-analysis/upload-analysis-files.vue";var Ue=Ee.exports,$e=function(e,t,a,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,a,r):s(t,a))||r);return i>3&&r&&Object.defineProperty(t,a,r),r},Ce=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.analysis=null,e.flownAt="",e.loading=!1,e}return Object(l["a"])(a,[{key:"created",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateAnalysis(this.$route.params.id);case 2:P["a"].on(this.analysis.id,N["a"].UPDATE_ANALYSIS,(function(){t.updateAnalysis(t.analysis.id)}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateAnalysis",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h["a"].getAnalysis(t);case 3:this.analysis=e.sent,this.flownAt=this.analysis.flown_at,this.watchAnalysisTask(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),d["a"].showError(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"watchAnalysisTask",value:function(){var e=this;this.analysis.task_id&&h["a"].waitForTask(this.analysis.task_id,(function(t){"FAILURE"===t.state&&A["a"].showError(e.analysis.id,{error:y["a"].SOMETHING_WENT_WRONG,message:t.result}),P["a"].emit(e.analysis.id,N["a"].FINISHED_ANALYSIS_TASK,t)}),(function(t,a){A["a"].showInfo(e.analysis.id,t),P["a"].emit(e.analysis.id,N["a"].RUN_ANALYSIS_TASK,a)}))}},{key:"onSubmitEditAnalysis",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,h["a"].updateAnalysis(this.analysis.id,{flown_at:this.flownAt});case 4:A["a"].showSuccess(this.analysis.id,this.$t("analysis-updated-successfully").toString()),P["a"].emit(this.analysis.id,N["a"].UPDATE_ANALYSIS),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),A["a"].showError(this.analysis.id,e.t0);case 11:return e.prev=11,this.loading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,8,11,14]])})));function t(){return e.apply(this,arguments)}return t}()}]),a}(f["a"]);Ce=$e([Object(p["a"])({name:"app-edit-analysis",components:{AppContent:b["a"],AppButton:v["a"],AppAnalysisUpload:m["a"],AppDownloadAnalysisFiles:E,AppEditAnalysisAdmin:Ae,AppUploadAnalysisFiles:Ue,AppBox:L["a"]}})],Ce);var Te=Ce,Ie=Te,Pe=(a(331),Object(F["a"])(Ie,n,s,!1,null,null,null));Pe.options.__file="src/app/analysis/edit-analysis/edit-analysis.vue";t["default"]=Pe.exports}}]);