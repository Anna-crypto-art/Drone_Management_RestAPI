(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{248:function(e,t,a){"use strict";var i=a(46),n=a(33),s=a(21),o=a(186),r="toString",l=RegExp.prototype,c=l[r],p=s((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u=c.name!=r;(p||u)&&i(RegExp.prototype,r,(function(){var e=n(this),t=String(e.source),a=e.flags,i=String(void 0===a&&e instanceof RegExp&&!("flags"in l)?o.call(e):a);return"/"+t+"/"+i}),{unsafe:!0})},249:function(e,t,a){var i=a(252);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a(76).default;n("13875d17",i,!1,{sourceMap:!1,shadowMode:!1})},250:function(e,t,a){"use strict";var i,n=a(24),s=a(25),o=a(29),r=a(28),l=a(15);(function(e){e["stopLoading"]="stop-loading",e["startLoading"]="start-loading"})(i||(i={}));var c=function(e){Object(o["a"])(a,e);var t=Object(r["a"])(a);function a(){return Object(n["a"])(this,a),t.apply(this,arguments)}return Object(s["a"])(a,[{key:"onStopLoading",value:function(e){this.$on(i.stopLoading,e)}},{key:"onStartLoading",value:function(e){this.$on(i.startLoading,e)}},{key:"stopLoading",value:function(){this.$emit(i.stopLoading)}},{key:"startLoading",value:function(){this.$emit(i.startLoading)}}]),a}(l["default"]),p=new c;t["a"]=p},251:function(e,t,a){"use strict";a(249)},252:function(e,t,a){var i=a(75);t=i(!1),t.push([e.i,".app-button-loading{margin-right:5px}",""]),e.exports=t},253:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-button",{class:e.cls,attrs:{variant:e.variant,type:e.type,disabled:e.isDisabled},on:{click:e.onClick}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"app-button-loading"},[a("b-spinner",{attrs:{small:""}})],1),e._t("default")],2)},n=[];i._withStripped=!0;var s=a(24),o=a(25),r=a(29),l=a(28),c=a(45),p=(a(61),a(15)),u=a(32),d=a(250),f=function(e,t,a,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"===("undefined"===typeof Reflect?"undefined":Object(c["a"])(Reflect))&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,i);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(s<3?n(o):s>3?n(t,a,o):n(t,a))||o);return s>3&&o&&Object.defineProperty(t,a,o),o},h=function(e){Object(r["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.disabled=!1,e}return Object(o["a"])(a,[{key:"created",value:function(){var e=this;d["a"].onStopLoading((function(){e.stopLoading()})),d["a"].onStartLoading((function(){e.startLoading()}))}},{key:"isDisabled",get:function(){return this.loading||this.disabled}},{key:"stopLoading",value:function(){this.loading=!1}},{key:"startLoading",value:function(){this.loading=!0}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}},{key:"onClick",value:function(e){this.$emit("click",e)}}]),a}(p["default"]);f([Object(u["b"])({default:"button"})],h.prototype,"type",void 0),f([Object(u["b"])({default:""})],h.prototype,"cls",void 0),f([Object(u["b"])({default:"primary"})],h.prototype,"variant",void 0),h=f([Object(u["a"])({name:"app-button"})],h);var v=h,g=v,b=(a(251),a(39)),m=Object(b["a"])(g,i,n,!1,null,null,null);m.options.__file="src/app/shared/components/app-button/app-button.vue";t["a"]=m.exports},262:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(273),a(61);var i=a(98);function n(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Object(i["a"])(e),null===e)break;return e}function s(e,t,a){return s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var i=n(e,t);if(i){var s=Object.getOwnPropertyDescriptor(i,t);return s.get?s.get.call(a):s.value}},s(e,t,a||e)}},273:function(e,t,a){var i=a(19),n=a(30),s=a(33),o=a(34),r=a(55),l=a(100);function c(e,t){var a,i,p=arguments.length<3?e:arguments[2];return s(e)===p?e[t]:(a=r.f(e,t))?o(a,"value")?a.value:void 0===a.get?void 0:a.get.call(p):n(i=l(e))?c(i,t,p):void 0}i({target:"Reflect",stat:!0},{get:c})},274:function(e,t,a){var i=a(30),n=a(53),s=a(22),o=s("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==n(e))}},280:function(e,t,a){var i=a(319);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a(76).default;n("0b7ba56f",i,!1,{sourceMap:!1,shadowMode:!1})},281:function(e,t,a){var i=a(321);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a(76).default;n("561a9d27",i,!1,{sourceMap:!1,shadowMode:!1})},282:function(e,t,a){var i=a(323);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a(76).default;n("803e6a7a",i,!1,{sourceMap:!1,shadowMode:!1})},283:function(e,t,a){var i=a(325);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a(76).default;n("3924e95b",i,!1,{sourceMap:!1,shadowMode:!1})},317:function(e,t,a){"use strict";var i=a(188),n=a(274),s=a(33),o=a(79),r=a(131),l=a(190),c=a(47),p=a(189),u=a(102),d=a(21),f=[].push,h=Math.min,v=4294967295,g=!d((function(){return!RegExp(v,"y")}));i("split",2,(function(e,t,a){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var i=String(o(this)),s=void 0===a?v:a>>>0;if(0===s)return[];if(void 0===e)return[i];if(!n(e))return t.call(i,e,s);var r,l,c,p=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,g=new RegExp(e.source,d+"g");while(r=u.call(g,i)){if(l=g.lastIndex,l>h&&(p.push(i.slice(h,r.index)),r.length>1&&r.index<i.length&&f.apply(p,r.slice(1)),c=r[0].length,h=l,p.length>=s))break;g.lastIndex===r.index&&g.lastIndex++}return h===i.length?!c&&g.test("")||p.push(""):p.push(i.slice(h)),p.length>s?p.slice(0,s):p}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var n=o(this),s=void 0==t?void 0:t[e];return void 0!==s?s.call(t,n,a):i.call(String(n),t,a)},function(e,n){var o=a(i,e,this,n,i!==t);if(o.done)return o.value;var u=s(e),d=String(this),f=r(u,RegExp),b=u.unicode,m=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(g?"y":"g"),y=new f(g?u:"^(?:"+u.source+")",m),w=void 0===n?v:n>>>0;if(0===w)return[];if(0===d.length)return null===p(y,d)?[d]:[];var k=0,x=0,O=[];while(x<d.length){y.lastIndex=g?x:0;var _,F=p(y,g?d:d.slice(x));if(null===F||(_=h(c(y.lastIndex+(g?0:x)),d.length))===k)x=l(d,x,b);else{if(O.push(d.slice(k,x)),O.length===w)return O;for(var j=1;j<=F.length-1;j++)if(O.push(F[j]),O.length===w)return O;x=k=_}}return O.push(d.slice(k)),O}]}),!g)},318:function(e,t,a){"use strict";a(280)},319:function(e,t,a){var i=a(75);t=i(!1),t.push([e.i,".app-file-upload-file{margin-bottom:10px;width:100%;background-color:#fff;border:1px solid rgba(68,68,68,.1);position:relative;height:38px}.app-file-upload-file-infos{position:absolute;z-index:1;width:100%;padding:.45rem 1.2rem;line-height:20px}.app-file-upload-file-name{width:calc(100% - 80px);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.app-file-upload-file-name-size{margin-right:20px}.app-file-upload-file-name-error{margin-left:20px}.app-file-upload-file-remove{position:absolute;right:15px;top:8px;font-size:1.25em;cursor:pointer}.app-file-upload-file-remove:hover{color:#a61b1b}.app-file-upload-file-progress{position:absolute;right:15px;top:8px}.app-file-upload-file-progressbar{z-index:0;position:absolute;top:0;left:0;height:100%;background-color:#d4edda;width:0;-webkit-transition:ease 300ms width;transition:ease 300ms width}.app-file-upload-file:last-child{margin-bottom:0}",""]),e.exports=t},320:function(e,t,a){"use strict";a(281)},321:function(e,t,a){var i=a(75);t=i(!1),t.push([e.i,".app-file-upload{margin-bottom:30px}.app-file-upload-dropzone{background-color:#f4f5f8;padding:20px}.app-file-upload-dropzone-content{margin-bottom:30px}.app-file-upload-dropzone-content-title{margin-bottom:15px}",""]),e.exports=t},322:function(e,t,a){"use strict";a(282)},323:function(e,t,a){var i=a(75);t=i(!1),t.push([e.i,".app-checklist{list-style-type:none}",""]),e.exports=t},324:function(e,t,a){"use strict";a(283)},325:function(e,t,a){var i=a(75);t=i(!1),t.push([e.i,".app-checklist-item{margin-bottom:5px}.app-checklist-item-symbol{margin-right:10px}",""]),e.exports=t},369:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-content",{attrs:{title:e.$t("new-data-upload"),navback:!0,subtitle:e.$t("create-new-analysis_descr")}},[a("div",{staticClass:"app-new-analysis"},[a("b-form",{staticStyle:{"margin-bottom":"50px"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("b-row",{staticStyle:{"margin-bottom":"25px"}},[a("b-col",{attrs:{sm:"4"}},[a("b-form-group",{attrs:{"label-cols":"auto",label:e.$t("plant")}},[a("b-form-select",{attrs:{required:"",options:e.plantOptions},model:{value:e.newAnalysis.plant_id,callback:function(t){e.$set(e.newAnalysis,"plant_id",t)},expression:"newAnalysis.plant_id"}})],1)],1)],1),a("app-file-upload",{ref:"appFileUpload",attrs:{title:e.$t("upload-your-files")}},[a("app-checklist",[a("app-checklist-item",{attrs:{checked:e.checkListItems.videoFiles}},[e._v(e._s(e.$t("video-files_descr")))]),a("app-checklist-item",{attrs:{checked:e.checkListItems.droneMetaFile}},[e._v(e._s(e.$t("drone-metadata-file_descr")))]),a("app-checklist-item",{attrs:{checked:e.checkListItems.plantMetaFile}},[e._v(e._s(e.$t("plant-metadata-file_descr")))])],1)],1),a("app-button",{ref:"uploadButton",attrs:{type:"submit",cls:"pull-right"}},[e._v(e._s(e.uploadButtonTxt))]),a("app-button",{directives:[{name:"show",rawName:"v-show",value:e.showCancelButton,expression:"showCancelButton"}],ref:"cancelUploadButton",attrs:{variant:"secondary",type:"button"},on:{click:e.onCancelUpload}},[e._v(e._s(e.$t("cancel")))]),a("div",{staticClass:"clearfix"})],1)],1)])},n=[];i._withStripped=!0;var s=a(78),o=a(16),r=a(24),l=a(25),c=a(262),p=a(98),u=a(29),d=a(28),f=a(45),h=(a(62),a(61),a(37),a(248),a(123),a(122),a(124),a(192),a(185),a(125),a(126),a(317),a(32)),v=a(80),g=a(81),b=a(63),m=a(77),y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-file-upload"},[a("div",{staticClass:"app-file-upload-dropzone",attrs:{id:"file-upload-dropzone-id"}},[a("div",{staticClass:"app-file-upload-dropzone-content"},[e.title?a("h3",{staticClass:"app-file-upload-dropzone-content-title"},[e._v(e._s(e.title))]):e._e(),e._t("default")],2),a("div",{staticClass:"app-file-upload-dropzone-browsebutton"},[a("b-button",{attrs:{variant:"primary",id:"file-upload-browsebutton-id"}},[e._v(e._s(e.$t("browse...")))])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.keyResumFiles>0,expression:"keyResumFiles > 0"}],key:e.keyResumFiles,staticClass:"app-file-upload-dropzone-files",staticStyle:{"margin-top":"30px"}},e._l(e.files,(function(t){return a("app-file-upload-file",{key:t.uniqueIdentifier,ref:"uploadFiles",refInFor:!0,attrs:{uploading:e.uploading,file:t}})})),1)])])},w=[];y._withStripped=!0;var k=a(15),x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-file-upload-file"},[a("div",{staticClass:"app-file-upload-file-infos"},[a("div",{staticClass:"app-file-upload-file-name"},[a("small",{staticClass:"app-file-upload-file-name-size grayed"},[e._v(e._s(e.getFileSize(e.file.size)))]),e._v(" "+e._s(e.file.fileName)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"app-file-upload-file-name-error",class:{"text-danger":!e.retry}},[e._v(" "+e._s(e.retry&&e.$t("retrying...")||e.error)+" ")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.uploading,expression:"!uploading"}],staticClass:"app-file-upload-file-remove",on:{click:e.onFileRemove}},[a("b-icon",{attrs:{icon:"x"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.uploading,expression:"uploading"}],staticClass:"app-file-upload-file-progress"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.success,expression:"!success"}]},[e._v(e._s(e.progress)+"%")]),a("b-icon",{directives:[{name:"show",rawName:"v-show",value:e.success,expression:"success"}],staticClass:"text-success",attrs:{icon:"check2"}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.uploading,expression:"uploading"}],ref:"uploadProgressBar",staticClass:"app-file-upload-file-progressbar"})])},O=[];x._withStripped=!0;var _=a(58),F=a(268),j=function(e,t,a,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"===("undefined"===typeof Reflect?"undefined":Object(f["a"])(Reflect))&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,i);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(s<3?n(o):s>3?n(t,a,o):n(t,a))||o);return s>3&&o&&Object.defineProperty(t,a,o),o},R=function(e){Object(u["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.progress=0,e.error="",e.retry=!1,e.success=!1,e}return Object(l["a"])(a,[{key:"created",value:function(){this.uploading&&(this.emitProgress(),100===this.progress&&this.emitSuccess())}},{key:"uniqueIdentifier",get:function(){return this.file.uniqueIdentifier}},{key:"getFileSize",value:function(e){var t=["KB","MB","GB","TB"],a=0;do{e/=1024}while(e>1024&&++a<t.length);return"".concat(Math.round(e)," ").concat(t[a])}},{key:"onFileRemove",value:function(){this.file.cancel(),F["a"].emitFileRemoved(this.file)}},{key:"emitError",value:function(e){try{var t=JSON.parse(e);t.error&&(this.error=t.error)}catch(a){console.error(e),this.error=_["a"].SOMETHING_WENT_WRONG}this.success=!1,this.retry=!1}},{key:"emitRetry",value:function(){this.success=!1,this.retry=!0}},{key:"emitProgress",value:function(){var e=Math.round(100*this.file.progress(!1));e!==this.progress&&(this.progress=e,this.error="",this.retry=!1,this.uploadProgressBar&&(this.uploadProgressBar.style.width=this.progress+"%"))}},{key:"emitSuccess",value:function(){this.error="",this.retry=!1,this.progress=0,this.success=!0,this.uploadProgressBar&&(this.uploadProgressBar.style.display="none")}}]),a}(k["default"]);j([Object(h["b"])({required:!0})],R.prototype,"file",void 0),j([Object(h["b"])({required:!0})],R.prototype,"uploading",void 0),j([Object(h["c"])()],R.prototype,"uploadProgressBar",void 0),R=j([Object(h["a"])({name:"app-file-upload-file"})],R);var L=R,S=L,E=(a(318),a(39)),C=Object(E["a"])(S,x,O,!1,null,null,null);C.options.__file="src/app/shared/components/app-file-upload/app-file-upload-file.vue";var I=C.exports,A=a(267),B=function(e,t,a,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"===("undefined"===typeof Reflect?"undefined":Object(f["a"])(Reflect))&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,i);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(s<3?n(o):s>3?n(t,a,o):n(t,a))||o);return s>3&&o&&Object.defineProperty(t,a,o),o},U=function(e){Object(u["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.keyResumFiles=0,e.uploading=!1,e}return Object(l["a"])(a,[{key:"mounted",value:function(){this.checkUploadState(),this.registerUploadEvents()}},{key:"checkUploadState",value:function(){F["a"].hasState(A["b"].UPLOADING)?(this.uploading=!0,this.keyResumFiles=F["a"].files.length):F["a"].init("file-upload-dropzone-id","file-upload-browsebutton-id")}},{key:"registerUploadEvents",value:function(){var e=this;F["a"].on(A["a"].FILE_SUCCESS,(function(t){var a=e.getFileUploadFile(t);a&&a.emitSuccess()})),F["a"].on(A["a"].FILE_ERROR,(function(t,a){var i=e.getFileUploadFile(t);i&&i.emitError(a)})),F["a"].on(A["a"].FILE_PROGRESS,(function(t){var a=e.getFileUploadFile(t);a&&a.emitProgress()})),F["a"].on(A["a"].FILE_RETRY,(function(t,a){var i=e.getFileUploadFile(t);i&&i.emitRetry()})),F["a"].on(A["a"].FILE_ADDED,(function(t){e.keyResumFiles+=1})),F["a"].on(A["a"].FILE_REMOVED,(function(t){e.keyResumFiles-=1}))}},{key:"upload",value:function(e,t){this.uploading=!0,this.keyResumFiles+=100,F["a"].upload(e,t)}},{key:"files",get:function(){return F["a"].files}},{key:"cancel",value:function(){F["a"].cancel(),this.uploading=!1,this.keyResumFiles-=100}},{key:"getFileUploadFile",value:function(e){return this.uploadFiles.find((function(t){return t.uniqueIdentifier===e.uniqueIdentifier}))}}]),a}(k["default"]);B([Object(h["c"])()],U.prototype,"uploadFiles",void 0),B([Object(h["b"])()],U.prototype,"title",void 0),U=B([Object(h["a"])({name:"app-file-upload",components:{AppFileUploadFile:I}})],U);var M=U,D=M,P=(a(320),Object(E["a"])(D,y,w,!1,null,null,null));P.options.__file="src/app/shared/components/app-file-upload/app-file-upload.vue";var $=P.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"app-checklist"},[e._t("default")],2)},z=[];N._withStripped=!0;var T=function(e,t,a,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"===("undefined"===typeof Reflect?"undefined":Object(f["a"])(Reflect))&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,i);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(s<3?n(o):s>3?n(t,a,o):n(t,a))||o);return s>3&&o&&Object.defineProperty(t,a,o),o},q=function(e){Object(u["a"])(a,e);var t=Object(d["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return a}(k["default"]);q=T([Object(h["a"])({name:"app-checklist"})],q);var G=q,K=G,J=(a(322),Object(E["a"])(K,N,z,!1,null,null,null));J.options.__file="src/app/shared/components/app-checklist/app-checklist.vue";var W=J.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"app-checklist-item",class:{grayed:e.checked}},[a("b-icon",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"checked"}],staticClass:"app-checklist-item-symbol",attrs:{icon:"check2"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.checked,expression:"!checked"}],staticClass:"app-checklist-item-symbol"},[e._v("·")]),e._t("default")],2)},Y=[];V._withStripped=!0;var H=function(e,t,a,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"===("undefined"===typeof Reflect?"undefined":Object(f["a"])(Reflect))&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,i);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(s<3?n(o):s>3?n(t,a,o):n(t,a))||o);return s>3&&o&&Object.defineProperty(t,a,o),o},Q=function(e){Object(u["a"])(a,e);var t=Object(d["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return a}(k["default"]);H([Object(h["b"])({default:!1})],Q.prototype,"checked",void 0),Q=H([Object(h["a"])({name:"app-checklist-item"})],Q);var X=Q,Z=X,ee=(a(324),Object(E["a"])(Z,V,Y,!1,null,null,null));ee.options.__file="src/app/shared/components/app-checklist/app-checklist-item.vue";var te=ee.exports,ae=a(253),ie=a(277),ne="new-analysis-storage-key",se=a(119),oe=function(e,t,a,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,a):i;if("object"===("undefined"===typeof Reflect?"undefined":Object(f["a"])(Reflect))&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,i);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(s<3?n(o):s>3?n(t,a,o):n(t,a))||o);return s>3&&o&&Object.defineProperty(t,a,o),o},re=function(e){Object(u["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.uploadButtonTxt="",e.showCancelButton=!1,e.plantOptions=[],e.newAnalysis={files:[],plant_id:""},e.checkListItems={videoFiles:!1,droneMetaFile:!1,plantMetaFile:!1},e.storageKey=ne,e}return Object(l["a"])(a,[{key:"mounted",value:function(){this.registerUploadEvents()}},{key:"created",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["a"])(Object(p["a"])(a.prototype),"created",this).call(this);case 2:return this.uploadButtonTxt=this.$t("upload").toString(),e.prev=3,e.next=6,m["a"].getAllPlants();case 6:t=e.sent,this.plantOptions=t.map((function(e){return{value:e.id,text:e.name}})),1===t.length&&(this.newAnalysis.plant_id=t[0].id),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](3),b["a"].showError(e.t0);case 14:i=this.fetchData(),i&&(this.analysis=i.analysis,this.newAnalysis=i.newAnalysis,this.waitForFiles=i.fileNames);case 16:case"end":return e.stop()}}),e,this,[[3,11]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"updated",value:function(){this.checkUploadState()}},{key:"registerUploadEvents",value:function(){var e=this;F["a"].on(A["a"].COMPLETED,function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m["a"].updateAnalysisState(a.id,{state:ie["b"].PICK_ME_UP});case 3:se["a"].removeItem(ne),b["a"].showSuccessAlert(e.$t("upload-completed-successfully").toString()),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),b["a"].showError(t.t0);case 10:e.isCreated&&(e.uploadButton.stopLoading(),e.uploadButton.disable(),e.analysis=void 0,e.showCancelButton=!1);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()),F["a"].on(A["a"].FAILED,function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return b["a"].showErrorAlert(e.$t(ie["b"].UPLOAD_FAILED).toString()),console.error(a),t.prev=2,t.next=5,m["a"].updateAnalysisState(F["a"].getMetadata().id,{state:ie["b"].UPLOAD_FAILED,message:a});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](2),console.error(t.t0);case 10:e.isCreated&&e.onFailed();case 11:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}()),F["a"].on(A["a"].FILE_RETRY,(function(t,a){b["a"].showWarningAlert("".concat(e.$t("upload-error-retry").toString()," ").concat(a,"/").concat(F["a"].getMaxRetries()),"resumable-upload-error-retry")})),F["a"].on(A["a"].FILE_ADDED,(function(t){e.isCreated&&e.checkFileCompleteness()})),F["a"].on(A["a"].FILE_REMOVED,(function(t){e.isCreated&&e.checkFileCompleteness()}))}},{key:"checkUploadState",value:function(){F["a"].hasState(A["b"].UPLOADING)?this.uploadButton.startLoading():F["a"].hasState(A["b"].FAILED)?this.onFailed():this.analysis&&this.waitForFiles&&(this.checkFileCompleteness(),this.waitForFiles.length>0&&(b["a"].showInfoAlert(this.$t("need-files-to-upload_descr").toString()+'<ul style="margin: 5px 0 0 40px;"><li>'+this.waitForFiles.join("</li><li>")+"</li></ul>"),this.uploadButtonTxt=this.$t("resume-upload").toString(),this.uploadButton.disable(),this.showCancelButton=!0))}},{key:"fetchData",value:function(){return se["a"].getItem(this.storageKey)}},{key:"storeData",value:function(){var e=this.getStorageData();e?se["a"].setItem(this.storageKey,e):se["a"].removeItem(this.storageKey)}},{key:"getStorageData",value:function(){return this.analysis&&{newAnalysis:{files:[],plant_id:this.newAnalysis.plant_id},analysis:this.analysis,fileNames:this.appFileUpload.files.map((function(e){return e.fileName}))}||void 0}},{key:"checkFileCompleteness",value:function(){var e=this;if(this.waitForFiles&&(this.waitForFiles=this.waitForFiles.filter((function(t){return!e.appFileUpload.files.find((function(e){return e.fileName===t}))})),0===this.waitForFiles.length&&(this.waitForFiles=void 0,b["a"].clearAlert(),this.uploadButton.enable())),this.checkListItems.droneMetaFile=!1,this.checkListItems.videoFiles=!1,this.checkListItems.plantMetaFile=!1,this.appFileUpload){this.newAnalysis.files=this.appFileUpload.files.map((function(e){return e.fileName}));var t,a=Object(s["a"])(this.newAnalysis.files);try{for(a.s();!(t=a.n()).done;){var i=t.value,n=(i.split(".").pop()||"").toLowerCase();"mp4"===n||"mov"==n?this.checkListItems.videoFiles=!0:"srt"===n?this.checkListItems.droneMetaFile=!0:"xslx"!==n&&"mdb"!==n||(this.checkListItems.plantMetaFile=!0)}}catch(o){a.e(o)}finally{a.f()}}}},{key:"onSubmit",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!F["a"].hasState(A["b"].FAILED)){e.next=3;break}return this.$router.go(0),e.abrupt("return");case 3:if(this.checkFileCompleteness(),this.checkListItems.droneMetaFile&&this.checkListItems.videoFiles){e.next=8;break}return b["a"].showErrorAlert("MISSING_FILES"),this.uploadButton.stopLoading(),e.abrupt("return");case 8:if(e.prev=8,this.onUploading(),this.analysis){e.next=14;break}return e.next=13,m["a"].createAnalysis(this.newAnalysis);case 13:this.analysis=e.sent;case 14:this.storeData(),this.appFileUpload.upload(m["a"].getAnalysisFileUploadUrl(this.analysis.id),{id:this.analysis.id}),e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](8),b["a"].showError(e.t0),this.uploadButton.stopLoading();case 22:case"end":return e.stop()}}),e,this,[[8,18]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onFailed",value:function(){this.uploadButton.stopLoading(),this.uploadButtonTxt=this.$t("retry-upload").toString(),this.showCancelButton=!0}},{key:"onUploading",value:function(){this.uploadButton.startLoading(),this.showCancelButton=!1}},{key:"onCancelUpload",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.analysis){e.next=2;break}return e.abrupt("return");case 2:return this.cancelUploadButton.startLoading(),this.appFileUpload.cancel(),se["a"].removeItem(this.storageKey),this.uploadButton.stopLoading(),this.uploadButton.enable(),this.uploadButtonTxt=this.$t("upload").toString(),b["a"].clearAlert(),e.prev=9,e.next=12,m["a"].cancelAnalysisUpload(this.analysis.id);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](9),console.error(e.t0);case 17:return e.prev=17,this.analysis=void 0,this.checkFileCompleteness(),this.cancelUploadButton.stopLoading(),this.showCancelButton=!1,this.$router.go(0),e.finish(17);case 24:case"end":return e.stop()}}),e,this,[[9,14,17,24]])})));function t(){return e.apply(this,arguments)}return t}()}]),a}(v["a"]);oe([Object(h["c"])()],re.prototype,"appFileUpload",void 0),oe([Object(h["c"])()],re.prototype,"uploadButton",void 0),oe([Object(h["c"])()],re.prototype,"cancelUploadButton",void 0),re=oe([Object(h["a"])({name:"app-new-analysis",components:{AppContent:g["a"],AppFileUpload:$,AppChecklist:W,AppChecklistItem:te,AppButton:ae["a"]}})],re);var le=re,ce=le,pe=Object(E["a"])(ce,i,n,!1,null,null,null);pe.options.__file="src/app/analysis/new-analysis/new-analysis.vue";t["default"]=pe.exports}}]);