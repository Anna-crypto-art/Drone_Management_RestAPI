(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{273:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(23),n(305),n(48);var i=n(113);function a(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Object(i["a"])(e),null===e)break;return e}function r(){return r="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=a(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},r.apply(this,arguments)}},285:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"app-explanation"},[n("span",{ref:"appExplTarget",staticClass:"app-explanation-container"},[n("b-icon",{attrs:{icon:"question-circle-fill"}})],1),n("b-popover",{attrs:{target:function(){return e.$refs.appExplTarget},triggers:"hover",placement:"top"}},[e._t("default")],2)],1)},a=[];i._withStripped=!0;var r=n(20),s=n(19),o=n(25),l=n(24),u=n(30),c=(n(48),n(23),n(17)),p=n(16),f=function(e,t,n,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,n,s):a(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},d=function(e){Object(o["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(s["a"])(this,n),t.apply(this,arguments)}return Object(r["a"])(n)}(c["default"]);d=f([Object(p["a"])({name:"app-explanation"})],d);var h=d,v=h,b=(n(306),n(34)),y=Object(b["a"])(v,i,a,!1,null,null,null);y.options.__file="src/app/shared/components/app-explanation/app-explanation.vue";t["a"]=y.exports},286:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i,a,r=n(55);(function(e){e[e["EMPTY"]=0]="EMPTY",e[e["UPLOADING"]=1]="UPLOADING",e[e["UPLOAD_FAILED"]=2]="UPLOAD_FAILED",e[e["DATA_INCOMPLETE"]=3]="DATA_INCOMPLETE",e[e["DATA_COMPLETE"]=4]="DATA_COMPLETE",e[e["DATA_COMPLETE_VERIFIED"]=5]="DATA_COMPLETE_VERIFIED",e[e["PROCESSING"]=6]="PROCESSING",e[e["FINISHED"]=7]="FINISHED"})(a||(a={}));var s=(i={},Object(r["a"])(i,a.EMPTY,"EMPTY"),Object(r["a"])(i,a.UPLOADING,"UPLOADING"),Object(r["a"])(i,a.UPLOAD_FAILED,"UPLOAD_FAILED"),Object(r["a"])(i,a.DATA_INCOMPLETE,"DATA_INCOMPLETE"),Object(r["a"])(i,a.DATA_COMPLETE,"DATA_COMPLETE"),Object(r["a"])(i,a.DATA_COMPLETE_VERIFIED,"DATA_COMPLETE_VERIFIED"),Object(r["a"])(i,a.PROCESSING,"PROCESSING"),Object(r["a"])(i,a.FINISHED,"FINISHED"),i)},288:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e["UPDATE_ANALYSIS"]="updateAnalysis",e["RUN_ANALYSIS_TASK"]="runAnalysisTask",e["FINISHED_ANALYSIS_TASK"]="finishedAnalysisTask",e["QFLY_SERVER_STATE_CHANGED"]="qflyServerStateChanged"}(i||(i={}))},289:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(19),a=n(20),r=n(59),s=n(25),o=n(24),l=(n(95),n(17)),u=function(e){Object(s["a"])(n,e);var t=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n,[{key:"emit",value:function(e,t){this.$emit.apply(this,[e].concat(Object(r["a"])(t)))}},{key:"on",value:function(e,t){this.$on(e,t)}}]),n}(l["default"]),c=function(){function e(){Object(i["a"])(this,e)}return Object(a["a"])(e,null,[{key:"getAnalysisEventBus",value:function(t){return t in e.anaylsisEventBusses||(e.anaylsisEventBusses[t]=new u),e.anaylsisEventBusses[t]}},{key:"on",value:function(t,n,i){e.getAnalysisEventBus(t).on(n,i)}},{key:"emit",value:function(t,n){for(var i=arguments.length,a=new Array(i>2?i-2:0),r=2;r<i;r++)a[r-2]=arguments[r];e.getAnalysisEventBus(t).emit(n,a)}}]),e}();c.anaylsisEventBusses={}},297:function(e,t,n){},298:function(e,t,n){"use strict";var i,a="object"===typeof Reflect?Reflect:null,r=a&&"function"===typeof a.apply?a.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function s(e){console&&console.warn&&console.warn(e)}i=a&&"function"===typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!==e};function l(){l.init.call(this)}e.exports=l,e.exports.once=g,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function p(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function f(e,t,n,i){var a,r,o;if(c(n),r=e._events,void 0===r?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),o=r[t]),void 0===o)o=r[t]=n,++e._eventsCount;else if("function"===typeof o?o=r[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),a=p(e),a>0&&o.length>a&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,s(l)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=d.bind(i);return a.listener=n,i.wrapFn=a,a}function v(e,t,n){var i=e._events;if(void 0===i)return[];var a=i[t];return void 0===a?[]:"function"===typeof a?n?[a.listener||a]:[a]:n?O(a):y(a,a.length)}function b(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function m(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function O(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function g(e,t){return new Promise((function(n,i){function a(n){e.removeListener(t,r),i(n)}function r(){"function"===typeof e.removeListener&&e.removeListener("error",a),n([].slice.call(arguments))}w(e,t,r,{once:!0}),"error"!==t&&E(e,a,{once:!0})}))}function E(e,t,n){"function"===typeof e.on&&w(e,"error",t,n)}function w(e,t,n,i){if("function"===typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(r){i.once&&e.removeEventListener(t,a),n(r)}))}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return p(this)},l.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var l=a[e];if(void 0===l)return!1;if("function"===typeof l)r(l,this,t);else{var u=l.length,c=y(l,u);for(n=0;n<u;++n)r(c[n],this,t)}return!0},l.prototype.addListener=function(e,t){return f(this,e,t,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(e,t){return f(this,e,t,!0)},l.prototype.once=function(e,t){return c(t),this.on(e,h(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,h(this,e,t)),this},l.prototype.removeListener=function(e,t){var n,i,a,r,s;if(c(t),i=this._events,void 0===i)return this;if(n=i[e],void 0===n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(a=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){s=n[r].listener,a=r;break}if(a<0)return this;0===a?n.shift():m(n,a),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,r=Object.keys(n);for(i=0;i<r.length;++i)a=r[i],"removeListener"!==a&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},l.prototype.listeners=function(e){return v(this,e,!0)},l.prototype.rawListeners=function(e){return v(this,e,!1)},l.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):b.call(e,t)},l.prototype.listenerCount=b,l.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},302:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(95);function i(e){var t=["KB","MB","GB","TB"],n=0;do{e/=1024}while(e>1024&&++n<t.length);return"".concat(Math.round(e)," ").concat(t[n])}},305:function(e,t,n){var i=n(21),a=n(36),r=n(37),s=n(38),o=n(75),l=n(117);function u(e,t){var n,i,c=arguments.length<3?e:arguments[2];return r(e)===c?e[t]:(n=o.f(e,t))?s(n,"value")?n.value:void 0===n.get?void 0:n.get.call(c):a(i=l(e))?u(i,t,c):void 0}i({target:"Reflect",stat:!0},{get:u})},306:function(e,t,n){"use strict";n(297)},307:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var i=n(7),a=n(11);n(23);function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];clearTimeout(t),t=setTimeout((function(){e.apply(void 0,a)}),n)}}function s(e){return o.apply(this,arguments)}function o(){return o=Object(a["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout((function(){return e()}),t)}));case 2:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}},318:function(e,t,n){},319:function(e,t,n){},320:function(e,t,n){},355:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-analysis-upload"},[n("div",{staticClass:"mar-bottom-2x"},[n("b-form-checkbox",{attrs:{disabled:!e.hasPlantMetadata},on:{change:e.onChangeDataComplete},model:{value:e.dataComplete,callback:function(t){e.dataComplete=t},expression:"dataComplete"}},[e._v(" "+e._s(e.$t("data-complete"))+" "),n("app-explanation",[e._v(e._s(e.dataCompleteMetadataExpl))])],1)],1),e.uploaderService?n("app-uploader",{attrs:{uploaderService:e.uploaderService,title:e.$t("browse-or-drag-drop-files"),disableAfterUpload:!e.analysis}}):e._e(),e.gotoNewAnalysis?n("div",{staticClass:"pull-right mar-top mar-bottom"},[n("app-button",{on:{click:e.onGotoNewAnalysisClick}},[e._v(e._s(e.$t("goto-analysis",{analysis:e.gotoNewAnalysis.name})))])],1):e._e()],1)},a=[];i._withStripped=!0;var r=n(7),s=n(11),o=n(19),l=n(20),u=n(273),c=n(113),p=n(25),f=n(24),d=n(30),h=(n(48),n(23),n(112),n(72)),v=n(118),b=n(97),y=n(285),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-file-upload"},[n("b-alert",{attrs:{variant:"danger"},model:{value:e.showErrorAlert,callback:function(t){e.showErrorAlert=t},expression:"showErrorAlert"}},[e.error?n("div",[e._v(" "+e._s(e.$t("error-occured-retrying"))+" "),n("span",{staticClass:"pad-left"},[n("b-spinner",{attrs:{small:""}}),e._v(" ("+e._s(e.errorTrials)+" "+e._s(e.$t("trials"))+") ")],1),e.errorTrials>10?n("div",{staticClass:"mar-top"},[n("app-button",{attrs:{variant:"secondary",size:"sm",loading:e.cancelLoading},on:{click:e.onCancelUploadClick}},[e._v(" "+e._s(e.$t("cancel-upload"))+" ")])],1):e._e(),n("div",{staticClass:"mar-top font-xs"},[e._v(" "+e._s(e.$t("details"))+": "),n("b",[e._v(e._s(e.error.error))]),n("br"),e._v(" "+e._s(e.error.message)+" ")])]):e._e()]),n("app-files-selection",{attrs:{disabled:e.disableFilesSelection},on:{filesSelected:e.onFilesSelected},scopedSlots:e._u([{key:"files",fn:function(){return[n("div",{directives:[{name:"show",rawName:"v-show",value:e.files.length>0,expression:"files.length > 0"}],staticClass:"app-file-upload-files mar-top"},e._l(e.files,(function(t){return n("app-file-uploader",{key:t.fileName,attrs:{uploaderService:e.uploaderService,uploading:e.uploading,file:t}})})),1)]},proxy:!0}])},[n("div",{staticClass:"app-file-upload-content mar-bottom"},[e.title?n("h3",{staticClass:"app-file-upload-content-title"},[e._v(e._s(e.title))]):e._e(),e._t("default")],2)]),n("app-button",{directives:[{name:"show",rawName:"v-show",value:e.showUploadButton,expression:"showUploadButton"}],attrs:{loading:e.uploading,disabled:e.uploadButtonDisabled,cls:"pull-right mar-top mar-bottom"},on:{click:e.onStartUpload}},[e._v(" "+e._s(e.$t("upload"))+" ")])],1)},O=[];m._withStripped=!0;var g=n(16),E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-file-upload-file mar-bottom-half"},[n("div",{staticClass:"app-file-upload-file-infos"},[n("div",{staticClass:"app-file-upload-file-name"},[n("small",{staticClass:"grayed"},[e._v(e._s(e.fileSize))]),n("span",{staticClass:"pad-left"},[e._v(e._s(e.file.fileName))]),e.file.description?n("span",{staticClass:"pad-left font-xs",domProps:{innerHTML:e._s(e.file.description)}}):e._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.uploading,expression:"!uploading"}],staticClass:"app-file-upload-file-remove",on:{click:e.onFileRemove}},[n("b-icon",{attrs:{icon:"x"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.uploading,expression:"uploading"}],staticClass:"app-file-upload-file-progress"},[n("span",{directives:[{name:"show",rawName:"v-show",value:!e.success,expression:"!success"}]},[e._v(e._s(e.progress)+"%")]),n("b-icon",{directives:[{name:"show",rawName:"v-show",value:e.success,expression:"success"}],staticClass:"text-success",attrs:{icon:"check2"}})],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.uploading,expression:"uploading"}],ref:"uploadProgressBar",staticClass:"app-file-upload-file-progressbar"})])},w=[];E._withStripped=!0;var _=n(17),j=n(302),k=function(e,t,n,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"===typeof Reflect?"undefined":Object(d["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,n,s):a(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},C=function(e){Object(p["a"])(n,e);var t=Object(f["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.progress=0,e.success=!1,e}return Object(l["a"])(n,[{key:"created",value:function(){var e=this;this.file.onProgress((function(t){e.progress=t,e.uploadProgressBar&&(e.uploadProgressBar.style.width=e.progress+"%")})),this.file.onComplete((function(){e.success=!0,e.uploadProgressBar&&(e.uploadProgressBar.style.display="none"),e.progress=0}))}},{key:"fileSize",get:function(){return Object(j["a"])(this.file.size)}},{key:"onFileRemove",value:function(){this.uploading||this.uploaderService.removeFile(this.file.fileName)}}]),n}(_["default"]);k([Object(g["b"])({required:!0})],C.prototype,"file",void 0),k([Object(g["b"])({required:!0})],C.prototype,"uploading",void 0),k([Object(g["b"])({required:!0})],C.prototype,"uploaderService",void 0),k([Object(g["c"])()],C.prototype,"uploadProgressBar",void 0),C=k([Object(g["a"])({name:"app-file-uploader"})],C);var A=C,S=A,L=(n(370),n(34)),x=Object(L["a"])(S,E,w,!1,null,null,null);x.options.__file="src/app/shared/components/app-file-upload/app-file-uploader.vue";var I=x.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-file-selection mar-bottom",class:{dragging:e.dragging},on:{drop:e.onDrop,dragover:e.onDragOver,dragleave:e.onDragLeave}},[e._t("default"),n("div",{staticClass:"app-file-selection-button"},[n("app-file-input",{attrs:{disabled:e.disabled},model:{value:e.fileButtonSelection,callback:function(t){e.fileButtonSelection=t},expression:"fileButtonSelection"}})],1),e._t("files")],2)},P=[];U._withStripped=!0;var R=n(59),N=(n(148),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"app-file-input btn btn-primary",class:{disabled:e.disabled}},[n("input",{ref:"fileInputElement",staticClass:"app-file-input-file",attrs:{type:"file",disabled:e.disabled,accept:e.accept,multiple:e.multiple},on:{click:e.onClick,change:e.onChange}}),e._v(" "+e._s(e.$t("browse"))+" ")])}),D=[];N._withStripped=!0;var T=function(e,t,n,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"===typeof Reflect?"undefined":Object(d["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,n,s):a(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},F=function(e){Object(p["a"])(n,e);var t=Object(f["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.modelValue=null,e}return Object(l["a"])(n,[{key:"created",value:function(){this.modelValue=this.value}},{key:"onModelValueChanged",value:function(){this.$emit("input",this.modelValue)}},{key:"onClick",value:function(){this.fileInputElement.value=""}},{key:"onChange",value:function(){this.setFiles()}},{key:"setFiles",value:function(){if(this.fileInputElement.files&&0!==this.fileInputElement.files.length){for(var e=[],t=0;t<this.fileInputElement.files.length;t++)e.push(this.fileInputElement.files[t]);this.modelValue=e}else this.modelValue=null}}]),n}(_["default"]);T([Object(g["b"])({required:!0})],F.prototype,"value",void 0),T([Object(g["b"])({default:!0})],F.prototype,"multiple",void 0),T([Object(g["b"])({default:"*"})],F.prototype,"accept",void 0),T([Object(g["b"])({default:!1})],F.prototype,"disabled",void 0),T([Object(g["c"])()],F.prototype,"fileInputElement",void 0),T([Object(g["d"])("modelValue")],F.prototype,"onModelValueChanged",null),F=T([Object(g["a"])({name:"app-file-input"})],F);var M=F,B=M,G=(n(371),Object(L["a"])(B,N,D,!1,null,null,null));G.options.__file="src/app/shared/components/app-file-upload/app-file-input.vue";var $=G.exports,z=function(e,t,n,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"===typeof Reflect?"undefined":Object(d["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,n,s):a(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},V=function(e){Object(p["a"])(n,e);var t=Object(f["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.fileButtonSelection=null,e.fileDropSelection=null,e.dragging=!1,e}return Object(l["a"])(n,[{key:"emitFiles",value:function(){this.disabled||this.$emit("filesSelected",this.fileDropSelection||this.fileButtonSelection)}},{key:"onFileButtonSelectionChanged",value:function(){this.fileButtonSelection&&(this.fileDropSelection=null),this.emitFiles()}},{key:"onDrop",value:function(e){e.preventDefault(),this.dragging=!1;var t=[];Object(R["a"])(e.dataTransfer.files).forEach((function(e){t.push(e)})),this.fileButtonSelection=null,t.length>0?this.fileDropSelection=t:this.fileDropSelection=null,this.emitFiles()}},{key:"onDragOver",value:function(e){e.preventDefault(),this.dragging=!0}},{key:"onDragLeave",value:function(){this.dragging=!1}}]),n}(_["default"]);z([Object(g["b"])({default:!1})],V.prototype,"disabled",void 0),z([Object(g["d"])("fileButtonSelection")],V.prototype,"onFileButtonSelectionChanged",null),V=z([Object(g["a"])({name:"app-files-selection",components:{AppFileInput:$}})],V);var Y=V,H=Y,q=(n(372),Object(L["a"])(H,U,P,!1,null,null,null));q.options.__file="src/app/shared/components/app-file-upload/app-files-selection.vue";var K,J=q.exports;(function(e){e[e["SELECTING"]=0]="SELECTING",e[e["UPLOADING"]=10]="UPLOADING",e[e["RETRYING"]=11]="RETRYING",e[e["COMPLETED"]=20]="COMPLETED",e[e["CANCELED"]=21]="CANCELED"})(K||(K={}));var Q=n(280),W=n(42),X=function(e,t,n,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"===typeof Reflect?"undefined":Object(d["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,n,s):a(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Z=function(e){Object(p["a"])(n,e);var t=Object(f["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.uploaderState=K.SELECTING,e.uploading=!1,e.error=null,e.showErrorAlert=!1,e.showUploadButton=!0,e.cancelLoading=!1,e}return Object(l["a"])(n,[{key:"created",value:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.registerUploaderEvents();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hasStateSelecting",get:function(){return this.uploaderState===K.SELECTING}},{key:"hasStateUploading",get:function(){return this.uploaderState===K.UPLOADING}},{key:"hasStateRetrying",get:function(){return this.uploaderState===K.RETRYING}},{key:"hasStateCompleted",get:function(){return this.uploaderState===K.COMPLETED}},{key:"hasStateCanceled",get:function(){return this.uploaderState===K.CANCELED}},{key:"onFilesSelected",value:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(t){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.uploaderService.fileUploaders=[],!t){e.next=4;break}return e.next=4,this.uploaderService.addFiles(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onStartUpload",value:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.uploaderService.doUpload();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onCancelUploadClick",value:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(confirm(this.$t("sure-to-cancel-upload").toString())){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.uploaderService.cancelUpload();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"files",get:function(){return this.uploaderService.fileUploaders}},{key:"uploadButtonDisabled",get:function(){return 0===this.files.length||this.uploading}},{key:"disableFilesSelection",get:function(){return this.uploading||!this.showUploadButton}},{key:"errorTrials",get:function(){return this.uploaderService.getTrials()}},{key:"registerUploaderEvents",value:function(){var e=this;this.uploaderService.onStartUpload((function(){e.uploaderState=K.UPLOADING,e.uploading=!0,e.error=null,e.showErrorAlert=!1})),this.uploaderService.onResume((function(){e.uploaderState=K.UPLOADING,e.error=null,e.showErrorAlert=!1})),this.uploaderService.onError((function(t){e.uploaderState=K.RETRYING,e.uploading=!0,e.error=t,e.showErrorAlert=!0})),this.uploaderService.onUploadComplete((function(){e.uploaderState=K.COMPLETED,e.showUploadButton=!e.disableAfterUpload,e.uploading=!1,e.showSuccess(e.$t("upload-completed-successfully").toString(),!1)})),this.uploaderService.onUploadCanceled((function(){e.uploaderState=K.CANCELED,e.showUploadButton=!e.disableAfterUpload,e.uploading=!1,e.error=null,e.showErrorAlert=!1}))}}]),n}(W["a"]);X([Object(g["b"])({required:!0})],Z.prototype,"uploaderService",void 0),X([Object(g["b"])()],Z.prototype,"title",void 0),X([Object(g["b"])({default:!1})],Z.prototype,"disableAfterUpload",void 0),X([Object(Q["a"])()],Z.prototype,"onFilesSelected",null),X([Object(Q["a"])()],Z.prototype,"onStartUpload",null),X([Object(Q["a"])("cancelLoading")],Z.prototype,"onCancelUploadClick",null),Z=X([Object(g["a"])({name:"app-uploader",components:{AppFileUploader:I,AppFilesSelection:J,AppButton:h["a"]}})],Z);var ee=Z,te=ee,ne=Object(L["a"])(te,m,O,!1,null,null,null);ne.options.__file="src/app/shared/components/app-file-upload/app-uploader.vue";var ie,ae=ne.exports,re=n(67),se=(n(115),n(95),n(73),n(82),n(45)),oe=(n(94),n(71),n(144),n(211),n(212),n(143),n(298)),le=n(307);n(43),n(50),n(120);(function(e){e["FILE_PROGRESS"]="UPLOAD_FILE_PROGRESS",e["FILE_COMPLETE"]="FILE_COMPLETE",e["FILE_CHUNK_COMPLETE"]="FILE_CHUNK_COMPLETE",e["ERROR"]="UPLOAD_ERROR",e["START_UPLOAD"]="START_UPLOAD",e["UPLOAD_COMPLETE"]="UPLOAD_COMPLETE",e["UPLOAD_CANCELED"]="UPLOAD_CANCELED",e["RESUME_UPLOAD_AFTER_ERROR"]="RESUME_UPLOAD_AFTER_ERROR"})(ie||(ie={}));var ue=function(){function e(t,n,i){Object(o["a"])(this,e),this.file=t,this.fileName=n,this.chunkSizeInMB=i,this.event=new oe["EventEmitter"],this.complete=!1,this.uploadId=null,this.fileId=null,this.missingChunkNumbers=[],this.description=""}return Object(l["a"])(e,[{key:"onProgress",value:function(e){this.event.on(ie.FILE_PROGRESS,e)}},{key:"onChunkComplete",value:function(e){this.event.on(ie.FILE_CHUNK_COMPLETE,e)}},{key:"onComplete",value:function(e){this.event.on(ie.FILE_COMPLETE,e)}},{key:"onError",value:function(e){this.event.on(ie.ERROR,e)}},{key:"emitProgress",value:function(e){this.event.emit(ie.FILE_PROGRESS,e)}},{key:"emitComplete",value:function(){this.event.emit(ie.FILE_COMPLETE)}},{key:"emitError",value:function(){this.event.emit(ie.ERROR)}},{key:"emitChunkComplete",value:function(){this.event.emit(ie.FILE_CHUNK_COMPLETE)}},{key:"fileUploadCompleted",value:function(){this.complete=!0,this.emitComplete()}},{key:"size",get:function(){return this.file.size}},{key:"upload",value:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(){var t,n,i,a,s,o,l=this;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.complete){e.next=3;break}return this.fileUploadCompleted(),e.abrupt("return");case 3:t=1024*this.chunkSizeInMB*1024,n=this.file.size,i=0,a=!1,s=Object(r["a"])().mark((function e(){var s,o,u,c;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=l.getNextChunkNumber(i),!1!==s){e.next=3;break}return e.abrupt("return","break");case 3:return i=s-1,o=i*t,u=s*t,u>=n&&(a=!0,u=n),c=l.file.slice(o,u),e.next=10,se["a"].uploadFileChunk(l.uploadId,c,l.fileId,i+1,(function(e){var a=t/n*i,r=e.loaded/e.total,s=(u-o)/n,c=Math.round(100*(a+r*s));l.emitProgress(c)}));case 10:l.emitChunkComplete(),l.removeChunkNumber(),i++;case 13:case"end":return e.stop()}}),e)}));case 8:if(a){e.next=15;break}return e.delegateYield(s(),"t0",10);case 10:if(o=e.t0,"break"!==o){e.next=13;break}return e.abrupt("break",15);case 13:e.next=8;break;case 15:this.fileUploadCompleted();case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"unregisterEvents",value:function(){this.event.removeAllListeners()}},{key:"getNextChunkNumber",value:function(e){if(this.missingChunkNumbers.length>0){var t=this.missingChunkNumbers[0];if(-1===t){if(t=e+1,t>this.maxChunks)return!1;this.missingChunkNumbers.unshift(t)}return t}return!1}},{key:"removeChunkNumber",value:function(){if(this.missingChunkNumbers.length>0){var e=this.missingChunkNumbers[0];-1!==e&&this.missingChunkNumbers.splice(0,1)}}},{key:"maxChunks",get:function(){var e=1024*this.chunkSizeInMB*1024,t=this.file.size;return Math.ceil(t/e)}}]),e}(),ce=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;Object(o["a"])(this,e),this.chunkSizeInMB=t,this.event=new oe["EventEmitter"],this.fileUploaders=[],this.upload=null,this.trials=0}return Object(l["a"])(e,[{key:"addFiles",value:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(t){var n,i,a,s,o=this;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,se["a"].getSecuredFilenames(t.map((function(e){return e.name})));case 2:n=e.sent,i=Object(re["a"])(n);try{for(s=function(){var e=a.value,n=t.find((function(t){return t.name===e.original_name}));if(!n)throw new Error("File mapping error");var i=new ue(n,e.secured_name,o.chunkSizeInMB);i.onChunkComplete((function(){o.emitResume()})),o.fileUploaders.push(i)},i.s();!(a=i.n()).done;)s()}catch(r){i.e(r)}finally{i.f()}case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeFile",value:function(e){var t=this.fileUploaders.findIndex((function(t){return t.fileName===e}));-1!==t&&this.fileUploaders.splice(t,1)}},{key:"onError",value:function(e){this.event.on(ie.ERROR,e)}},{key:"onStartUpload",value:function(e){this.event.on(ie.START_UPLOAD,e)}},{key:"onResume",value:function(e){this.event.on(ie.RESUME_UPLOAD_AFTER_ERROR,e)}},{key:"onUploadComplete",value:function(e){this.event.on(ie.UPLOAD_COMPLETE,e)}},{key:"onUploadCanceled",value:function(e){this.event.on(ie.UPLOAD_CANCELED,e)}},{key:"getTrials",value:function(){return this.trials}},{key:"emitError",value:function(e){this.event.emit(ie.ERROR,e),this.trials+=1}},{key:"emitResume",value:function(){this.trials=0,this.event.emit(ie.RESUME_UPLOAD_AFTER_ERROR)}},{key:"emitCancel",value:function(){this.trials=0,this.event.emit(ie.UPLOAD_CANCELED)}},{key:"getCreateUploadFiles",value:function(){return this.fileUploaders.map((function(e){return{name:e.fileName,size:e.file.size}}))}},{key:"prepareFileUploaders",value:function(){var e=this;if(!this.upload)throw new Error("Upload is undefined. Missing upload object");var t,n=Object(re["a"])(this.fileUploaders);try{var i=function(){var n=t.value,i=e.upload.files.find((function(e){return e.name==n.fileName}));if(!i)throw new Error("File mapping error");n.uploadId=e.upload.upload_id,n.fileId=i.id,n.complete=i.complete,n.missingChunkNumbers=i.missing_chunks};for(n.s();!(t=n.n()).done;)i()}catch(a){n.e(a)}finally{n.f()}}},{key:"setUpload",value:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(t){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=6;break}return e.next=3,se["a"].getUpload(t);case 3:this.upload=e.sent,e.next=7;break;case 6:this.upload=t;case 7:this.prepareFileUploaders();case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"startUpload",value:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(){var t,n,i,a,s,o;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.upload){e.next=2;break}throw new Error("No upload created or resumed");case 2:if(0!==this.fileUploaders.length){e.next=4;break}throw new Error("No files to upload");case 4:if(!this.fileUploaders.find((function(e){return!e.fileId}))){e.next=6;break}throw new Error("Files not prepared for upload");case 6:if(t=this.getInvalidUploadFilesSelection(),!(t.missingFiles.length>0||t.unknownFiles.length>0)){e.next=9;break}throw new Error("Missing upload files or unknown upload files for resume upload");case 9:window.onbeforeunload=function(){return!0},this.event.emit(ie.START_UPLOAD);case 11:if(void 0===(n=this.fileUploaders.find((function(e){return!e.complete})))){e.next=53;break}return e.prev=12,e.next=15,this.tryUpload(n);case 15:e.next=51;break;case 17:e.prev=17,e.t0=e["catch"](12),i=3;case 20:if(!(i>0)){e.next=35;break}return e.prev=21,e.next=24,this.tryUpload(n);case 24:return e.abrupt("break",35);case 27:return e.prev=27,e.t1=e["catch"](21),i--,a=1e3*Math.abs(i-3),e.next=33,Object(le["b"])(a);case 33:e.next=20;break;case 35:s=!0;case 36:if(!s||!this.upload){e.next=51;break}return e.prev=37,e.next=40,this.refreshUpload();case 40:s=!1,e.next=49;break;case 43:return e.prev=43,e.t2=e["catch"](37),this.emitError(e.t2),o=this.trials<100?1e4:6e4,e.next=49,Object(le["b"])(o);case 49:e.next=36;break;case 51:e.next=11;break;case 53:window.onbeforeunload=null;case 54:case"end":return e.stop()}}),e,this,[[12,17],[21,27],[37,43]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancelUpload",value:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.onbeforeunload=null,e.next=3,se["a"].cancelUpload(this.upload.upload_id);case 3:this.reset(),this.emitCancel();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getInvalidUploadFilesSelection",value:function(){var e=this;if(!this.upload)throw new Error("upload is undefined");var t={missingFiles:this.upload.files.filter((function(t){return!e.fileUploaders.find((function(e){return e.fileName===t.name}))})).map((function(e){return e.name})),unknownFiles:this.fileUploaders.filter((function(t){return!e.upload.files.find((function(e){return e.name===t.fileName}))})).map((function(e){return e.fileName}))};return t}},{key:"tryUpload",value:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(t){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.upload();case 3:this.isUploadComplete()&&(this.event.emit(ie.UPLOAD_COMPLETE),this.reset()),e.next=11;break;case 6:throw e.prev=6,e.t0=e["catch"](0),t.emitError(),this.emitError(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"refreshUpload",value:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.upload){e.next=2;break}throw new Error("Upload is undefined");case 2:return e.next=4,this.setUpload(this.upload.upload_id);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isUploadComplete",value:function(){return!this.fileUploaders.find((function(e){return!e.complete}))}},{key:"reset",value:function(){this.upload=null;var e,t=Object(re["a"])(this.fileUploaders);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.unregisterEvents()}}catch(i){t.e(i)}finally{t.f()}this.fileUploaders=[]}}]),e}(),pe=n(220),fe=n(289),de=n(288),he=function(e){Object(p["a"])(n,e);var t=Object(f["a"])(n);function n(e,i,a){var r;return Object(o["a"])(this,n),r=t.call(this,a),r.plantId=e,r.analysisId=i,r}return Object(l["a"])(n,[{key:"addFiles",value:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(t){var i,a,s,o,l,p,f,d,h;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["a"])(Object(c["a"])(n.prototype),"addFiles",this).call(this,t);case 2:if(this.analysisId){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,se["a"].getAnalysis(this.analysisId);case 6:if(i=e.sent,!i.files){e.next=15;break}for(a=[],s=0,o=Object.keys(i.files);s<o.length;s++)l=o[s],a=a.concat(i.files[l]);return e.next=12,se["a"].getAnalysisFiles(i.id,a);case 12:p=e.sent,f=Object(re["a"])(this.fileUploaders);try{for(f.s();!(d=f.n()).done;)h=d.value,p[h.fileName]&&(h.description=pe["i18n"].t("file-exists-and-overide").toString())}catch(r){f.e(r)}finally{f.f()}case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"doUpload",value:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.analysisId){e.next=5;break}if(this.flownAt){e.next=3;break}throw{error:"INVALID_OR_MISSING_PARAMS",message:pe["i18n"].t("missing").toString()+" "+pe["i18n"].t("acquisition-date").toString()};case 3:if(this.plantId){e.next=5;break}throw{error:"INVALID_OR_MISSING_PARAMS",message:pe["i18n"].t("missing").toString()+" "+pe["i18n"].t("plant").toString()};case 5:return e.next=7,this.createAnalysisUpload();case 7:return this.analysisId&&fe["a"].emit(this.analysisId,de["a"].UPDATE_ANALYSIS),e.next=10,this.startUpload();case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setFlownAt",value:function(e){this.flownAt=e}},{key:"setAnalysisId",value:function(e){this.analysisId=e}},{key:"setPlantId",value:function(e){this.plantId=e}},{key:"createAnalysisUpload",value:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(){var t;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.upload){e.next=7;break}return e.next=3,se["a"].createAnalysisUpload({chunk_size_in_mb:this.chunkSizeInMB,files:this.getCreateUploadFiles(),analysis_id:this.analysisId,create_analysis:!this.analysisId&&{flown_at:this.flownAt,plant_id:this.plantId}||void 0});case 3:return t=e.sent,this.analysisId||(this.analysisId=t.analysis_id),e.next=7,this.setUpload(t);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(ce),ve=function(e,t,n,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"===typeof Reflect?"undefined":Object(d["a"])(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,n,s):a(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},be=function(e){Object(p["a"])(n,e);var t=Object(f["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.dataComplete=!1,e.hasPlantMetadata=!1,e.uploaderService=null,e.gotoNewAnalysis=null,e.appContentEventId="newAnalysis",e}return Object(l["a"])(n,[{key:"created",value:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(){var t;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["a"])(Object(c["a"])(n.prototype),"created",this).call(this);case 2:this.uploaderService=new he(this.plantId||void 0,null===(t=this.analysis)||void 0===t?void 0:t.id),this.dataComplete=!!this.analysis&&this.analysis.data_complete,this.hasPlantMetadata=this.analysis&&this.analysis.has_plant_metadata||!1,this.analysis&&(this.appContentEventId=this.analysis.id),this.registerUploadEvents();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onAnalysisChanged",value:function(){this.dataComplete=!!this.analysis&&this.analysis.data_complete,this.hasPlantMetadata=this.analysis&&this.analysis.has_plant_metadata||!1}},{key:"onPlantIdChanged",value:function(){this.plantId&&this.uploaderService.setPlantId(this.plantId)}},{key:"onFlownAtChanged",value:function(){this.flownAt&&this.uploaderService.setFlownAt(this.flownAt)}},{key:"registerUploadEvents",value:function(){var e=this;this.uploaderService.onStartUpload(Object(s["a"])(Object(r["a"])().mark((function t(){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.t0=e.analysis,t.t0){t.next=5;break}return t.next=4,se["a"].getAnalysis(e.uploaderService.analysisId);case 4:t.t0=t.sent;case 5:n=t.t0,e.hasPlantMetadata=n.has_plant_metadata||!1;case 7:case"end":return t.stop()}}),t)})))),this.uploaderService.onUploadComplete(Object(s["a"])(Object(r["a"])().mark((function t(){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,se["a"].getAnalysis(e.uploaderService.analysisId);case 2:n=t.sent,n.has_plant_metadata&&n.data_complete&&v["a"].showInfo(e.appContentEventId,e.$t("analysis-with-metdata-data-complete_quest").toString()),e.hasPlantMetadata=n.has_plant_metadata||!1,e.analysis||(e.gotoNewAnalysis=n);case 6:case"end":return t.stop()}}),t)})))),this.uploaderService.onUploadCanceled(Object(s["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.analysis){t.next=4;break}return t.next=3,se["a"].getAnalysis(e.uploaderService.analysisId);case 3:e.gotoNewAnalysis=t.sent;case 4:case"end":return t.stop()}}),t)}))))}},{key:"dataCompleteMetadataExpl",get:function(){return!this.hasPlantMetadata&&this.$t("missing-plant-metadata").toString()||this.$t("data-complete_expl").toString()}},{key:"onChangeDataComplete",value:function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(){var t;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,se["a"].getAnalysis(this.uploaderService.analysisId);case 2:if(t=e.sent,!t.plant.in_setup_phase||!this.dataComplete){e.next=7;break}if(confirm(this.$t("data-complete-sure-quest").toString())){e.next=7;break}return this.dataComplete=!1,e.abrupt("return");case 7:return e.next=9,se["a"].updateAnalysis(t.id,{data_complete:this.dataComplete});case 9:fe["a"].emit(t.id,de["a"].UPDATE_ANALYSIS);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onGotoNewAnalysisClick",value:function(){this.$router.push({name:"EditAnalysis",params:{id:this.gotoNewAnalysis.id}})}}]),n}(W["a"]);ve([Object(g["b"])({default:null})],be.prototype,"plantId",void 0),ve([Object(g["b"])({default:null})],be.prototype,"flownAt",void 0),ve([Object(g["b"])({default:null})],be.prototype,"analysis",void 0),ve([Object(g["d"])("analysis")],be.prototype,"onAnalysisChanged",null),ve([Object(g["d"])("plantId")],be.prototype,"onPlantIdChanged",null),ve([Object(g["d"])("flownAt")],be.prototype,"onFlownAtChanged",null),ve([Object(Q["a"])()],be.prototype,"onChangeDataComplete",null),ve([Object(Q["a"])()],be.prototype,"onGotoNewAnalysisClick",null),be=ve([Object(g["a"])({name:"app-analysis-uploader",components:{AppContent:b["a"],AppUploader:ae,AppButton:h["a"],AppExplanation:y["a"]}})],be);var ye=be,me=ye,Oe=Object(L["a"])(me,i,a,!1,null,null,null);Oe.options.__file="src/app/analysis/shared/analysis-uploader.vue";t["a"]=Oe.exports},370:function(e,t,n){"use strict";n(318)},371:function(e,t,n){"use strict";n(319)},372:function(e,t,n){"use strict";n(320)}}]);