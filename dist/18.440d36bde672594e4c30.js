(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{280:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"app-explanation"},[n("span",{ref:"appExplTarget",staticClass:"app-explanation-container"},[n("b-icon",{attrs:{icon:"question-circle-fill"}})],1),n("b-popover",{attrs:{target:function(){return t.$refs.appExplTarget},triggers:"hover",placement:"top"}},[t._t("default")],2)],1)},s=[];a._withStripped=!0;var r=n(20),c=n(19),l=n(23),i=n(22),o=n(27),p=(n(46),n(24),n(17)),u=n(16),d=function(t,e,n,a){var s,r=arguments.length,c=r<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"===("undefined"===typeof Reflect?"undefined":Object(o["a"])(Reflect))&&"function"===typeof Reflect.decorate)c=Reflect.decorate(t,e,n,a);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(c=(r<3?s(c):r>3?s(e,n,c):s(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},f=function(t){Object(l["a"])(n,t);var e=Object(i["a"])(n);function n(){return Object(c["a"])(this,n),e.apply(this,arguments)}return Object(r["a"])(n)}(p["default"]);f=d([Object(u["a"])({name:"app-explanation"})],f);var h=f,b=h,g=(n(289),n(32)),y=Object(g["a"])(b,a,s,!1,null,null,null);y.options.__file="src/app/shared/components/app-explanation/app-explanation.vue";e["a"]=y.exports},283:function(t,e,n){},289:function(t,e,n){"use strict";n(283)},509:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-content",{attrs:{title:t.$t("new-data-upload"),navback:!0,subtitle:t.plantName,eventId:"newAnalysis"}},[n("div",{staticClass:"app-new-analysis mar-bottom-2x"},[n("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.plantOptions.length>1,expression:"plantOptions.length > 1"}],attrs:{"label-cols-lg":"2",label:t.$t("plant")}},[n("b-form-select",{attrs:{required:"",options:t.plantOptions},model:{value:t.selectedPlantId,callback:function(e){t.selectedPlantId=e},expression:"selectedPlantId"}})],1),n("b-form-group",{attrs:{"label-cols-lg":"2",label:t.$t("acquisition-date")}},[n("app-datepicker",{attrs:{required:""},model:{value:t.flownAt,callback:function(e){t.flownAt=e},expression:"flownAt"}})],1),n("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.productPackagesSelection.length>0,expression:"productPackagesSelection.length > 0"}],attrs:{"label-cols-lg":"2",label:t.$t("product-packages")}},[n("app-multiselect",{attrs:{options:t.productPackagesSelection},model:{value:t.selectedProductPackages,callback:function(e){t.selectedProductPackages=e},expression:"selectedProductPackages"}})],1)],1),n("app-analysis-uploader",{attrs:{plantId:t.selectedPlantId,analysis:t.analysis,flownAt:t.flownAt,orderProductPackageIds:t.selectedProductPackages},scopedSlots:t._u([{key:"addActions",fn:function(){return[n("app-button",{attrs:{variant:"secondary",loading:t.loadingEmptyAnalysis},on:{click:t.onCreateEmptyAnalysisClick}},[t._v(" "+t._s(t.$t("create-empty-analysis"))+" ")])]},proxy:!0}])})],1)},s=[];a._withStripped=!0;var r=n(6),c=n(10),l=n(19),i=n(20),o=n(23),p=n(22),u=n(27),d=(n(46),n(24),n(145),n(72),n(112),n(144),n(95),n(16)),f=n(42),h=n(97),b=n(47),g=n(73),y=n(398),P=n(315),w=n(325),v=n(297),O=n(276),k=function(t,e,n,a){var s,r=arguments.length,c=r<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"===("undefined"===typeof Reflect?"undefined":Object(u["a"])(Reflect))&&"function"===typeof Reflect.decorate)c=Reflect.decorate(t,e,n,a);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(c=(r<3?s(c):r>3?s(e,n,c):s(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},m=function(t){Object(o["a"])(n,t);var e=Object(p["a"])(n);function n(){var t;return Object(l["a"])(this,n),t=e.apply(this,arguments),t.selectedPlantId=null,t.plantOptions=[],t.flownAt=null,t.analysis=null,t.productPackagesSelection=[],t.selectedProductPackages=null,t.loadingEmptyAnalysis=!1,t}return Object(i["a"])(n,[{key:"created",value:function(){var t=Object(c["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.preparePlantSelection();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onSelectedPlantIdChanged",value:function(){var t=Object(c["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loadProductPackagesSelection();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onFlownAtChanged",value:function(){var t=Object(c["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loadProductPackagesSelection();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"plantName",get:function(){var t=this;if(this.selectedPlantId,this.plants){var e=this.plants.find((function(e){return e.id===t.selectedPlantId}));if(e)return e.name}return""}},{key:"onCreateEmptyAnalysisClick",value:function(){var t=Object(c["a"])(Object(r["a"])().mark((function t(){var e;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.flownAt){t.next=2;break}throw{error:"INVALID_OR_MISSING_PARAMS",message:this.$t("missing").toString()+" "+this.$t("acquisition-date").toString()};case 2:if(this.selectedPlantId){t.next=4;break}throw{error:"INVALID_OR_MISSING_PARAMS",message:this.$t("missing").toString()+" "+this.$t("plant").toString()};case 4:return t.next=6,b["a"].createEmptyAnalysis({flown_at:this.flownAt,plant_id:this.selectedPlantId,order_product_package_ids:this.selectedProductPackages||void 0});case 6:return e=t.sent,this.showSuccess(this.$t("analysis-created-success").toString()),t.next=10,this.$nextTick();case 10:this.$router.push({name:"EditAnalysis",params:{id:e.id}});case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"preparePlantSelection",value:function(){var t=Object(c["a"])(Object(r["a"])().mark((function t(){var e,n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b["a"].getPlants();case 2:return this.plants=t.sent,e=this.$route.query.plantId,e&&!Array.isArray(e)?this.plants=this.plants.filter((function(t){return t.id===e})):e=void 0,t.next=7,b["a"].getAllAnalysis({plant_id:e});case 7:if(n=t.sent,this.plants=this.plants.filter((function(t){return!n.find((function(e){return e.plant.id===t.id&&e.current_state&&e.current_state.state.id<=v["a"].DATA_INCOMPLETE}))})),0!==this.plants.length){t.next=12;break}return this.$router.push({name:"Analyses"}),t.abrupt("return");case 12:this.plantOptions=this.plants.map((function(t){return{value:t.id,text:t.name}})),1===this.plants.length&&(this.selectedPlantId=this.plants[0].id);case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"loadProductPackagesSelection",value:function(){var t=Object(c["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.productPackagesSelection=[],this.selectedPlantId&&this.flownAt){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,b["a"].getOrderPPsMulitselectOptions(this.selectedPlantId,this.flownAt);case 5:return this.productPackagesSelection=t.sent,t.next=8,b["a"].getNewAnalysisProductPackagesProposal(this.selectedPlantId,this.flownAt);case 8:this.selectedProductPackages=t.sent.map((function(t){return t.id}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(f["a"]);k([Object(O["a"])()],m.prototype,"created",null),k([Object(d["d"])("selectedPlantId")],m.prototype,"onSelectedPlantIdChanged",null),k([Object(d["d"])("flownAt")],m.prototype,"onFlownAtChanged",null),k([Object(O["a"])("loadingEmptyAnalysis")],m.prototype,"onCreateEmptyAnalysisClick",null),k([Object(O["a"])()],m.prototype,"loadProductPackagesSelection",null),m=k([Object(d["a"])({name:"app-new-analysis",components:{AppContent:h["a"],AppButton:g["a"],AppAnalysisUploader:y["a"],AppMultiselect:P["a"],AppDatepicker:w["a"]}})],m);var A=m,j=A,x=n(32),I=Object(x["a"])(j,a,s,!1,null,null,null);I.options.__file="src/app/analysis/new-analysis/new-analysis.vue";e["default"]=I.exports}}]);