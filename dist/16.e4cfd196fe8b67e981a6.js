(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{282:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},288:function(t,e,a){var n=a(82),r=a(282),c="["+r+"]",o=RegExp("^"+c+c+"*"),i=RegExp(c+c+"*$"),s=function(t){return function(e){var a=String(n(e));return 1&t&&(a=a.replace(o,"")),2&t&&(a=a.replace(i,"")),a}};t.exports={start:s(1),end:s(2),trim:s(3)}},322:function(t,e,a){var n=a(36),r=a(160);t.exports=function(t,e,a){var c,o;return r&&"function"==typeof(c=e.constructor)&&c!==a&&n(o=c.prototype)&&o!==a.prototype&&r(t,o),t}},335:function(t,e,a){"use strict";var n=a(39),r=a(33),c=a(159),o=a(49),i=a(38),s=a(64),u=a(322),l=a(99),d=a(28),p=a(84),g=a(119).f,h=a(77).f,f=a(48).f,k=a(288).trim,P="Number",m=r[P],y=m.prototype,b=s(p(y))==P,_=function(t){var e,a,n,r,c,o,i,s,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=k(u),e=u.charCodeAt(0),43===e||45===e){if(a=u.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+u}for(c=u.slice(2),o=c.length,i=0;i<o;i++)if(s=c.charCodeAt(i),s<48||s>r)return NaN;return parseInt(c,n)}return+u};if(c(P,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var v,O=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof O&&(b?d((function(){y.valueOf.call(a)})):s(a)!=P)?u(new m(_(e)),a,O):_(e)},S=n?g(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;S.length>w;w++)i(m,v=S[w])&&!i(O,v)&&f(O,v,h(m,v));O.prototype=y,y.constructor=O,o(r,P,O)}},346:function(t,e,a){"use strict";var n;a.d(e,"a",(function(){return n})),function(t){t[t["CSP_PTC"]=1]="CSP_PTC",t[t["PV"]=2]="PV"}(n||(n={}))},370:function(t,e,a){},455:function(t,e,a){"use strict";a(370)},516:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-settings-product-packages"},[a("div",{staticClass:"app-settings-product-packages-table-toolbar"},[a("app-button",{attrs:{variant:"primary"},on:{click:t.onCreateProductPackageClick}},[t._v(" "+t._s(t.$t("create-product-package"))+" ")])],1),a("app-table-container",[a("app-table",{attrs:{columns:t.columns,rows:t.rows,loading:t.loading,hoverActions:!0},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[a("span",{staticClass:"product-package-table-name"},[t._v(t._s(e.item.name))])]}},{key:"cell(technology)",fn:function(e){return[t._v(" "+t._s(e.item.technology_name)+" ")]}},{key:"cell(key_figures)",fn:function(e){return[a("span",{staticClass:"grayed"},[t._v(" "+t._s(e.item.key_figures.map((function(t){return t.name})).join(", "))+" ")])]}},{key:"cell(plant_status)",fn:function(e){return[a("span",{attrs:{id:"plantStatusExplTarget"+e.item.id}},[t._v(" "+t._s(e.item.plant_status.map((function(t){return t.name})).join(", "))+" ")]),a("b-popover",{attrs:{target:"plantStatusExplTarget"+e.item.id,triggers:"hover",placement:"top"}},t._l(e.item.plant_status,(function(n,r){return a("span",{key:n.name},[a("b",[t._v(t._s(n.name)+": ")]),t._v(" "+t._s(n.description)+" "),r<e.item.plant_status.length-1?a("br"):t._e(),r<e.item.plant_status.length-1?a("br"):t._e()])})),0)]}},{key:"hoverActions",fn:function(e){return[a("app-button",{attrs:{variant:"secondary",size:"sm",title:t.$t("edit-something",{something:e.item.name}),icon:"wrench"},on:{click:function(a){return t.onEditProductPackageClick(e.item)}}}),a("app-button",{attrs:{variant:"outline-danger",size:"sm",title:t.$t("delete-something",{something:e.item.name}),icon:"trash"},on:{click:function(a){return t.onDeleteProductPackageClick(e.item)}}})]}}])})],1),a("app-modal-form",{ref:"appProductPackageModal",attrs:{id:"product-package-modal",title:t.productPackageModalTitle,"ok-title":t.productPackageModalOkTitle,modalLoading:t.productPackageModalLoading},on:{submit:t.onSubmitProductPackage}},[t.currentProductPackage?a("b-row",[a("b-col",[a("b-form-group",{attrs:{label:t.$t("name")}},[a("b-form-input",{attrs:{id:"new-product-package-name",required:"",placeholder:t.$t("name")},model:{value:t.currentProductPackage.name,callback:function(e){t.$set(t.currentProductPackage,"name",e)},expression:"currentProductPackage.name"}})],1),a("b-form-group",{attrs:{label:t.$t("technology")}},[a("b-form-select",{attrs:{id:"new-plant-technology",options:t.technologies,required:""},on:{change:t.onTechnologySelectionChanged},model:{value:t.currentProductPackage.technology_id,callback:function(e){t.$set(t.currentProductPackage,"technology_id",e)},expression:"currentProductPackage.technology_id"}})],1),a("b-form-group",{attrs:{label:t.$t("performance-indicators")}},[a("app-multiselect",{attrs:{options:t.keyFigureOptions,required:""},model:{value:t.selectedKeyFigureIds,callback:function(e){t.selectedKeyFigureIds=e},expression:"selectedKeyFigureIds"}})],1),a("b-form-group",{attrs:{label:t.$t("required-plant-status")}},[a("app-multiselect",{attrs:{options:t.plantStatusOptions,required:""},model:{value:t.selectedPlantStatusIds,callback:function(e){t.selectedPlantStatusIds=e},expression:"selectedPlantStatusIds"}})],1)],1)],1):t._e()],1)],1)},r=[];n._withStripped=!0;var c=a(57),o=a(6),i=a(10),s=a(19),u=a(20),l=a(25),d=a(24),p=a(27),g=(a(46),a(22),a(94),a(96),a(75),a(216),a(335),a(16)),h=a(285),f=a(284),k=a(74),P=a(309),m=a(149),y=a(47),b=a(42),_=a(346),v=a(278),O=function(t,e,a,n){var r,c=arguments.length,o=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"===("undefined"===typeof Reflect?"undefined":Object(p["a"])(Reflect))&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,a,n);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(o=(c<3?r(o):c>3?r(e,a,o):r(e,a))||o);return c>3&&o&&Object.defineProperty(e,a,o),o},S=function(t){Object(l["a"])(a,t);var e=Object(d["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.columns=[],t.rows=[],t.selectedKeyFigureIds=null,t.keyFigureOptions=[],t.selectedPlantStatusIds=null,t.plantStatusOptions=[],t.technologies=[],t.allKeyFigures=[],t.allPlantStatus=[],t.loading=!1,t.productPackageModalLoading=!1,t.productPackageModalTitle="",t.productPackageModalOkTitle="",t.currentProductPackage={id:0,name:"",technology_id:0,key_figures:[],plant_status:[]},t}return Object(u["a"])(a,[{key:"created",value:function(){var t=Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.columns=[{key:"name",label:this.$t("name").toString()},{key:"technology",label:this.$t("technology").toString()},{key:"key_figures",label:this.$t("performance-indicators").toString()},{key:"plant_status",label:this.$t("required-plant-status").toString()}],t.next=3,y["a"].getTechnologies();case 3:return this.technologies=t.sent.map((function(t){return{value:t.id,text:t.abbrev}})),t.next=6,this.updateProductPackageRows();case 6:return t.next=8,y["a"].getAllKeyFigures();case 8:return this.allKeyFigures=t.sent,t.next=11,y["a"].getAllPlantStatus();case 11:this.allPlantStatus=t.sent,this.updateKeyFigureOptions(),this.updatePlantStatusOptions();case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateKeyFigureOptions",value:function(){var t,e=[],a=Object(c["a"])(this.allKeyFigures);try{for(a.s();!(t=a.n()).done;){var n=t.value;this.currentProductPackage.technology_id&&this.currentProductPackage.technology_id!=n.component.technology_id||e.push({id:n.id.toString(),label:n.name})}}catch(r){a.e(r)}finally{a.f()}this.keyFigureOptions=e}},{key:"updatePlantStatusOptions",value:function(){var t,e=[],a=Object(c["a"])(this.allPlantStatus);try{for(a.s();!(t=a.n()).done;){var n=t.value;this.currentProductPackage.technology_id&&this.currentProductPackage.technology_id!=n.technology_id||e.push({id:n.id,label:n.name})}}catch(r){a.e(r)}finally{a.f()}this.plantStatusOptions=e}},{key:"updateProductPackageRows",value:function(){var t=Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y["a"].getProductPackagesWithKeyFigures();case 2:this.rows=t.sent.map((function(t){return{id:t.id,name:t.name,technology_name:_["a"][t.technology_id],technology_id:t.technology_id,key_figures:t.key_figures,plant_status:t.plant_status}})).sort((function(t,e){var a=t.name.toLowerCase(),n=e.name.toLowerCase(),r=t.technology_id,c=e.technology_id;return r<c?-1:r>c?1:a<n?-1:a>n?1:0}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onCreateProductPackageClick",value:function(){this.currentProductPackage={id:0,name:"",technology_id:0,key_figures:[],plant_status:[]},this.selectedKeyFigureIds=[],this.selectedPlantStatusIds=[],this.updateKeyFigureOptions(),this.updatePlantStatusOptions(),this.productPackageModalTitle=this.$t("create-product-package").toString(),this.productPackageModalOkTitle=this.$t("create").toString(),this.appProductPackageModal.show()}},{key:"onSubmitProductPackage",value:function(){var t=Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.productPackageModalLoading=!0,t.prev=1,0!==this.currentProductPackage.id){t.next=8;break}return t.next=5,y["a"].createProductPackage({name:this.currentProductPackage.name,technology_id:this.currentProductPackage.technology_id,key_figures:this.selectedKeyFigureIds.map((function(t){return Number(t)})),plant_status:this.selectedPlantStatusIds.map((function(t){return Number(t)}))});case 5:this.showSuccess(this.$t("something-created-success",{something:this.currentProductPackage.name}).toString()),t.next=11;break;case 8:return t.next=10,y["a"].updateProductPackage(this.currentProductPackage.id,{name:this.currentProductPackage.name,technology_id:this.currentProductPackage.technology_id,key_figures:this.selectedKeyFigureIds.map((function(t){return Number(t)})),plant_status:this.selectedPlantStatusIds.map((function(t){return Number(t)}))});case 10:this.showSuccess(this.$t("something-edited-successfully",{something:this.currentProductPackage.name}).toString());case 11:return this.appProductPackageModal.hide(),t.next=14,this.updateProductPackageRows();case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](1),this.showError(t.t0);case 19:return t.prev=19,this.productPackageModalLoading=!1,t.finish(19);case 22:case"end":return t.stop()}}),t,this,[[1,16,19,22]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"onEditProductPackageClick",value:function(t){this.selectedKeyFigureIds=t.key_figures.map((function(t){return t.id.toString()})),this.selectedPlantStatusIds=t.plant_status.map((function(t){return t.id.toString()})),this.currentProductPackage={id:t.id,name:t.name,technology_id:t.technology_id,key_figures:t.key_figures,plant_status:t.plant_status},this.updateKeyFigureOptions(),this.updatePlantStatusOptions(),this.productPackageModalTitle=this.$t("update-something",{something:this.currentProductPackage.name}).toString(),this.productPackageModalOkTitle=this.$t("apply").toString(),this.appProductPackageModal.show()}},{key:"onDeleteProductPackageClick",value:function(){var t=Object(i["a"])(Object(o["a"])().mark((function t(e){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(confirm(this.$t("sure-delete-something",{something:e.name}).toString())){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,y["a"].deleteProductPackage(e.id);case 4:return this.showSuccess(this.$t("something-deleted-successfully",{something:e.name}).toString()),t.next=7,this.updateProductPackageRows();case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"onTechnologySelectionChanged",value:function(){var t=Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.currentProductPackage.key_figures=[],this.selectedKeyFigureIds=[],this.selectedPlantStatusIds=[],this.updateKeyFigureOptions(),this.updatePlantStatusOptions();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),a}(b["a"]);O([Object(g["c"])()],S.prototype,"appProductPackageModal",void 0),O([Object(v["a"])("loading")],S.prototype,"created",null),O([Object(v["a"])()],S.prototype,"onCreateProductPackageClick",null),O([Object(v["a"])("productPackageModalLoading")],S.prototype,"onSubmitProductPackage",null),O([Object(v["a"])()],S.prototype,"onEditProductPackageClick",null),O([Object(v["a"])("loading")],S.prototype,"onDeleteProductPackageClick",null),O([Object(v["a"])()],S.prototype,"onTechnologySelectionChanged",null),S=O([Object(g["a"])({name:"app-settings-product-packages",components:{AppTableContainer:h["a"],AppModalForm:m["a"],AppTable:f["a"],AppButton:k["a"],AppMultiselect:P["a"]}})],S);var w=S,I=w,j=(a(455),a(32)),x=Object(j["a"])(I,n,r,!1,null,null,null);x.options.__file="src/app/settings/product-packages/product-packages.vue";e["default"]=x.exports}}]);